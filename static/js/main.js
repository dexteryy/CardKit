(function(){function y(t,n,r){var i=typeof r=="string";r||(n?D(n)?r=k(L(A(t))):(r=n,n=null):(r=t,t=""),typeof t!="string"?(n=t,t=""):(i=typeof r=="string",!i&&!n&&(n=x(r)))),t=t&&L(t);var s=t&&f.mods[t];if(!f.debug&&s&&s.name&&(i&&s.loaded==2||s.exports))return;i&&f.enable_ozma&&(n=null);var o=P(this)?this:e;s=f.mods[t]={name:t,url:s&&s.url,host:o,deps:n||[]},t===""&&(d=s);if(typeof r!="string")s.block=r,s.loaded=2;else{var u=f.aliases;u&&(r=r.replace(/\{(\w+)\}/g,function(e,t){return u[t]||""})),s.url=r}s.block&&!_(s.block)&&(s.exports=r)}function b(t,n,r){if(typeof t=="string"){if(!n)return(f.mods[L(A(t,v))]||{}).exports;t=[t]}else n||(n=t,t=x(n));var i=P(this)?this:e;r||(r={url:v&&v.url});var s,o=0,u=S.call(i,t,r);for(var a=0,l=u.length;a<l;a++)s=u[a],s.is_reset&&(s=f.mods[s.name]),s.url&&s.loaded!==2&&(o++,s.loaded=1,E(s,function(){this.loaded=2;var e=d;e&&(e.name=this.name,e.url=this.url,f.mods[this.name]=e,d=null),--o<=0&&b.call(i,t,n,r)}));o||(r.deps=t,r.host=i,r.block=n,setTimeout(function(){T(t,r),u.push(r),w(u.reverse())},0))}function w(e){var t,n,r,i,s,o,u,a,l,c,h=p;while(t=e.pop()){t.is_reset?(c=H(f.mods[t.name]),c.host=t.host,c.newname=t.newname,t=c,m[t.newname]||(m[t.newname]=[]),m[t.newname].push(t),t.exports=undefined):t.name&&(t=f.mods[t.name]||t);if(!t.block||!t.running&&t.exports!==undefined)continue;u=[],a={},l={id:t.name,filename:t.url,exports:a},o=t.deps.slice(),o[t.block.hiddenDeps?"unshift":"push"]("require","exports","module");for(var d=0,y=o.length;d<y;d++){n=o[d];switch(n){case"require":u.push(b);break;case"exports":u.push(a);break;case"module":u.push(l);break;case"host":u.push(t.host);break;case"finish":r=t.name,h[r]?h[r].push(e):h[r]=[e],u.push(function(e){setTimeout(function(){e!==undefined&&(t.exports=e);if(!h[r])return;g.call(h[r],function(e){this(e)},w),delete h[r],t.running=0},0)}),s=1;break;default:u.push(((m[n]||[]).pop()||f.mods[L(n)]||{}).exports)}}if(!t.running){v=t,i=t.block.apply(t.host,u)||null,v=!1,a=l.exports,t.exports=i!==undefined?i:a;for(var E in a){E&&(t.exports=a);break}}if(s){t.running=1;break}}}function E(e,t){var n=e.url,r=l[n];if(!r){var i=e.name,s=c;if(e.deps&&e.deps.length&&s[i]!==1){s[i]=[e.deps.length,t],e.deps.forEach(function(t){var n=f.mods[L(t)];this[t]!==1&&n.url&&n.loaded!==2?(this[t]||(this[t]=[]),this[t].push(e)):s[i][0]--},h);if(s[i][0]>0)return;s[i]=1}r=l[n]=[[t,e]];var o=/^\w+:\/\//.test(n)?n:(f.enable_ozma&&f.distUrl||f.baseUrl||"")+(f.enableAutoSuffix?C(n):n);M.call(e.host||this,o,function(){g.call(r,function(e){e[0].call(e[1])}),l[n]=1,h[i]&&h[i]!==1&&(h[i].forEach(function(e){var t=this[e.name];--t[0]<=0&&(this[e.name]=1,E(e,t[1]))},s),h[i]=1)})}else r===1?t.call(e):r.push([t,e])}function S(e,t,r){r=r||[];if(!e[0])return r;var i,s=r.history;s||(s=r.history={});if(e[1])i=e,e=!1;else{var o,u=e[0],l=n.exec(u);l&&(u=l[2],l=l[1]);var c=L(u);if(!f.mods[c]&&!a[c]){var h=L(A(u,t));c!==h&&(f.mods[t.url+":"+c]=h,c=h),f.mods[h]||y(h,k(h))}e=t=f.mods[c];if(!e)return r;l==="new"?e={is_reset:!0,deps:e.deps,name:c,newname:l+"!"+c,host:this}:o=e.name;if(s[o])return r;s[o]?i=[]:(i=e.deps||[],o&&(s[o]=!0))}for(var p=i.length-1;p>=0;p--)s[i[p]]||S.call(this,[i[p]],t,r);return e&&(T(i,e),r.push(e)),r}function x(e){var t=e.hiddenDeps||[];if(!e.hiddenDeps){var n=e.toString(),i=null;t=e.hiddenDeps=[];while(i=r.exec(n))t.push(i[0].slice(10,-2))}return t.slice()}function T(e,t){g.call(e.slice(),function(n,r){var i=this[t.url+":"+L(n)];typeof i=="string"&&(e[r]=i)},f.mods)}function N(e){for(var t in e)if(t==="aliases"){f[t]||(f[t]={});for(var n in e[t])f[t][n]=e[t][n];var r=f.mods;for(var i in r)r[i].name=L(i),r[r[i].name]=r[i]}else f[t]=e[t]}function C(e){return e.replace(/(.+?)(_src.*)?(\.\w+)$/,function(e,t,n,r){return t+(n&&"_combo"||"_pack")+r})}function k(e){return i.test(e)?e:e+".js"}function L(e){var t=f.aliases;return t&&(e=e.replace(u,function(e,n){return t[n]||n+"/"})),e}function A(e,t){var n=s.exec(e);return n&&t&&(e=(t.url||"").replace(/[^\/]+$/,"")+n[0]),O(e)}function O(e){e=e.replace(o,"$1");var t,n,r=e,i=/(\.\.\/)+/g;while(t=(i.exec(r)||[])[0])n=t.match(/\.\.\//g).length,e=e.replace(new RegExp("([^/\\.]+/){"+n+"}"+t),"");return e.replace(/\/\//g,"/")}function M(e,t){var n=P(this)?this.document:document,r=n.createElement("script");r.type="text/javascript",r.async="async",t?_(t)&&(t={callback:t}):t={},t.charset&&(r.charset=t.charset),r.src=e;var i=n.getElementsByTagName("head")[0];r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=undefined,!n&&t.callback&&t.callback()},i.insertBefore(r,i.firstChild)}function _(e){return t.call(e)==="[object Function]"}function D(e){return t.call(e)==="[object Array]"}function P(e){return"setInterval"in e}function H(e){function t(){}return t.prototype=e,new t}var e=this,t=Object.prototype.toString,n=/(.*)!(.+)/,r=/\Wrequire\((['"]).+?\1\)/g,i=/\.(js|json)$/,s=/^\.+?\/.+/,o=/(^|\/)\.\//g,u=/^([\w\-]+)\//,a={require:1,exports:1,module:1,host:1,finish:1},f={mods:{}},l={},c={},h={},p={},d,v,m={},g=Array.prototype.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)},B={VERSION:"2.5.1",define:y,require:b,config:N,seek:x,fetch:E,realname:L,basename:A,filesuffix:k,namesuffix:C,_getScript:M,_clone:H,_forEach:g,_isFunction:_,_isWindow:P};b.config=N,y.amd={jQuery:!0};if(!e.window){exports.oz=B,exports._config=f;for(var j in B)exports[j]=B[j];var F=function(e){return function(){return exports[e].apply(this,arguments)}};w=F("exec"),E=F("fetch"),b=F("require"),b.config=N}else e.oz=B,e.define=y,e.require=b})(),require.config({enable_ozma:!0}),define("mo/domready",["finish"],function(e){var t,n=this,r=n.document,i="addEventListener",s="attachEvent",o="DOMContentLoaded",u="onreadystatechange";if(r.readyState==="complete")setTimeout(e,1);else if(r[i])t=function(){r.removeEventListener("READY",t,!1),e()},r[i](o,t,!1),n[i]("load",e,!1);else if(r[s]){t=function(){r.readyState==="complete"&&(r.detachEvent(u,t),e())},r[s](u,t),n[s]("load",e);var a=!1;try{a=n.frameElement==null}catch(f){}if(r.documentElement.doScroll&&a){var l=function(){try{r.documentElement.doScroll("left")}catch(t){setTimeout(l,1);return}e()};l()}}}),define("mo/lang",[],function(e,t){function d(e){return e==null?i(e):p[a.call(e)]||"object"}function v(e){var t=arguments,n=t.length,i={number:1,"boolean":2,string:3},s,o,u,a;typeof t[n-1]!="object"?(o=t[n-1]||0,n--):o=0;for(var f=1;f<n;f++){s=t[f];if(r.isArray(s)){e=!i[typeof e]&&e||[],a=s.length;for(u=0;u<a;u++)o>=1&&s[u]&&typeof s[u]=="object"?e[u]=v(e[u],s[u],o-1):e[u]=s[u]}else{e=!i[typeof e]&&e||{};for(u in s)o>=1&&s[u]&&typeof s[u]=="object"?e[u]=v(e[u],s[u],o-1):e[u]=s[u]}}return e}function m(e){var t=arguments,n=t.length,i={object:1,array:2},s,o,u,a,f,l,c;typeof t[n-1]!="object"?(o=t[n-1]||0,n--):o=0;for(var h=1;h<n;h++){s=t[h];if(r.isArray(e))e=e||[],f={},l=[],c="__oz_uniqmark_"+(+(new Date)+Math.random()),s=s.concat(e),e.length=0,s.forEach(function(t){t&&typeof t=="object"?t[c]||(o>=1&&r.isArray(t)?e.push(m(t,[],o-1)):e.push(t),t[c]=1,l.push(t)):(a=typeof t+"_"+t,this[a]||(e.push(t),this[a]=1))},f),l.forEach(function(e){delete e[c]});else{e=e||{};for(u in s)e.hasOwnProperty(u)?o>=1&&u&&i[d(e[u])]+0===i[d(s[u])]+0&&(e[u]=m(e[u],s[u],o-1)):e[u]=s[u]}}return e}function g(e){var t=arguments,n=t.length,i={object:1,array:2},s,o,u,a,f,l,c;typeof t[n-1]!="object"?(o=t[n-1]||0,n--):o=0;for(var h=1;h<n;h++){s=t[h];if(r.isArray(e))e=e||[],f={},l=[],c="__oz_uniqmark_"+(+(new Date)+Math.random()),e.forEach(function(e){e&&typeof e=="object"&&!e[c]?(e[c]=1,l.push(e)):(a=typeof e+"_"+e,this[a]=1)},f),e.length=0,s.forEach(function(t){t&&typeof t=="object"?t[c]===1&&(e.push(t),t[c]=2):(a=typeof t+"_"+t,this[a]===1&&(e.push(t),this[a]=2))},f),l.forEach(function(e){delete e[c]});else{e=e||{};for(u in e)s.hasOwnProperty(u)?o>=1&&u&&i[d(e[u])]+0===i[d(s[u])]+0&&(e[u]=g(e[u],s[u],o-1)):delete e[u]}}return e}var n=this,r=n.Array,i=n.String,s=n.Object,o=n.Function,u=n.window,a=s.prototype.toString,f=r.prototype;f.filter||(f.filter=function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&e.call(t,this[r],r,this)&&n.push(this[r]);return n}),f.forEach||(f.forEach=function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)}),f.map||(f.map=function(e,t){for(var n=0,r=[],i=this.length;n<i;n++)n in this&&(r[n]=e.call(t,this[n],n,this));return r}),f.reduce||(f.reduce=function(e,t){for(var n=1,r=this[0],i=this.length;n<i;n++)n in this&&(r=e.call(t,r,this[n],n,this));return r}),f.some||(f.some=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1}),f.every||(f.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0}),f.indexOf||(f.indexOf=function(e,t){var n=this.length;t=parseInt(t,10)||0,t<0&&(t+=n);for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1}),f.lastIndexOf||(f.lastIndexOf=function(e,t){var n=this.length;t=parseInt(t,10)||n-1,t<0&&(t+=n);for(;t>-1;t--)if(t in this&&this[t]===e)return t;return-1}),r.isArray||(r.isArray=function(e){return t.type(e)==="array"});var l=/\S/,c=/^\s+/,h=/\s+$/;l.test(" ")&&(c=/^[\s\xA0]+/,h=/[\s\xA0]+$/),i.prototype.trim||(i.prototype.trim=function(e){return e==null?"":e.toString().replace(c,"").replace(h,"")}),s.keys||(s.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),s.create||(s.create=function(e){function t(){}return t.prototype=e,new t}),s.getPrototypeOf||(s.getPrototypeOf=function(e){return e.__proto__||e.constructor.prototype}),o.prototype.bind||(o.prototype.bind=function(e){var t=r.prototype.slice.call(arguments,1),n=this,i=function(){return n.apply(this instanceof i?this:e||u,t.concat(r.prototype.slice.call(arguments)))};return i.prototype=s.create(this.prototype),i});var p={};f.forEach.call("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){this["[object "+e+"]"]=e.toLowerCase()},p),t.type=d,t.isFunction=function(e){return a.call(e)==="[object Function]"},t.isWindow=function(e){return"setInterval"in e},t.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.mix=v,t.merge=m,t.interset=g,t.copy=function(e,t){return v(null,e,t)},t.occupy=function(e,t,n){return v(g(e,t,n),t,n)},t.defaults=m,t.config=function(e,t,n,r){return v(m(e,n,r),g(v(null,t,r),n,r),r)},t.unique=function(e,t){return m(e,[],t)},t.ns=function(e,t,n){var r,i=n||u,s=e.split(".").reverse();while((r=s.pop())&&s.length>0){if(typeof i[r]=="undefined")i[r]={};else if(typeof i[r]!="object")return!1;i=i[r]}return typeof t!="undefined"&&(i[r]=t),i[r]},t.FnQueue=t.fnQueue=function(){function n(e){return function(){var n,r;t=this.slice().reverse();while(r=t.pop())n=r[e].apply(r,arguments);return t=!1,n}}var e=[],t=!1;return v(e,{call:n("call"),apply:n("apply"),clear:function(e){if(!e)this.length=0;else{var n=this.length,r=n-t.length;for(var i=this.length-1;i>=0;i--)this[i]===e&&(this.splice(i,1),t&&i>=r&&t.splice(n-i-1,1));if(i<0)return!1}return!0}}),e}}),define("../cardkit/pagesession",["mo/lang"],function(e){var t=this,n={init:function(){this.name="ck_ss",sessionStorage[this.name]?this.list=JSON.parse(sessionStorage[this.name]):this.reset()},reset:function(){this.list=[],this.save()},save:function(){sessionStorage[this.name]=JSON.stringify(this.list)},indexOf:function(e){var t=this.list.map(function(e){return e[0]}).indexOf(e);return t===-1||this.list[t][1]<history.length?t:-1},push:function(e){this.list.push([e,history.length]),this.save()},clear:function(e){e!==-1&&(this.list=this.list.slice(0,e+2),this.save())}};return n}),define("eventmaster",["mo/lang"],function(e){function i(e){var i=this;e&&(this.subject=e.subject,this.trace=e.trace,this.traceStack=e.traceStack||[]),this.doneHandlers=t(),this.failHandlers=t(),this.observeHandlers=t(),this._alterQueue=t(),this._lastDoneQueue=[],this._lastFailQueue=[],this.status=0,this._argsCache=[],this.pipe={},r.forEach(function(e){this[e]=function(){return i[e].call(i,n.call(arguments))}},this.pipe)}function o(){var e=[],t=[],n=new i;return n._when=[],n._count=n._total=arguments.length,Array.prototype.forEach.call(arguments,function(n,r){function s(n){t[r]||(t[r]=!0,e[r]=n,--i._count===0&&(t.length=0,i._count=i._total,i.resolve.call(i,e)))}var i=this;i._when.push(n.bind(s))},n),n}function u(e,t){return e&&e.then?e.then(t.pipe.resolve,t.pipe.reject).progress(t.pipe.notify):e!==undefined&&t.resolve([e]),e}function a(e){return function(t){var r=this.lib[t];return r||(r=this.lib[t]=new i({subject:t,trace:this.trace,traceStack:this.traceStack})),r[e].apply(r,n.call(arguments,1)),this}}function f(e){e&&(this.trace=e.trace,this.traceStack=e.traceStack),this.lib={}}function c(e){return new f(e)}var t=e.fnQueue,n=Array.prototype.slice,r=["notify","fire","error","resolve","reject","reset","disable","enable"],s=i.prototype={then:function(e,t){var n=this.status;return t?n===2?this._resultCache=t.apply(this,this._argsCache):n||(this.failHandlers.push(t),this._lastFailQueue=this.failHandlers):this._lastFailQueue=[],e?n===1?this._resultCache=e.apply(this,this._argsCache):n||(this.doneHandlers.push(e),this._lastDoneQueue=this.doneHandlers):this._lastDoneQueue=[],this},done:function(e){return this.then(e)},fail:function(e){return this.then(!1,e)},cancel:function(e,t){return e&&this.doneHandlers.clear(e),t&&this.failHandlers.clear(t),this},bind:function(e){return this.status&&e.apply(this,this._argsCache),this.observeHandlers.push(e),this},unbind:function(e){return this.observeHandlers.clear(e),this},progress:function(e){var t=this;return this.observeHandlers.push(function(){t.status||e.apply(this,arguments)}),this},notify:function(e){return this._disalbed?this:(this.status=0,this.observeHandlers.apply(this,e||[]),this)},fire:function(e){if(this._disalbed)return this;this.trace&&this._trace(),e=e||[];var t=this.doneHandlers;return this.doneHandlers=this._alterQueue,this.failHandlers.length=0,this.observeHandlers.apply(this,e),t.apply(this,e),t.length=0,this._alterQueue=t,this},error:function(e){if(this._disalbed)return this;this.trace&&this._trace(),e=e||[];var t=this.failHandlers;return this.failHandlers=this._alterQueue,this.doneHandlers.length=0,this.observeHandlers.apply(this,e),t.apply(this,e),t.length=0,this._alterQueue=t,this},resolve:function(e){return this.status=1,this._argsCache=e||[],this.fire(e)},reject:function(e){return this.status=2,this._argsCache=e||[],this.error(e)},reset:function(){return this.status=0,this._argsCache=[],this.doneHandlers.length=0,this.failHandlers.length=0,this},disable:function(){this._disalbed=!0},enable:function(){this._disalbed=!1},merge:function(t){e.merge(this.doneHandlers,t.doneHandlers),e.merge(this.failHandlers,t.failHandlers),e.merge(this.observeHandlers,t.observeHandlers);var n=t.subject;e.mix(t,this),t.subject=n},_trace:function(){this.traceStack.unshift(this.subject),this.traceStack.length>this.trace&&this.traceStack.pop()},follow:function(){var e=new i;e._prevActor=this;if(this.status)u(this._resultCache,e);else{var t=this._lastDoneQueue.pop();t&&this._lastDoneQueue.push(function(){return u(t.apply(this,arguments),e)});var n=this._lastFailQueue.pop();n&&this._lastFailQueue.push(function(){return u(n.apply(this,arguments),e)})}return e},end:function(){return this._prevActor},all:function(){var e=o.apply(this,this._when);return e},any:function(){var e=o.apply(this,this._when);return e._count=e._total=1,e},some:function(e){var t=o.apply(this,this._when);return t._count=t._total=e,t}},l=f.prototype=function(e){for(var t in s)e[t]=a(t);return e}({});return l.wait=l.then,l.on=l.bind,l.off=l.unbind,l.promise=function(e){var t=this.lib[e];return t||(t=this.lib[e]=new i({subject:e,trace:this.trace,traceStack:this.traceStack})),t},l.when=function(){var e=[];for(var t=0,n=arguments.length;t<n;t++)e.push(this.promise(arguments[t]));return o.apply(this,e)},c.Promise=i,c.Event=f,c.when=o,c.pipe=u,c.VERSION="2.0.0",c}),define("../cardkit/bus",["eventmaster"],function(e){return e()}),define("choreo",["mo/lang","mo/mainloop","eventmaster"],function(e,t,n){function A(e,t,n,r){for(var i in e){n=t?"-"+t+"-"+i:i;if(Y(n)in p.style){e[i]=n,o=s[t],r=!0;continue}}return r}function B(e){e||(e="_oz_choreo_"+E++);if(T[e])return T[e];var r=this;T[e]=this,this.name=e,this._promise=new n.Promise,this._reset_promise=new n.Promise,this._count=0,this._optCache=[],y?this._runningActors=[]:t.addStage(e),this._reset_promise.bind(function(){r._promise.reset()})}function j(e,t){Array.isArray(e)&&(this.members=e,e={_promise:n.when.apply(n,this.members.map(function(e){return e.follow()}))},e._promise.bind(e._promise.pipe.disable)),this._opt=e,this.stage=t}function F(e,t){if(y){var n=e._runningActors;e.isPlaying()&&(n.forEach(function(n){t&&t(e.name,n)}),n.state=0,n.length=0)}else t&&t(e.name)}function I(e){var t=e.target,n=parseFloat(e._current_from||e.from),r=parseFloat(e.to),i=r-n,s=e._startTime?+(new Date)-e._startTime:0;s<0&&(s=0);var o=s/(e.duration||1),u=X(t),a=N[u];a&&a[e.prop]===e?(clearTimeout((a[e.prop]||{})._runtimer),delete a[e.prop]):o=0;if(!o)return;var f=Q(u);t.style[H]=f;if(o<1){L[e.easing]&&(o=L[e.easing](o,s,0,1,e.duration));var l=G(e.from,e.to);n=n+i*o+l}else n=e.to;J(t,e.prop,n)}function q(e){var t=e.target,n=X(t),r=N[n];r&&delete r[e.prop];var i=Q(n);t.style[H]=i,J(t,e.prop,e.to)}function R(e){var t=e.target,n=e.prop,r=X(t),i=N[r],s=e.from||$(t,n);if(s==e.to){var o=!0;i&&delete i[n];if(u[n])for(var a in i)if(u[a]){o=!1;break}o&&e._promise.resolve([{target:e.target,succ:!0}]).disable();return}e._current_from=s,e._startTime=+(new Date)+(e.delay||0),i[n]=e,J(t,n,s);var f=Q(r);e._runtimer=setTimeout(function(){delete e._runtimer,t.style[H]=f,J(t,n,e.to)},0)}function U(e,n){var r=n.target,i=parseFloat(n.to),s=n.from||$(n.target,n.prop),o=G(s,n.to);o&&s.toString().indexOf(o)<0&&(s=0),n._current_from=s;var u=parseFloat(s),a=n.delay&&"_oz_anim_"+S++;t.addTween(e,u,i,n.duration,{easing:n.easing,delay:n.delay,step:function(e){J(r,n.prop,e+o)},renderId:a,callback:function(){n._promise.resolve([{target:r,succ:!0}]).disable()}}),n._render=t.getRender(a)}function z(e,t){var n=W(e);return Object.keys(n).map(function(e){return t({prop:e,to:this[e]})},n)}function W(e){var t={};return e.split(c).forEach(function(e){var t=e.match(/([^\(\)]+)/g),n=t[1].split(/\,\s*/),r=u[t[0]],i=r===3,s=r<0||n.length<=1,o=s?[""]:["X","Y","Z"];if(!r)return;n.forEach(function(e,n){if(e&&n<=o.length&&i||s&&n<1||!s&&n<2){var r=t[0].replace("3d","")+o[n];this[r]=e}},this)},t),t}function X(e){var t=e._oz_fx;return t||(t=++w,e._oz_fx=t,e.removeEventListener(o,V),e.addEventListener(o,V)),N[t]||(N[t]={}),t}function V(e){var t=this,n=this._oz_fx,r=N[n];if(r)if(e.propertyName===_){for(var i in u)delete r[i];var s=C[n]||[];this.style[H]=Q(n),s.forEach(function(e){e.resolve([{target:t,succ:!0}]).disable()})}else{var o=r[e.propertyName];o&&(delete r[o.prop],this.style[H]=Q(n),o._promise&&o._promise.resolve([{target:this,succ:!0}]).disable())}}function $(e,t){if(u[t])return K(e,t)||0;if(t===_)return e&&e.style[P||t]||a;var n=Y(t),r=e&&(e.style[n]||(m?m(e,"").getPropertyValue(t):e.currentStyle[t]));return r&&/\d/.test(r)&&r||0}function J(e,t,n){u[t]?_&&K(e,t,n):e.style[Y(t)]=n}function K(t,n,r){var i=W($(t,_));if(!r)return i[n]||n==="rotate"&&"0deg";var s=W(n+"("+r+")");e.mix(i,s),t.style[P]=Object.keys(i).map(function(e){return e+"("+this[e]+")"},i).join(" ")}function Q(e){var t=N[e];if(t){var n=[],r;for(var i in t)r=t[i],r&&r.prop&&n.push([u[r.prop]&&_||r.prop,(r.duration||0)+"ms",k[r.easing]||"linear",(r.delay||0)+"ms"].join(" "));return n.join(",")}return""}function G(e,t){var n=(e||"").toString().replace(h,""),r=(t||"").toString().replace(h,"");return parseFloat(e)===0&&r||parseFloat(t)===0&&n||r||n}function Y(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function Z(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}function et(e){var t;if(y){t=new n.Promise;var r=X(e);C[r]||(C[r]=[]),C[r].push(t)}return t}function tt(t){if(t.members){var n=t.members[0]._opt;if(!u[n.prop])return t.members.map(function(e){return tt(e)});var r=t._opt=e.copy(n);r.prop=_,r.to=t.members.map(function(e){return e._opt.prop+"("+e._opt.to+")"}).join(" "),delete r._parent}return t._opt}function nt(e,t,n){var r=e._opt,i=e.stage;i&&!i.isCompleted()&&i.cancel();if(e.members){if(typeof t=="string"&&u[e.members[0]._opt.prop]){var s={};z(t,function(e){s[e.prop]=e.to}),t=s}e.members.forEach(function(e){var t=e._opt;t.to=n(t,this[t.prop])},t)}else r.to=n(e._opt,t);return e}function rt(e){return new B(e)}var r=this,i=["","Moz","webkit","ms","O"],s={"":"transitionend",Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},o,u={rotate:-2,rotateX:-1,rotateY:-1,rotateZ:-1,scale:2,scale3d:3,scaleX:-1,scaleY:-1,scaleZ:-1,skew:2,skewX:-1,skewY:-1,translate:2,translate3d:3,translateX:-1,translateY:-1,translateZ:-1},a="rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateX(0px) translateY(0px) translateZ(0px) scaleX(1) scaleY(1) scaleZ(1) skewX(0deg) skewY(0deg)",f=["target","prop","duration","easing","delay","to"],l=/(\w+)\(([^\)]+)/,c=/\)\s+/,h=/^[-\d\.]+/,p=r.document.body,d=Array.prototype.push,v=Array.prototype.slice,m=(document.defaultView||{}).getComputedStyle,g={transform:"",transition:""},y=!1,b=0,w=0,E=0,S=0,x=[],T={},N={},C={},k={linear:"linear",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out"},L={linear:function(e,t,n,r){return n+r*e},easeIn:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOut:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOut:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n}};for(var O=0,M=i.length;O<M;O++)if(A(g,i[O]))break;A(g,"");var _=g.transform,D=g.transition,P=Y(_),H=Y(D);return P&&H&&(y=!0),B.prototype={isPlaying:function(){return y?!!this._runningActors.state:t.isRunning(this.name)},isCompleted:function(){return this._count<=0},play:function(){return this.isCompleted()&&(clearTimeout(this._end_timer),this._reset_promise.fire(),this._optCache.forEach(function(e){this.actor(e)},this)),y?this.isPlaying()||(this._runningActors.state=1,this._runningActors.forEach(R)):t.run(this.name),this},pause:function(){return y?(this._runningActors.state=0,this._runningActors.forEach(I)):t.pause(this.name),this},clear:function(){return this.cancel(),this._optCache.forEach(function(e){e._cached=!1}),this._optCache.length=0,this},cancel:function(){return F(this,function(e,n){y?I(n):t.remove(e)}),this._optCache.forEach(function(e){e._promise.reject([{target:e.target,succ:!1}]).disable()}),this},complete:function(){return F(this,function(e,n){y?(q(n),n._promise.resolve([{target:n.target,succ:!0}]).disable()):t.complete(e)}),this},actor:function(t,r){function h(e){(e||o.follow()).reset().enable()}function p(e){return e.follow().bind(d),e._opt._watcher=d,delete e._opt._parent,e}function d(e){if(--i._count>0)return;i._end_timer=setTimeout(function(){F(i),i._promise[e.succ?"resolve":"reject"]([{succ:e.succ}])},0)}var i=this,s=this.name,o,u;clearTimeout(this._end_timer);if(r){if(t.nodeType){var a={},l;f.forEach(function(e,t){e==="prop"?l=this[t]:e!=="to"&&(a[e]=this[t])},arguments),u=Object.keys(l).map(function(t){return i.actor(e.mix({_parent:!0,prop:t,to:l[t]},this))},a);if(u.length===1)return u[0]}else u=v.call(arguments),u=u.map(function(e){return e._parent=!0,i.actor(e)});return this._reset_promise.bind(h),o=new j(u,i)}t.prop=g[t.prop]||t.prop,t._promise&&h(t._promise);if(t.prop===_){var c=et(t.target);return u=z(t.to,function(n){return e.merge(n,t),n._parent=!0,n._promise=c,i.actor(n)}),this._reset_promise.bind(h),o=new j(u,i)}return i._count++,t._promise||(t._promise=new n.Promise),y?(this._runningActors.push(t),this.isPlaying()&&R(t)):U(s,t),o=new j(t,i),t._cached||(t._cached=!0,this._optCache.push(t),p(o)),o},group:function(e){var t=this,n,r=v.call(arguments).filter(function(e){return e.stage===t});return this._reset_promise.bind(function(){n.follow().reset().enable()}),n=new j(r,t)},follow:function(){return this._promise}},j.prototype={enter:function(t){this.stage&&this.exit();var n=t.actor.apply(t,[].concat(tt(this)));return n.follow().merge(this.follow()),e.mix(this,n)},exit:function(){var n=this.stage,r=this._opt;if(!n)return this;this.members?this.members=this.members.map(function(e){return e.exit()}):(y?(Z(n._runningActors,r),n.isPlaying()&&I(r)):t.remove(n.name,r._render),Z(n._optCache,r),r._promise.reject([{target:r.target,succ:!1}]).disable());var i=this.fork();return r._parent||i.follow().merge(r._promise),e.occupy(r,i._opt),delete this.stage,this},fork:function(){if(this.members)return new j(this.members.map(function(e){return e.fork()}));var e={};return f.forEach(function(t){e[t]=this[t]},this._opt),e._promise=new n.Promise,new j(e)},setto:function(e){return nt(this,e,function(e,t){return t||t===0?t:e.to})},extendto:function(e){return nt(this,e,function(e,t){if(!t)return e.to;var n=G(e.to,t);return parseFloat(e.to)+parseFloat(t)+n})},reverse:function(){return nt(this,{},function(e){return e.from!==undefined?e.from:e._current_from})},follow:function(){return this._opt._promise}},e.mix(rt,{VERSION:"1.0.1",renderMode:y?"css":"js",Stage:B,Actor:j,config:function(n){n.easing&&(e.mix(k,n.easing.values),e.mix(L,n.easing.functions),t.config({easing:L})),/(js|css)/.test(n.renderMode)&&(y=n.renderMode==="css",this.renderMode=n.renderMode)},transform:K}),rt}),define("dollar",["mo/lang"],function(e){function g(e,n){if(e){if(e.constructor===g)return e;if(typeof e!="string"){var r=new g;return h[e.length!==undefined&&e!==t?"apply":"call"](r,e),r}return l.test(e)?D(e):n?g(n).find(e):y.find(e)}}function b(e){return e}function w(e,t){return e&&e[o](t)}function E(e,t){return function(n){return t&&(n=n[t]),w(n,e)&&this.push(n),n}}function S(t){return function(r){return g(e.unique([undefined,n,null].concat(this._map(r?function(e){var n=e[t];if(n&&w(n,r))return n}:function(e){return e[t]}))).slice(3))}}function x(t,n,r){return function(i,s){r||(s=i);var o=new g;return this.forEach(function(e){var o,u=n?e.parentNode[n]:e;r&&(o=g(i,e.parentNode));do{if(o&&o.indexOf(u)>-1)break;e!==u&&(!s||w(u,s))&&this.push(u)}while(u=u[t])},o),e.unique(o)}}function T(t,n,r,i,s){var o=e.isFunction(n);return t.forEach(function(e,t){i.call(s,e,o?n.call(this,t,r&&e[r]):n)},t),t}function N(t,n,r){return function(i,s){if(typeof i=="object")if(r)r(this,i);else for(var o in i)this.forEach(function(e){t(e,this,i[this])},o);else{if(s===undefined)return n(this[0],i);var u=e.isFunction(s);this.forEach(function(e,r){t(e,i,u?s.call(this,r,n(e,i)):s)},this)}return this}}function C(e){return function(t,n){var r=[];if(typeof t!="string")for(var i in t)r.push([e,i,t[i]]);else{if(!n)return this;r.push([e,t,n])}return this.forEach(function(e){this.forEach(function(e){this[e[0]+"EventListener"](e[1],e[2],!1)},e)},r),this}}function k(t,n){var r=!0,i=document.createEvent(a[t]||"Events");return n&&("bubbles"in n&&(r=!!n.bubbles,delete n.bubbles),e.mix(i,n)),i.initEvent(t,r,!0),i}function L(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})}function A(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function O(e,t){return typeof t=="number"&&!f[e]&&t+"px"||t}function M(e){var t=v[e];if(!t){var r=document.createElement(e);n.body.appendChild(r),t=p(r,"").getPropertyValue("display"),r.parentNode.removeChild(r),t==="none"&&(t="block"),v[e]=t}return t}function _(e){return function(){var r;return this[0]===t?t["inner"+e]:this[0]===n?n.documentElement["offset"+e]:(this.offset()||{})[e.toLowerCase()]}}function D(e,t){var n=(l.exec(e)||[])[0]||e,r=m[n];r||(r=m[n]=n==="tr"&&document.createElement("tbody")||(n==="tbody"||n==="thead"||n==="tfoot")&&document.createElement("table")||(n==="td"||n==="th")&&document.createElement("tr")||document.createElement("div")),r.innerHTML=e;var i=new g;h.apply(i,r.childNodes),i.forEach(function(e){this.removeChild(e)},r);if(t)for(var s in t)i.attr(s,t[s]);return i}function P(e,n,r){n.nodeName.toUpperCase()==="SCRIPT"&&(!n.type||n.type==="text/javascript")&&t.eval.call(t,n.innerHTML);switch(r){case 1:e.appendChild(n);break;case 2:e.parentNode.insertBefore(n,e);break;case 3:e.insertBefore(n,e.firstChild);break;case 4:e.parentNode.insertBefore(n,e.nextSibling);break;default:}}function H(e,t){var n=t?function(t){P(t,this,e)}:function(t){P(this,t,e)};return function(e){return this.forEach(function(e){this.forEach(n,e)},g(e)),this}}function B(e){return H(e,!0)}function j(e){return H(e)}var t=this,n=t.document,r="nextElementSibling",i="prevElementSibling",s="firstElementChild",o=["webkitMatchesSelector","mozMatchesSelector","matchesSelector"].map(function(e){return this[e]&&e},n.body).filter(b)[0],u="MouseEvents",a={click:u,mousedown:u,mouseup:u,mousemove:u},f={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,c=Array.prototype.forEach,h=Array.prototype.push,p=document.defaultView.getComputedStyle,d,v={},m={},y=g.fn=g.prototype=Object.create(Array.prototype);return["map","filter","slice","splice","concat"].forEach(function(e){var t=this["_"+e]=this[e];this[e]=function(){return g(t.apply(this,arguments))}},y),e.mix(y,{constructor:g,find:function(e){var t=new g,r;this===y?r=[n]:t.prevObject=r=this;if(/^#/.test(e)){var i=n.getElementById(e.substr(1));i&&t.push(i)}else{var s=/\W/.test(e)?"querySelectorAll":"getElementsByTagName";r[1]?r.forEach(function(t){this.push.apply(this,t[s](e))},t):r[0]&&t.push.apply(t,r[0][s](e))}return t},eq:function(e){return e===-1?this.slice(-1):this.slice(e,e+1)},not:function(e){return this.filter(function(t){return t&&!this(t,e)},w)},has:function(e){return this.filter(function(t){return this(t,e)},w)},parent:S("parentNode"),parents:function(e){var t=new g,n=this,r=e?E(e,"parentNode"):function(e){return this[this.push(e.parentNode)-1]};while(n.length)n=n.map(r,t);return t},closest:function(e){var t=new g,n=this,r=E(e,"parentNode");while(n.length&&!t.length)n=n.map(r,t);return t.length&&t||this},siblings:x(r,s),next:S(r),nextAll:x(r),nextUntil:x(r,!1,!0),prev:S(i),prevAll:x(i),prevUntil:x(i,!1,!0),children:function(){return e.merge.apply(e,this.map(function(e){return this(e.children)},g))},contents:function(){return e.merge.apply(e,this.map(function(e){return this(e.childNodes)},g))},is:function(e){return this.some(function(t){return w(t,e)})},hasClass:function(e){for(var t=0,n=this.length;t<n;t++)if(this[t].classList.contains(e))return!0;return!1},addClass:function(e){return T(this,e,"className",function(e,t){e.classList.add(t)})},removeClass:function(e){return T(this,e,"className",function(e,t){e.classList.remove(t)})},toggleClass:function(e,t){return T(this,e,"className",function(e,t){e.classList[typeof this=="undefined"&&"toggle"||this&&"add"||"remove"](t)},t)},attr:N(function(e,t,n){e.setAttribute(t,n)},function(e,t){return e&&e.getAttribute(t)}),removeAttr:function(e){return this.forEach(function(e){e.removeAttribute(this)},e),this},prop:N(function(e,t,n){e[t]=n},function(e,t){return(e||{})[t]}),removeProp:function(e){return this.forEach(function(e){delete e[this]},e),this},data:N(function(e,t,n){e.dataset[L(t)]=n},function(e,t){return(e||{}).dataset[L(t)]}),removeData:function(e){return this.forEach(function(e){delete e.dataset[this]},e),this},val:function(e){var t=this[0];if(e!==undefined)return T(this,e,"value",function(e,t){e.value=t});if(t)return t.multiple?g("option",this).filter(function(e){return e.selected}).map(function(e){return e.value}):t.value},empty:function(){return this.forEach(function(e){e.innerHTML=""}),this},html:function(e){return e===undefined?(this[0]||{}).innerHTML:T(this,e,"innerHTML",function(e,t){l.test(t)?this(e).empty().append(t):e.innerHTML=t},g)},text:function(e){return e===undefined?(this[0]||{}).textContent:T(this,e,"textContent",function(e,t){e.textContent=t})},css:N(function(e,t,n){var r=A(t);!n&&n!==0?e.style.removeProperty(r):e.style.cssText+=";"+r+":"+O(r,n)},function(e,t){return e&&(e.style[L(t)]||p(e,"").getPropertyValue(t))},function(e,t){var n,r,i="";for(var s in t)r=t[s],n=A(s),!r&&r!==0?e.forEach(function(e){e.style.removeProperty(this)},n):i+=n+":"+O(n,r)+";";e.forEach(function(e){e.style.cssText+=";"+this},i)}),hide:function(){return this.css("display","none")},show:function(){return this.forEach(function(e){e.style.display==="none"&&(e.style.display=null),this(e,"").getPropertyValue("display")==="none"&&(e.style.display=M(e.nodeName))},p),this},offset:function(){var e=this[0].getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},width:_("Width"),height:_("Height"),appendTo:B(1),append:j(1),prependTo:B(3),prepend:j(3),insertBefore:B(2),before:j(2),insertAfter:B(4),after:j(4),replaceAll:function(e){var t=g(e);return this.insertBefore(t),t.remove(),this},replaceWith:function(e){return g(e).replaceAll(this)},wrap:function(e){return T(this,e,!1,function(e,t){this(t).insertBefore(e).append(e)},g)},wrapAll:function(e){return g(e).insertBefore(this.eq(0)).append(this),this},wrapInner:function(e){return T(this,e,!1,function(e,t){this(e).contents().wrapAll(t)},g)},unwrap:function(){return this.parent().forEach(function(e){this(e).children().replaceAll(e)},g),this},remove:function(){return this.forEach(function(e){e.parentNode.removeChild(e)}),this},bind:C("add"),unbind:C("remove"),trigger:function(t,n){return typeof t=="string"&&(t=k(t)),e.mix(t,n),this.forEach(t.type=="submit"&&!t.defaultPrevented?function(e){e.submit()}:function(e){"dispatchEvent"in e&&e.dispatchEvent(this)},t),this},end:function(){return this.prevObject||new g},each:function(e){for(var t=0,n=this.length;t<n;t++){var r=e.call(this[t],t);if(r===!1)break}return this}}),g.find=g,g.matchesSelector=w,g.createNodes=D,g.camelize=L,g.dasherize=A,g.Event=k,g.VERSION="1.0.2",g}),define("soviet",["mo/lang","dollar"],function(e,t){function i(n,i){e.config(this,i||{},r),this.target=t(n),this.events={},this.locks={},this.traceStack||(this.traceStack=[])}function s(e){var t=this.trigger(e);if(t!=="NOMATCH")return this.preventDefault&&t===undefined&&e.preventDefault(),t}function o(e,t,n){return e?(this.trace&&(this.traceStack.unshift("<"+t.nodeName+"#"+(t.id||"")+">."+(t.className||"").split(/\s+/).join(".")),this.traceStack.length>this.trace&&this.traceStack.pop()),e.call(t,n)):"NOMATCH"}function u(t,n,r,i){var s=t[n];i?t[n]=r:r&&(s||(s=t[n]=e.FnQueue()),s.push(r))}function a(e,t,n,r){var i=e[t];!n||r?delete e[t]:i&&i.clear(n)}function f(e,t){return e[t]}function l(e){return this.locks[e]=this.matchesSelector?{}:{".":{},"#":{},"&":{}}}function c(e,t,n,r,i){i===undefined&&(i=this.autoOverride);if(!this.matchesSelector){var s=(/^[\.#]/.exec(t)||["&"])[0];t=t.substr(s!=="&"?1:0),e=e[s],"."===s&&(t=t.split(".").join(" "))}return r(e,t,n,i)}var n=t.find.matchesSelector,r={preventDefault:!1,matchesSelector:!1,autoOverride:!1,trace:!1,traceStack:null};i.prototype={on:function(e,t,n){if(typeof t!="string")for(var r in t)this.on(e,r,t[r]);else{var i=this.events[e];i||(this.target.bind(e,s.bind(this)),this.reset(e),i=this.events[e]),c.call(this,i,t,n,u)}return this},off:function(e,t,n){var r=this.events[e];return r&&t?c.call(this,r,t,n,a):this.reset(e),this},matches:function(e,t){var n=this.events[e];return c.call(this,n,t,null,f)},reset:function(e){return e?(this.events[e]=this.matchesSelector?{}:{".":{},"#":{},"&":{}},l.call(this,e)):(this.events={},this.locks={}),this},disable:function(e,t){var n=this.locks;if(e){var r=n[e];r||(r=l.call(this,e)),t?c.call(this,r,t,!0,u,!0):r._disable=!0}else this._global_lock=!0;return this},enable:function(e,t){var n=this.locks;if(e){var r=n[e];r&&(t?c.call(this,r,t,null,a,!0):delete r._disable)}else delete this._global_lock;return this},trigger:function(e){var t=this,r=o(),i=e.target,s=this.locks[e.type]||{},u=this.events[e.type];if(!u||this._global_lock||s._disable)return r;if(this.matchesSelector)Object.keys(u).forEach(function(i){!s[i]&&n(this,i)&&(r=o.call(t,u[i],this,e))},i);else{var a,f,l=(a="#")&&(f=i.id)&&u[a][f]||(a=".")&&(f=i.className)&&u[a][f]||(a="&")&&(f=i.nodeName.toLowerCase())&&u[a][f]||null;if(l){var c=s[a][f];c||(r=o.call(this,l,i,e))}}return r}};var h=function(e,t){return new h.Soviet(e,t)};return h.Soviet=i,h}),define("mo/template",["mo/lang"],function(e,t,n){function i(e){e=e||"";var t={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return e.replace(/[<>'"\{\}@]/g,function(e){return t[e]})}function s(e,t,n){if(!e||typeof e!="string")return"";var r=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/([^\x00-\xff])\s/g,"$1");return n?n.call(r,r):e.length>r.length?r+"...":r}function o(e,t,i){var s,u=n.tplSettings,a=i?"#"+i:"";if(!/[\t\r\n% ]/.test(e)){s=u._cache[e+a];if(!s){var f=r.getElementById(e);f&&(s=u._cache[e+a]=o(f.innerHTML,!1,i))}}else s=new Function(i||"obj","api","var __p=[];"+(i?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(i||"obj")+");"+"__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(u.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(u.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(i?"":"}")+"return __p.join('');");return s?t?s(t,n.tplHelpers):s:""}var r=this.document;n.escapeHTML=i,n.substr=s,n.strsize=function(e){return e.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length},n.str2html=function(e){var t=r.createElement("div");t.innerHTML=e;var n=t.firstChild;if(t.childNodes.length==1)return n;var i=r.createDocumentFragment();do i.appendChild(n);while(n=t.firstChild);return i},n.format=function(e,t){return e.replace(/\{\{(\w+)\}\}/g,function(e,n){return t[n]!=null?t[n]:""})},n.tplSettings={_cache:{},evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g},n.tplHelpers={mix:e.mix,escapeHTML:i,substr:s,include:o,_has:function(t){return function(n){return e.ns(n,undefined,t)}}},n.convertTpl=o,n.reloadTpl=function(e){delete n.tplSettings._cache[e]}}),define("../cardkit/view",["dollar","mo/lang","mo/template","soviet","choreo","../cardkit/bus","../cardkit/pagesession","mo/domready"],function(e,t,n,r,i,s,o){function v(t,n){var r,s=typeof t=="string";if(!s){r=t.target,t="";while(!r.href)r=r.parentNode;e(r).hasClass("ck-link")&&(t=(r.href.replace(a.href,"").match(/^#(.+)/)||[])[1])}var f=t&&e("#"+t);if(!f){if(!r)return;t="ckLoading",f=d.loadingCard,n=r.href,o.clear(o.indexOf(a.href))}var l=d.viewport.addClass("ck-interim");s||g(l[0].id,t,n),i.transform(f[0],"translateX",u.innerWidth+"px"),f.addClass("ck-moving"),d.showTopbar(),d.changeView(f),i().play().actor(f[0],{transform:"translateX(0)"},400,"easeInOut").follow().done(function(){f.removeClass("ck-moving"),l.hide().removeClass("ck-interim"),n&&(s?history.forward():a.href=n)})}function m(t){var n=e("#"+t),r=d.viewport.addClass("ck-moving");n.addClass("ck-interim"),d.showTopbar(),d.changeView(n),i().play().actor(r[0],{transform:"translateX("+u.innerWidth+"px)"},400,"easeInOut").follow().done(function(){r.hide().removeClass("ck-moving"),i.transform(r[0],"translateX","0px"),n.removeClass("ck-interim"),t==="ckLoading"&&history.back()})}function g(e,t,n){history.pushState({prev:e,next:t,link:n,i:history.length},f.title,a.href)}var u=this,a=u.location,f=u.document,l=f.body,c="orientation"in u&&"onorientationchange"in u,h="overflowScrolling"in l,p='<div class="ck-card" cktype="loading" id="ckLoading"><span>加载中...</span></div>',d={init:function(t){var n=this.wrapper=t.wrapper;this.header=t.header,this.footer=e(".ck-footer",n),this.cards=e(".ck-card",n),this.listContents=e(".ck-list",n),this.loadingCard=e(p).appendTo(n),this.defaultCard=e("#ckDefault"),this.headerHeight=this.header.height(),this.windowFullHeight=Infinity,this.render(),this.showTopbar(),e(u).bind("popstate",function(t){var n=d.viewport[0].id==="ckLoading";t.state?t.state.next==="ckLoading"&&n?history.back():n?(d.showTopbar(),d.changeView(e("#"+t.state.next)),d.loadingCard.hide()):t.state.prev===d.viewport[0].id?v(t.state.next,t.state.link):m(t.state.next):n?history.forward():m("ckLoading")}),o.init();var i=history.state;i&&i.next?(this.changeView(e("#"+i.next)),i.next==="ckLoading"&&history.back()):o.indexOf(a.href)!==-1?(d.changeView(d.loadingCard),history.forward()):(d.changeView(d.defaultCard),g(d.loadingCard[0].id,d.defaultCard[0].id),o.push(a.href)),e(u).bind("resize",function(e){d.updateSize()}),this.hideAddressbar(),this.windowFullHeight=u.innerHeight,r(f,{matchesSelector:!0,preventDefault:!0}).on("click",{a:v,"a *":v});var s,c;e(l).bind("touchstart",function(e){s=e.touches[0].clientY}),e(l).bind("touchmove",function(e){c=e.touches[0].clientY}),e(l).bind("touchend",function(){var e=c-s;e<-20?(d.hideAddressbar(),d.viewport[0].scrollTop>=d.headerHeight&&d.hideTopbar()):e>0&&d.showTopbar()})},changeView:function(e){this.viewport=e.show(),e.append(this.footer),this.updateSize(),e[0].scrollTop=this.topbarEnable?0:this.headerHeight},updateSize:function(){this.viewport[0].style.height=u.innerHeight-this.headerHeight+"px"},hideTopbar:function(){this.topbarEnable&&(this.topbarEnable=!1,i.transform(d.header[0],"translateY","-"+this.headerHeight+"px"))},showTopbar:function(){this.topbarEnable||(this.topbarEnable=!0,i.transform(d.header[0],"translateY","0"))},hideAddressbar:function(){this.windowFullHeight>u.innerHeight&&(l.style.height=screen.availHeight+"px",u.scrollTo(0,1),d.updateSize(),l.style.height="")},showAddressbar:function(){},getOrientation:function(){var e=!0;return c?e={0:!0,180:!0}[u.orientation]:e=l.clientWidth/l.clientHeight<1.1,e?"portrait":"landscape"},render:function(){this.listContents.find(".ck-link").forEach(function(t){t=e(t);var n=(t.attr("href").replace(a.href,"").match(/^#(.+)/)||[])[1],r=e("#"+n).find(".ck-hd").html();if(r)t.html(r.trim());else{var i=t.parent().parent();t.parent().remove(),/\S/.test(i.html())||i.remove()}})}};return d}),define("../cardkit/app",["mo/lang","../cardkit/bus","../cardkit/view"],function(e,t,n){var r={setup:function(e){n.init(e)}};return r}),require.config({baseUrl:"js/mod/",distUrl:"dist/js/mod/",aliases:{cardkit:"../cardkit/"}}),define("mo/mainloop",[],function(){}),require(["dollar","cardkit/app"],function(e,t){t.setup({header:e(".ck-header"),wrapper:e(".ck-wrapper")})});