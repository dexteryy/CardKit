(function(){function t(t,e,n){var r="string"==typeof n;n||(e?f(e)?n=s(c(l(t))):(n=e,e=null):(n=t,t=""),"string"!=typeof t?(e=t,t=""):(r="string"==typeof n,r||e||(e=i(n)))),t=t&&c(t);var a=t&&E.mods[t];if(E.debug||!a||!a.name||!(r&&2==a.loaded||a.exports)){r&&E.enable_ozma&&(e=null);var o=p(this)?this:_;if(a=E.mods[t]={name:t,url:a&&a.url,host:o,deps:e||[]},""===t&&(v=a),"string"!=typeof n)a.block=n,a.loaded=2;else{var u=E.aliases;u&&(n=n.replace(/\{(\w+)\}/g,function(t,e){return u[e]||""})),a.url=n}a.block&&!d(a.block)&&(a.exports=n)}}function e(t,a,o){if("string"==typeof t){if(!a)return(E.mods[c(l(t,g))]||{}).exports;t=[t]}else a||(a=t,t=i(a));var s=p(this)?this:_;o||(o={url:g&&g.url});for(var u,h=0,d=n.call(s,t,o),f=0,m=d.length;m>f;f++)u=d[f],u.is_reset&&(u=E.mods[u.name]),u.url&&2!==u.loaded&&(h++,u.loaded=1,N(u,function(){this.loaded=2;var n=v;n&&(n.name=this.name,n.url=this.url,E.mods[this.name]=n,v=null),0>=--h&&e.call(s,t,a,o)}));h||(o.deps=t,o.host=s,o.block=a,setTimeout(function(){r(t,o),d.push(o),M(d.reverse())},0))}function n(e,i,a){if(a=a||[],!e[0])return a;var o,u=a.history;if(u||(u=a.history={}),e[1])o=e,e=!1;else{var h,d=e[0],f=b.exec(d);f&&(d=f[2],f=f[1]);var p=c(d);if(!E.mods[p]&&!S[p]){var m=c(l(d,i));p!==m&&(E.mods[i.url+":"+p]=m,p=m),E.mods[m]||t(m,s(m))}if(e=i=E.mods[p],!e)return a;if("new"===f?e={is_reset:!0,deps:e.deps,name:p,newname:f+"!"+p,host:this}:h=e.name,u[h])return a;u[h]?o=[]:(o=e.deps||[],h&&(u[h]=!0))}for(var v=o.length-1;v>=0;v--)u[o[v]]||n.call(this,[o[v]],i,a);return e&&(r(o,e),a.push(e)),a}function i(t){var e=t.hiddenDeps||[];if(!t.hiddenDeps){var n=""+t,i=null;for(e=t.hiddenDeps=[];i=w.exec(n);)e.push(i[0].slice(10,-2))}return e.slice()}function r(t,e){R.call(t.slice(),function(n,i){var r=this[e.url+":"+c(n)];"string"==typeof r&&(t[i]=r)},E.mods)}function a(t){for(var e in t)if("aliases"===e){E[e]||(E[e]={});for(var n in t[e])E[e][n]=t[e][n];var i=E.mods;for(var r in i)i[r].name=c(r),i[i[r].name]=i[r]}else E[e]=t[e]}function o(t){return t.replace(/(.+?)(_src.*)?(\.\w+)$/,function(t,e,n,i){return e+(n&&"_combo"||"_pack")+i})}function s(t){return y.test(t)?t:t+".js"}function c(t){var e=E.aliases;return e&&(t=t.replace(T,function(t,n){return e[n]||n+"/"})),t}function l(t,e){var n=x.exec(t);return n&&e&&(t=(e.url||"").replace(/[^\/]+$/,"")+n[0]),u(t)}function u(t){t=t.replace(C,"$1");for(var e,n,i=t,r=/(\.\.\/)+/g;e=(r.exec(i)||[])[0];)n=e.match(/\.\.\//g).length,t=t.replace(RegExp("([^/\\.]+/){"+n+"}"+e),"");return t.replace(/\/\//g,"/")}function h(t,e){var n=p(this)?this.document:document,i=n.createElement("script");i.type="text/javascript",i.async="async",e?d(e)&&(e={callback:e}):e={},e.charset&&(i.charset=e.charset),i.src=t;var r=n.getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(t,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0,!n&&e.callback&&e.callback())},r.insertBefore(i,r.firstChild)}function d(t){return"[object Function]"===k.call(t)}function f(t){return"[object Array]"===k.call(t)}function p(t){return"setInterval"in t}function m(t){function e(){}return e.prototype=t,new e}var v,g,_=this,k=Object.prototype.toString,b=/(.*)!(.+)/,w=/\Wrequire\((['"]).+?\1\)/g,y=/\.(js|json)$/,x=/^\.+?\/.+/,C=/(^|\/)\.\//g,T=/^([\w\-]+)\//,S={require:1,exports:1,module:1,host:1,finish:1},E={mods:{}},O={},L={},A={},j={},H={},R=Array.prototype.forEach||function(t,e){for(var n=0,i=this.length;i>n;n++)n in this&&t.call(e,this[n],n,this)},M=function(t){for(var n,i,r,a,o,s,l,u,h,d,f=j;n=t.pop();)if(n.is_reset?(d=m(E.mods[n.name]),d.host=n.host,d.newname=n.newname,n=d,H[n.newname]||(H[n.newname]=[]),H[n.newname].push(n),n.exports=void 0):n.name&&(n=E.mods[n.name]||n),n.block&&(n.running||void 0===n.exports)){l=[],u={},h={id:n.name,filename:n.url,exports:u},s=n.deps.slice(),s[n.block.hiddenDeps?"unshift":"push"]("require","exports","module");for(var p=0,v=s.length;v>p;p++)switch(i=s[p]){case"require":l.push(e);break;case"exports":l.push(u);break;case"module":l.push(h);break;case"host":l.push(n.host);break;case"finish":r=n.name,f[r]?f[r].push(t):f[r]=[t],l.push(function(t){setTimeout(function(){void 0!==t&&(n.exports=t),f[r]&&(R.call(f[r],function(t){this(t)},M),delete f[r],n.running=0)},0)}),o=1;break;default:l.push(((H[i]||[]).pop()||E.mods[c(i)]||{}).exports)}if(!n.running){g=n,a=n.block.apply(n.host,l)||null,g=!1,u=h.exports,n.exports=void 0!==a?a:u;for(var _ in u){_&&(n.exports=u);break}}if(o){n.running=1;break}}},N=function(t,e){var n=t.url,i=O[n];if(i)1===i?e.call(t):i.push([e,t]);else{var r=t.name,a=L;if(t.deps&&t.deps.length&&1!==a[r]){if(a[r]=[t.deps.length,e],R.call(t.deps,function(e){var n=E.mods[c(e)];1!==this[e]&&n.url&&2!==n.loaded?(this[e]||(this[e]=[]),this[e].push(t)):a[r][0]--},A),a[r][0]>0)return;a[r]=1}i=O[n]=[[e,t]];var s=/^\w+:\/\//.test(n)?n:(E.enable_ozma&&E.distUrl||E.baseUrl||"")+(E.enableAutoSuffix?o(n):n);h.call(t.host||this,s,function(){R.call(i,function(t){t[0].call(t[1])}),O[n]=1,A[r]&&1!==A[r]&&(R.call(A[r],function(t){var e=this[t.name];0>=--e[0]&&(this[t.name]=1,N(t,e[1]))},a),A[r]=1)})}},D={VERSION:"2.5.2",define:t,require:e,config:a,seek:i,fetch:N,realname:c,basename:l,filesuffix:s,namesuffix:o,_getScript:h,_clone:m,_forEach:R,_isFunction:d,_isWindow:p};if(e.config=a,t.amd={jQuery:!0},_.window)_.oz=D,_.define=t,_.require=e;else{exports.oz=D,exports._config=E;for(var I in D)exports[I]=D[I];var P=function(t){return function(){return exports[t].apply(this,arguments)}};M=P("exec"),N=P("fetch"),e=P("require"),e.config=a}})(),require.config({enable_ozma:!0}),define("mo/domready",["finish"],function(t){var e,n=this,i=n.document,r="addEventListener",a="attachEvent",o="DOMContentLoaded",s="onreadystatechange";if("complete"===i.readyState)setTimeout(t,1);else if(i[r])e=function(){i.removeEventListener("READY",e,!1),t()},i[r](o,e,!1),n[r]("load",t,!1);else if(i[a]){e=function(){"complete"===i.readyState&&(i.detachEvent(s,e),t())},i[a](s,e),n[a]("load",t);var c=!1;try{c=null==n.frameElement}catch(l){}if(i.documentElement.doScroll&&c){var u=function(){try{i.documentElement.doScroll("left")}catch(e){return setTimeout(u,1),void 0}t()};u()}}}),define("mo/browsers",[],function(){var t,e,n,i=this.navigator.userAgent.toLowerCase(),r={"360ee":2,"maxthon/3":2,qqbrowser:2,metasr:2,"360se":1,theworld:1,maxthon:1,tencenttraveler:-1};try{var a=/(windows) nt ([\w.]+)/,o=/(mac) os \w+ ([\w.]+)/,s=/(iphone) os ([\w._]+)/,c=/(ipad) os ([\w.]+)/,l=/(android)[ ;]([\w.]*)/,u=/(\w+)[ \/]([\w.]+)[ \/]mobile.*safari/,h=/(\w+)[ \/]([\w.]+) safari/,d=/(webkit)[ \/]([\w.]+)/,f=/(opera)(?:.*version)?[ \/]([\w.]+)/,p=/(msie) ([\w.]+)/,m=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/(360se)/,g=/(360ee)/,_=/(360) \w+phone/,k=/(theworld)/,b=/(maxthon\/3)/,w=/(maxthon)/,y=/(micromessenger)/,x=/(tencenttraveler)/,C=/(qqbrowser)/,T=/(baidubrowser)/,S=/(ucbrowser)/,E=/(metasr)/;if(n=s.exec(i)||c.exec(i)||l.exec(i)||o.exec(i)||a.exec(i)||[],t=d.exec(i)||f.exec(i)||p.exec(i)||0>i.indexOf("compatible")&&m.exec(i)||[],"webkit"===t[1]){var O=u.exec(i)||h.exec(i);O&&(t[3]=t[1],t[4]=t[2],t[1]="version"===O[1]&&(("iphone"===n[1]||"ipad"===n[1])&&"mobilesafari"||"android"===n[1]&&"aosp"||"safari")||O[1],t[2]=O[2])}e=v.exec(i)||g.exec(i)||_.exec(i)||S.exec(i)||k.exec(i)||b.exec(i)||w.exec(i)||y.exec(i)||x.exec(i)||C.exec(i)||T.exec(i)||E.exec(i)||[]}catch(L){t=[],e=[]}var A={browser:t[1]||"",version:t[2]||"0",engine:t[3],engineversion:t[4]||"0",os:n[1],osversion:n[2]||"0",skin:e[1]||"",ua:i};return"android"!==A.os||A.browser||(A.skin="ucbrowser",A.browser="aosp",A.engine="webkit",A.osversion="0"),t[1]&&(A[t[1]]=parseInt(A.version,10)||!0),e[1]&&(A.rank=r[A.skin]||0),A.shell=A.skin,A}),define("../cardkit/supports",["mo/browsers"],function(t){var e=this,n=e.document,i=n.body,r="android"===t.os,a="iphone"===t.os||"ipad"===t.os,o=a&&"webkit"===t.engine&&536>parseInt(t.engineversion,10),s=t.mozilla&&r,c="mac"===t.os||"windows"===t.os||"linux"===t.os,l={GOBACK_WHEN_POP:!o&&!t.aosp,REPLACE_HASH:!o&&!t.aosp,BROWSER_CONTROL:c||t.mobilesafari||"micromessenger"===t.shell||r&&t.chrome,NO_POP_ON_CACHED_PAGE:s,RESIZE_WHEN_SCROLL:s,FIXED_BOTTOM_BUGGY:t.crios,NEW_WIN:!o&&!t.aosp,CARD_SCROLL:!c&&!t.aosp,HIDE_ADDRESSBAR:!t.crios,PREVENT_WINDOW_SCROLL:!!t.mobilesafari,HIDE_TOPBAR:!!t.mobilesafari};return l.SAFARI_OVERFLOWSCROLL="webkitOverflowScrolling"in i.style&&(l.CARD_SCROLL||o),l.WINDOW_SCROLL=!l.CARD_SCROLL||r,l}),define("mo/lang/es5",[],function(){function t(){}var e=this,n=e.Array,i=e.String,r=e.Object,a=e.Function,o=r.prototype,s=n.prototype,c=a.prototype,l=o.toString;c.bind||(c.bind=function(e){var n=this,i=s.slice.call(arguments,1),a=function(){var t=i.concat(s.slice.call(arguments));if(this instanceof a){var o=n.apply(this,t);return r(o)===o?o:this}return n.apply(e,t)};return n.prototype&&(t.prototype=n.prototype,a.prototype=new t,t.prototype=null),a});var u=c.call,h=u.bind(o.hasOwnProperty),l=u.bind(o.toString);s.filter||(s.filter=function(t,e){for(var n=[],i=0,r=this.length;r>i;i++)i in this&&t.call(e,this[i],i,this)&&n.push(this[i]);return n}),s.forEach||(s.forEach=function(t,e){for(var n=0,i=this.length;i>n;n++)n in this&&t.call(e,this[n],n,this)}),s.map||(s.map=function(t,e){for(var n=0,i=[],r=this.length;r>n;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),s.reduce||(s.reduce=function(t,e){for(var n=1,i=this[0],r=this.length;r>n;n++)n in this&&(i=t.call(e,i,this[n],n,this));return i}),s.some||(s.some=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),s.every||(s.every=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),s.indexOf||(s.indexOf=function(t,e){var n=this.length;for(e=parseInt(e,10)||0,0>e&&(e+=n);n>e;e++)if(e in this&&this[e]===t)return e;return-1}),s.lastIndexOf||(s.lastIndexOf=function(t,e){var n=this.length;for(e=parseInt(e,10)||n-1,0>e&&(e+=n);e>-1;e--)if(e in this&&this[e]===t)return e;return-1}),n.isArray||(n.isArray=function(t){return"[object Array]"===l.call(t)});var d=/\S/,f=/^\s+/,p=/\s+$/;d.test(" ")&&(f=/^[\s\xA0]+/,p=/[\s\xA0]+$/),i.prototype.trim||(i.prototype.trim=function(t){return null==t?"":(""+t).replace(f,"").replace(p,"")}),r.keys||(r.keys=function(t){var e=[];for(var n in t)h(t,n)&&e.push(n);return e}),r.create||(r.create=function(t){function e(){}return e.prototype=t,new e}),r.getPrototypeOf||(r.getPrototypeOf=function(t){return t.__proto__||t.constructor.prototype})}),define("mo/lang/type",["mo/lang/es5"],function(t,e,n){function i(t){return null==t?t+"":o[r.call(t)]||"object"}var r=Object.prototype.toString,a=Array.prototype,o={};a.forEach.call("Boolean Number String Function Array Date RegExp Object".split(" "),function(t){this["[object "+t+"]"]=t.toLowerCase()},o),n.type=i,n.isFunction=function(t){return"[object Function]"===r.call(t)},n.isWindow=function(t){return"setInterval"in t},n.isEmptyObject=function(t){for(var e in t)return e=null,!1;return!0}}),define("mo/lang/mix",["mo/lang/es5","mo/lang/type"],function(t,e,n,i){function r(t){var e,n,i,a,o=arguments,s=o.length,c={number:1,"boolean":2,string:3};"object"!=typeof o[s-1]?(n=o[s-1]||0,s--):n=0;for(var l=1;s>l;l++)if(e=o[l],Array.isArray(e))for(t=!c[typeof t]&&t||[],a=e.length,i=0;a>i;i++)t[i]=n>=1&&e[i]&&"object"==typeof e[i]?r(t[i],e[i],n-1):e[i];else{t=!c[typeof t]&&t||{};for(i in e)t[i]=n>=1&&e[i]&&"object"==typeof e[i]?r(t[i],e[i],n-1):e[i]}return t}function a(t){var e,n,i,r,o,c,l,u=arguments,h=u.length,d={object:1,array:2};"object"!=typeof u[h-1]?(n=u[h-1]||0,h--):n=0;for(var f=1;h>f;f++)if(e=u[f],Array.isArray(t))t=t||[],o={},c=[],l="__oz_uniqmark_"+(+new Date+Math.random()),e=e.concat(t),t.length=0,e.forEach(function(e){e&&"object"==typeof e?e[l]||(n>=1&&Array.isArray(e)?t.push(a(e,[],n-1)):t.push(e),e[l]=1,c.push(e)):(r=typeof e+"_"+e,this[r]||(t.push(e),this[r]=1))},o),c.forEach(function(t){delete t[l]});else{t=t||{};for(i in e)t.hasOwnProperty(i)?n>=1&&i&&d[s(t[i])]+0===d[s(e[i])]+0&&(t[i]=a(t[i],e[i],n-1)):t[i]=e[i]}return t}function o(t){var e,n,i,r,a,c,l,u=arguments,h=u.length,d={object:1,array:2};"object"!=typeof u[h-1]?(n=u[h-1]||0,h--):n=0;for(var f=1;h>f;f++)if(e=u[f],Array.isArray(t))t=t||[],a={},c=[],l="__oz_uniqmark_"+(+new Date+Math.random()),t.forEach(function(t){t&&"object"==typeof t&&!t[l]?(t[l]=1,c.push(t)):(r=typeof t+"_"+t,this[r]=1)},a),t.length=0,e.forEach(function(e){e&&"object"==typeof e?1===e[l]&&(t.push(e),e[l]=2):(r=typeof e+"_"+e,1===this[r]&&(t.push(e),this[r]=2))},a),c.forEach(function(t){delete t[l]});else{t=t||{};for(i in t)e.hasOwnProperty(i)?n>=1&&i&&d[s(t[i])]+0===d[s(e[i])]+0&&(t[i]=o(t[i],e[i],n-1)):delete t[i]}return t}var s=e.type;i.mix=r,i.merge=a,i.interset=o,i.copy=function(t,e){return r(null,t,e)},i.occupy=function(t,e,n){return r(o(t,e,n),e,n)},i.defaults=a,i.config=function(t,e,n,i){return r(a(t,n,i),o(r(null,e,i),n,i),i)},i.unique=function(t,e){return a(t,[],e)}}),define("mo/lang/oop",["mo/lang/es5","mo/lang/mix"],function(t,e,n,i){function r(t,e,n){return t.apply(e,n)}var a=e.mix;i.construct=function(t,e,n){e&&!Array.isArray(e)&&(n=e),n||(n=function(){this.superConstructor.apply(this,arguments)});var i=Object.create(t.prototype),o=Object.create(t.prototype),s=function(){var e=this;return this.constructor=s,this.superConstructor=function(){r.prototype=t.prototype;var n=new r(t,e,arguments);for(var i in n)e[i]||(e[i]=o[i]=n[i])},this.superClass=o,n.apply(this,arguments)};return s.prototype=i,e&&(e=a.apply(this,e),a(i,e),a(o,e)),s}}),define("mo/lang/struct",["mo/lang/es5","mo/lang/mix"],function(t,e,n,i){var r=e.mix;i.index=function(t,e){for(var n,i={},r=0,a=t.length;a>r;r++)n=t[r],e&&"object"==typeof n?i[n[e]]=n:i[n]=!0;return i},i.fnQueue=function(){function t(t){return function(){var e,i;for(n=this.slice().reverse();i=n.pop();)e=i[t].apply(i,arguments);return n=!1,e}}var e=[],n=!1;return r(e,{call:t("call"),apply:t("apply"),clear:function(t){if(t){for(var e=this.length,i=e-n.length,r=this.length-1;r>=0;r--)this[r]===t&&(this.splice(r,1),n&&r>=i&&n.splice(e-r-1,1));if(0>r)return!1}else this.length=0;return!0}}),e}}),define("mo/lang",["mo/lang/es5","mo/lang/type","mo/lang/mix","mo/lang/struct","mo/lang/oop"],function(t,e,n,i,r,a,o){var s=this,c=s.window;n.mix(o,e,n,i,r),o.ns=function(t,e,n){for(var i,r=n||c,a=t.split(".").reverse();(i=a.pop())&&a.length>0;){if(r[i]===void 0)r[i]={};else if("object"!=typeof r[i])return!1;r=r[i]}return e!==void 0&&(r[i]=e),r[i]}}),define("dollar/origin",["mo/lang/es5","mo/lang/mix","mo/lang/type"],function(t,e,n){function i(t,e){if(t){if(t.constructor===i)return t;if("string"!=typeof t){var n=new i;return t.push===D||t[0]?D.apply(n,I.call(t)):D.call(n,t),n}return t=t.trim(),R.test(t)?k(t):e?i(e).find(t):F.find(t)}return this===C?new i:void 0}function r(t){return t}function a(t,e){return t&&t[L](e)}function o(t,e){return function(n){return e&&(n=n[e]),a(n,t)&&this.push(n),n}}function s(t){return function(n){return i(e.unique([void 0,T,null].concat(this._map(n?function(e){var i=e[t];return i&&a(i,n)?i:void 0}:function(e){return e[t]}))).slice(3))}}function c(t,n,r){return function(o,s){r||(s=o);var c=new i;return this.forEach(function(e){var c,l=n?e.parentNode[n]:e;r&&(c=i(o,e.parentNode));do{if(c&&c.indexOf(l)>-1)break;e===l||s&&!a(l,s)||this.push(l)}while(l=l[t])},c),e.unique(c)}}function l(t,e,n,i,r){var a=M(e);return t.forEach(function(t,o){i.call(r,t,a?e.call(this,o,n&&t[n]):e)},t),t}function u(t,e,n){return function(i,r){if("object"==typeof i)if(n)n(this,i);else for(var a in i)this.forEach(function(e){t(e,this,i[this])},a);else{if(void 0===r)return e(this[0],i);var o=M(r);this.forEach(function(n,a){t(n,i,o?r.call(this,a,e(n,i)):r)},this)}return this}}function h(t){function e(n,i){if("object"==typeof n)for(var r in n)e.call(this,[r,n[r]]);else i&&(n=d.aliases[n]||n,this.forEach(function(e){e[t+"EventListener"](n,this,!1)},i));return this}return e}function d(t,n){var i=!0,r=j[t],a=document.createEvent(r&&"TouchEvent"||A[t]&&"MouseEvents"||"Events");return n&&("bubbles"in n&&(i=!!n.bubbles,delete n.bubbles),e.mix(a,n)),t=d.aliases[t]||t,a[r&&"initTouchEvent"||"initEvent"](t,i,!0),a}function f(t,n,r){return this===i?t=i(t):(r=n,n=t,t=this),"string"==typeof n&&(n=d(n)),e.mix(n,r),t.forEach("submit"!=n.type||n.defaultPrevented?function(t){"dispatchEvent"in t&&t.dispatchEvent(this)}:function(t){t.submit()},n),this}function p(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function m(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function v(t,e){return"number"==typeof e&&!H[t]&&e+"px"||e}function g(t){var e=V[t];if(!e){var n=document.createElement(t);T.body.appendChild(n),e=P(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"===e&&(e="block"),V[t]=e}return e}function _(t){return function(){return this[0]===C?C["inner"+t]:this[0]===T?T.documentElement["offset"+t]:(this.offset()||{})[t.toLowerCase()]}}function k(t,e){var n=(R.exec(t)||[])[0]||t,r=U[n];r||(r=U[n]="tr"===n&&document.createElement("tbody")||("tbody"===n||"thead"===n||"tfoot"===n)&&document.createElement("table")||("td"===n||"th"===n)&&document.createElement("tr")||document.createElement("div")),r.innerHTML=t;var a=new i;if(D.apply(a,I.call(r.childNodes)),a.forEach(function(t){this.removeChild(t)},r),e)for(var o in e)a.attr(o,e[o]);return a}function b(t,e,n){switch("SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||C.eval.call(C,e.innerHTML),n){case 1:t.appendChild(e);break;case 2:t.parentNode.insertBefore(e,t);break;case 3:t.insertBefore(e,t.firstChild);break;case 4:t.parentNode.insertBefore(e,t.nextSibling);break;default:}}function w(t,e){var n=e?function(e){b(e,this,t)}:function(e){b(this,e,t)};return function(t){return this.forEach(function(t){this.forEach(n,t)},i(t)),this}}function y(t){return w(t,!0)}function x(t){return w(t)}var C=this,T=C.document,S="nextElementSibling",E="previousElementSibling",O="firstElementChild",L=["webkitMatchesSelector","mozMatchesSelector","matchesSelector"].map(function(t){return this[t]&&t},T.body).filter(r)[0],A={click:1,mousedown:1,mouseup:1,mousemove:1},j={touchstart:1,touchmove:1,touchend:1,touchcancel:1},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,M=n.isFunction,N=Array.prototype.map,D=Array.prototype.push,I=Array.prototype.slice,P=document.defaultView.getComputedStyle,V={},U={},F=i.fn=i.prototype=[];return["map","filter","slice","reverse","sort"].forEach(function(t){var e=this["_"+t]=this[t];this[t]=function(){return i(e.apply(this,arguments))}},F),["splice","concat"].forEach(function(t){var e=this["_"+t]=this[t];this[t]=function(){return i(e.apply(this._slice(),N.call(arguments,function(t){return t._slice()})))}},F),e.mix(F,{constructor:i,toString:function(){return this.join(",")},find:function(t){var e,n=new i;if(this===F?e=[T]:n.prevObject=e=this,/^#[\w_]+$/.test(t)){var r=((e[0]||T).getElementById||T.getElementById).call(T,t.substr(1));r&&n.push(r)}else{var a=/\W/.test(t)?"querySelectorAll":"getElementsByTagName";e[1]?e.forEach(function(e){this.push.apply(this,I.call(e[a](t)))},n):e[0]&&n.push.apply(n,I.call(e[0][a](t)))}return n},eq:function(t){return-1===t?this.slice(-1):this.slice(t,t+1)},not:function(t){return this.filter(function(e){return e&&!this(e,t)},a)},has:function(t){return this.filter(function(e){return this(e,t)},a)},parent:s("parentNode"),parents:function(t){for(var e=new i,n=this,r=t?o(t,"parentNode"):function(t){return this[this.push(t.parentNode)-1]};n.length;)n=n.map(r,e);return e},closest:function(t){for(var e=new i,n=this,r=o(t,"parentNode");n.length&&!e.length;)n=n.map(r,e);return e.length&&e||this},siblings:c(S,O),next:s(S),nextAll:c(S),nextUntil:c(S,!1,!0),prev:s(E),prevAll:c(E),prevUntil:c(E,!1,!0),children:function(){var t=new i;return this.forEach(function(e){this(t,i(e.children))},e.merge),t},contents:function(){var t=new i;return this.forEach(function(e){this(t,i(e.childNodes))},e.merge),t},is:function(t){return this.some(function(e){return a(e,t)})},hasClass:function(t){for(var e=0,n=this.length;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},isEmpty:function(){return this.every(function(t){if(!t.innerHTML){if(t.innerHTML=" ",!t.innerHTML)return!0;t.innerHTML=""}return!1})},addClass:function(t){return l(this,t,"className",function(t,e){t.classList.add(e)})},removeClass:function(t){return l(this,t,"className",function(t,e){t.classList.remove(e)})},toggleClass:function(t,e){return l(this,t,"className",function(t,n){t.classList[void 0===e&&"toggle"||this&&"add"||"remove"](n)})},attr:u(function(t,e,n){t.setAttribute(e,n)},function(t,e){return t&&t.getAttribute(e)}),removeAttr:function(t){return this.forEach(function(t){t.removeAttribute(this)},t),this},prop:u(function(t,e,n){t[e]=n},function(t,e){return(t||{})[e]}),removeProp:function(t){return this.forEach(function(t){delete t[this]},t),this},data:u(function(t,e,n){t.dataset[p(e)]=n},function(t,n){var i=(t||{}).dataset;return n?i[p(n)]:e.mix({},i)}),removeData:function(t){return this.forEach(function(t){delete t.dataset[this]},t),this},val:function(t){var e=this[0];return void 0!==t?l(this,t,"value",function(t,e){t.value=e}):e?e.multiple?i("option",this).filter(function(t){return t.selected}).map(function(t){return t.value}):e.value:void 0},empty:function(){return this.forEach(function(t){t.innerHTML=""}),this},html:function(t){return void 0===t?(this[0]||{}).innerHTML:l(this,t,"innerHTML",function(t,e){R.test(e)?this(t).empty().append(e):t.innerHTML=e},i)},text:function(t){return void 0===t?(this[0]||{}).textContent:l(this,t,"textContent",function(t,e){t.textContent=e})},clone:function(){return this.map(function(t){return t.cloneNode(!0)})},css:u(function(t,e,n){var i=m(e);n||0===n?t.style.cssText+=";"+i+":"+v(i,n):t.style.removeProperty(i)},function(t,e){return t&&(t.style[p(e)]||P(t,"").getPropertyValue(e))},function(t,e){var n,i,r="";for(var a in e)i=e[a],n=m(a),i||0===i?r+=n+":"+v(n,i)+";":t.forEach(function(t){t.style.removeProperty(this)},n);t.forEach(function(t){t.style.cssText+=";"+this},r)}),hide:function(){return this.css("display","none")},show:function(){return this.forEach(function(t){"none"===t.style.display&&(t.style.display=null),"none"===this(t,"").getPropertyValue("display")&&(t.style.display=g(t.nodeName))},P),this},offset:function(){var t=this[0].getBoundingClientRect();return{left:t.left+C.pageXOffset,top:t.top+C.pageYOffset,width:t.width,height:t.height}},width:_("Width"),height:_("Height"),appendTo:y(1),append:x(1),prependTo:y(3),prepend:x(3),insertBefore:y(2),before:x(2),insertAfter:y(4),after:x(4),replaceAll:function(t){var e=i(t);return this.insertBefore(e),e.remove(),this},replaceWith:function(t){return i(t).replaceAll(this)},wrap:function(t){return l(this,t,!1,function(t,e){this(e).insertBefore(t).append(t)},i)},wrapAll:function(t){return i(t).insertBefore(this.eq(0)).append(this),this},wrapInner:function(t){return l(this,t,!1,function(t,e){this(t).contents().wrapAll(e)},i)},unwrap:function(){return this.parent().forEach(function(t){this(t).children().replaceAll(t)},i),this},remove:function(){return this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)}),this},on:h("add"),off:h("remove"),once:function(t,e){var n=function(){return i(this).off(t,n),e.apply(this,arguments)};i(this).on(t,n)},trigger:f,end:function(){return this.prevObject||new i},each:function(t){for(var e=0,n=this.length;n>e;e++){var i=t.call(this[e],e);if(i===!1)break}return this}}),F.bind=F.on,F.unbind=F.off,d.aliases={},i.find=i,i.matchesSelector=a,i.createNodes=k,i.camelize=p,i.dasherize=m,i.Event=d,i.trigger=f,i._kvAccess=u,i._eachNode=l,i.VERSION="1.1.2",i}),define("dollar",["dollar/origin"],function(t){return t}),define("../cardkit/parser/util",["dollar","mo/lang"],function(t){function e(t){if(t)for(var e,n=0,i=t.length;i>n;n++)if(e=t[n].href)return e}function n(t){return t.map(function(t){return t.textContent}).join("")}function i(e){return e.map(function(t){return t.innerHTML},t).join("")}function r(e,n){return e.map(function(t){var e=t.outerHTML;return n?e.replace(f,function(t,e,i){return i===n?e+"ck-"+i:t}):e},t).join("")}function a(t,e,n,i,r){var a=e.find(t);return a.length?a.map(function(e){var a=p.getSource(e,n);if(a){var o=a.find(t);return o[0]||(o=a),i(o,e,r,n)}return i(e,void 0,r,n)}):a}function o(t,e,n,i){if(e&&"object"==typeof e){e=n(e,null,null,i);for(var r in e)!e[r]||e[r]instanceof Array&&!e[r].length||(t[r]=e[r])}return t}function s(n,r){n=t(n);var a=n&&{html:i(n),href:e(n)}||{};return o(a,r,s)}function c(n,r,s,f){n=t(n);var p,m,v,g,_,k=a(".ckd-title",n,f,h,"title")[0],b=a(".ckd-author",n,f,h,"author")[0],w=a(".ckd-icon",n,f,l,"icon")[0];k||b||w?(p=a(".ckd-title-link-alone",n,f,u,"title-link-alone")[0],m=p||a(".ckd-title-link-extern",n,f,u,"title-link-extern")[0],v=m||a(".ckd-title-link",n,f,u,"title-link")[0]||a(".ckd-title",n,f,u,"title")[0],g=a(".ckd-author-link-extern",n,f,u,"author-link-extern")[0],_=g||a(".ckd-author-link",n,f,u,"author-link")[0]||a(".ckd-author",n,f,u,"author")[0]):(k=i(n),p=n.hasClass("ckd-title-link-alone"),m=n.hasClass("ckd-title-link-extern"),v=e(n));var y={title:k,href:!p&&v,hrefAlone:p,hrefExtern:m,titlePrefix:a(".ckd-title-prefix",n,f,d,"title-prefix"),titleSuffix:a(".ckd-title-suffix",n,f,d,"title-suffix"),titleTag:a(".ckd-title-tag",n,f,d,"title-tag"),icon:w,desc:a(".ckd-desc",n,f,d,"desc").concat(a(".ckd-subtitle",n,f,d,"subtitle")),info:a(".ckd-info",n,f,d,"info"),opt:a(".ckd-opt",n,f,d,"opt"),content:a(".ckd-content",n,f,d,"content"),meta:a(".ckd-meta",n,f,d,"meta"),author:b,authorUrl:_,authorUrlExtern:g,authorPrefix:a(".ckd-author-prefix",n,f,d,"author-prefix"),authorSuffix:a(".ckd-author-suffix",n,f,d,"author-suffix"),avatar:a(".ckd-avatar",n,f,l,"avatar")[0],authorDesc:a(".ckd-author-desc",n,f,d,"author-desc"),authorInfo:a(".ckd-author-info",n,f,d,"author-info"),authorMeta:a(".ckd-author-meta",n,f,d,"author-meta")};return o(y,r,c,f)}function l(e){return e=t(e),e.attr("src")}function u(n){return n=t(n),e(n)}function h(e){return e=t(e),i(e)}function d(e,n,i){return e=t(e),r(e,i)}var f=/([^\w-])ckd\-([\w\-]+)(?=[^\w\-])/,p={mergeSource:o,getSource:function(e,n){var i=t(e).data("source");if(i){var r=n.find("."+i);return r[0]&&r}},getHref:e,getText:n,getInnerHTML:i,getOuterHTML:r,getCustom:a,getHd:s,getItemData:c,getItemDataOuter:d};return p}),define("../cardkit/parser/banner",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var r=n.getSource(e,i),a={},o=r&&n.getOuterHTML(r),s={config:a,content:e[0].innerHTML+(o||"")};return s.content&&/\S/.test(s.content)&&(s.hasContent=!0),s}return i}),define("../cardkit/parser/form",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var c=n.getSource(e,i),l={blank:e.data("cfgBlank"),plainhd:e.data("cfgPlainhd")},u=o(c&&c.find(".ckd-hd")),h=o(c&&c.find(".ckd-hd-link-extern")),d=h.href?h:o(c&&c.find(".ckd-hd-link")),f=s(c&&c.find(".ckd-hdopt"),"hdopt"),p=o(c&&c.find(".ckd-ft")),m=c&&c.find(".ckd-item").map(function(t){return r(t,null,null,i)})||t(),v=a(".ckd-hd",e,i,o)[0]||{},g=a(".ckd-hd-link-extern",e,i,o)[0]||{},_=g.href?g:a(".ckd-hd-link",e,i,o)[0]||{},k=a(".ckd-hdopt",e,i,s,"hdopt").join(""),b=a(".ckd-ft",e,i,o)[0]||{},w=a(".ckd-item",e,i,r),y={config:l,style:e.data("style"),items:w.concat(m||t()),hd:void 0===v.html?u.html:v.html,hd_url:_.href||null!==_.href&&d.href||v.href||null!==v.href&&u.href,hd_url_extern:g.href||h.href,hd_opt:k+f,ft:void 0===b.html?p.html:b.html};return y}function r(e,i,o,c){e=t(e);var l={content:a(".ckd-content",e,c,s,"content").join("")||n.getInnerHTML(e)};return n.mergeSource(l,i,r,c)}var a=n.getCustom,o=n.getHd,s=n.getItemDataOuter;return i}),define("../cardkit/parser/list",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var c=n.getSource(e,i),l={blank:e.data("cfgBlank"),limit:e.data("cfgLimit"),col:e.data("cfgCol"),paper:e.data("cfgPaper"),plain:e.data("cfgPlain"),plainhd:e.data("cfgPlainhd")},u=a(c&&c.find(".ckd-hd")),h=a(c&&c.find(".ckd-hd-link-extern")),d=h.href?h:a(c&&c.find(".ckd-hd-link")),f=s(c&&c.find(".ckd-hdopt"),"hdopt"),p=a(c&&c.find(".ckd-ft")),m=c&&c.find(".ckd-item").map(function(t){return o(t,null,null,i)})||t(),v=r(".ckd-hd",e,i,a)[0]||{},g=r(".ckd-hd-link-extern",e,i,a)[0]||{},_=g.href?g:r(".ckd-hd-link",e,i,a)[0]||{},k=r(".ckd-hdopt",e,i,s,"hdopt").join(""),b=r(".ckd-ft",e,i,a)[0]||{},w=n.getCustom(".ckd-item",e,i,o),y={config:l,style:e.data("style"),items:w.concat(m),hd:void 0===v.html?u.html:v.html,hd_url:_.href||null!==_.href&&d.href||v.href||null!==v.href&&u.href,hd_url_extern:g.href||h.href,hd_opt:k+f,ft:void 0===b.html?p.html:b.html};return(l.plain||l.plainhd||"split"===y.style)&&(y.hasSplitHd=!0),y}var r=n.getCustom,a=n.getHd,o=n.getItemData,s=n.getItemDataOuter;return i}),define("../cardkit/parser/mini",["dollar","mo/lang","../cardkit/parser/list"],function(t,e,n){function i(t,e){var i=n(t,e);return i.hasSplitHd=!0,i}return i}),define("../cardkit/parser/box",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var u=n.getSource(e,i),h={paper:e.data("cfgPaper"),plain:e.data("cfgPlain"),plainhd:e.data("cfgPlainhd")},d=c(u&&u.find(".ckd-hd")),f=c(u&&u.find(".ckd-hd-link-extern")),p=f.href?f:c(u&&u.find(".ckd-hd-link")),m=l(u&&u.find(".ckd-hdopt"),"hdopt"),v=c(u&&u.find(".ckd-ft")),g=u&&n.getOuterHTML(u.find(".ckd-content")),_=s(".ckd-hd",e,i,a)[0]||{},k=s(".ckd-hd-link-extern",e,i,a)[0]||{},b=k.href?k:s(".ckd-hd-link",e,i,a)[0]||{},w=s(".ckd-hdopt",e,i,o,"hdopt").join(""),y=s(".ckd-ft",e,i,a)[0]||{};s(".ckd-content",e,i,r);var x={config:h,style:e.data("style"),content:e[0].innerHTML+(g||""),hd:void 0===_.html?d.html:_.html,hd_url:b.href||null!==b.href&&p.href||_.href||null!==_.href&&d.href,hd_url_extern:k.href||f.href,hd_opt:w+m,ft:void 0===y.html?v.html:y.html||(h.plain||h.paper)&&" "};return x.content&&/\S/.test(x.content)&&(x.hasContent=!0),x}function r(e,n){n&&t(n).replaceWith(e.clone())}function a(e,n){var i=c(e,n);return t(e).remove(),i}function o(e,n,i){var r=l(e,n,i);return t(e).remove(),r}var s=n.getCustom,c=n.getHd,l=n.getItemDataOuter;return i}),define("../cardkit/tpl/unit/blank",[],function(){return{template:'\n<div class="ck-blank-unit">\n    <article class="ck-unit-wrap">\n        <div>{%=(data.config.blank || \'目前还没有内容\')%}</div>\n    </article>\n</div>\n'}}),define("../cardkit/tpl/unit/banner",[],function(){return{template:"\n<article class=\"ck-unit-wrap {%=(!data.hasContent && 'empty' || '')%}\">\n\n    {% if (data.hasContent) { %}\n    <section>{%= data.content %}</section>\n    {% } %}\n\n</article>\n\n<div class=\"ck-top-tips\"><span>tips: 点击顶栏可返回顶部，向下拖拽顶栏可显示网址</span></div>\n\n"}}),define("../cardkit/tpl/unit/form",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.config.plain || data.config.plainhd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.config.plain && !data.config.plainhd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <section>\n    {% if (!data.items.length) { %}\n    <div class="ck-item blank">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n    {% } %}\n    {% data.items.forEach(function(item){ %}\n        <div class="ck-item">\n            {%= item.content %}\n        </div>\n    {% }); %}\n    </section>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n\n'}
}),define("../cardkit/tpl/unit/mini",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.hasSplitHd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap {%= (data.items.length > 1 ? \'slide\' : \'\') %}">\n\n    {% if (!data.hasSplitHd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <div class="ck-list-wrap">\n    {% if (data.items.length) { %}\n\n        <div class="ck-list">\n        {% data.items.forEach(function(item, i){ %}\n            <div class="ck-item {%= (item.href && \'clickable\' || \'\') %}">\n\n                <div class="ck-initem">\n\n                    {% if (item.href) { %}\n                    <a href="{%= item.href %}" class="ck-link ck-link-mask {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}"></a>\n                    {% } %}\n\n                    <div class="ck-title-box">\n\n                        {%= item.opt.join(\'\') %}\n\n                        {% if (item.icon) { %}\n                        <span class="ck-icon">\n                            <img src="{%= item.icon %}"/>\n                        </span>\n                        {% } %}\n\n                        <div class="ck-title-set">\n\n                            {% if (item.title) { %}\n                            <div class="ck-title-line">\n                                {%= item.titlePrefix.join(\'\') %}\n\n                                {% if (item.hrefAlone) { %}\n                                <a href="{%= item.hrefAlone %}" class="ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">{%= item.title %}</a>\n                                {% } else { %}\n                                <span class="ck-title">{%= item.title %}</span>\n                                {% } %}\n\n                                {%= item.titleSuffix.join(\'\') %}\n                                {%= item.titleTag.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.info.length) { %}\n                            <div class="ck-info-wrap">\n                                {%= item.info.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.desc.length) { %}\n                            <div class="ck-desc-wrap">\n                                {%= item.desc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.content.length) { %}\n                        <div class="ck-content-wrap">\n                            {%= item.content.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                        {% if (item.meta.length) { %}\n                        <div class="ck-meta-wrap">\n                            {%= item.meta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                    </div>\n\n                    {% if (item.author || item.authorDesc.length || item.authorMeta.length) { %}\n                    <div class="ck-author-box">\n\n                        {% if (item.avatar) { %}\n                            {% if (item.authorUrl) { %}\n                            <a href="{%= item.authorUrl %}" class="ck-avatar ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.avatar %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-avatar">\n                                <img src="{%= item.avatar %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-author-set">\n\n                            <div class="ck-author-line">\n                                {%= item.authorPrefix.join(\'\') %}\n                                {% if (item.authorUrl) { %}\n                                <a href="{%= item.authorUrl %}" class="ck-author ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">{%= item.author %}</a>\n                                {% } else { %}\n                                <span class="ck-author">{%= item.author %}</span>\n                                {% } %}\n                                {%= item.authorSuffix.join(\'\') %}\n                            </div>\n\n                            {% if (item.authorInfo.length) { %}\n                            <div class="ck-author-info-wrap">\n                                {%= item.authorInfo.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.authorDesc.length) { %}\n                            <div class="ck-author-desc-wrap">\n                                {%= item.authorDesc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.authorMeta.length) { %}\n                        <div class="ck-author-meta-wrap">\n                            {%= item.authorMeta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n\n                    </div>\n                    {% } %}\n\n                </div>\n\n            </div>\n        {% }); %}\n        </div>\n\n    {% } else { %}\n\n        <div class="ck-list">\n            <div class="ck-item blank">\n                <div class="ck-initem">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n            </div>\n        </div>\n\n    {% } %}\n    </div>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n\n'}}),define("../cardkit/tpl/unit/list",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.hasSplitHd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.hasSplitHd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <div class="ck-list-wrap">\n    {% if (data.items.length) { %}\n\n        <div class="ck-list">\n        {% data.items.forEach(function(item, i){ %}\n            {% if (i && (i % data.config.col === 0)) { %}\n            </div><div class="ck-list">\n            {% } %}\n            <div class="ck-item {%= (item.href && \'clickable\' || \'\') %}" \n                    style="width:{%= (data.config.col ? Math.floor(1000/data.config.col)/10 + \'%\' : \'\') %};">\n\n                <div class="ck-initem">\n\n                    {% if (item.href) { %}\n                    <a href="{%= item.href %}" class="ck-link ck-link-mask {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}"></a>\n                    {% } %}\n\n                    <div class="ck-title-box">\n\n                        {%= item.opt.join(\'\') %}\n\n                        {% if (item.icon) { %}\n                            {% if (item.hrefAlone) { %}\n                            <a href="{%= item.hrefAlone %}" class="ck-icon ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.icon %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-icon">\n                                <img src="{%= item.icon %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-title-set">\n\n                            {% if (item.title) { %}\n                            <div class="ck-title-line">\n                                {%= item.titlePrefix.join(\'\') %}\n\n                                {% if (item.hrefAlone) { %}\n                                <a href="{%= item.hrefAlone %}" class="ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">{%= item.title %}</a>\n                                {% } else { %}\n                                <span class="ck-title">{%= item.title %}</span>\n                                {% } %}\n\n                                {%= item.titleSuffix.join(\'\') %}\n                                {%= item.titleTag.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.info.length) { %}\n                            <div class="ck-info-wrap">\n                                {%= item.info.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.desc.length) { %}\n                            <div class="ck-desc-wrap">\n                                {%= item.desc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.content.length) { %}\n                        <div class="ck-content-wrap">\n                            {%= item.content.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                        {% if (item.meta.length) { %}\n                        <div class="ck-meta-wrap">\n                            {%= item.meta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                    </div>\n\n                    {% if (item.author || item.authorDesc.length || item.authorMeta.length) { %}\n                    <div class="ck-author-box">\n\n                        {% if (item.avatar) { %}\n                            {% if (item.authorUrl) { %}\n                            <a href="{%= item.authorUrl %}" class="ck-avatar ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.avatar %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-avatar">\n                                <img src="{%= item.avatar %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-author-set">\n\n                            <div class="ck-author-line">\n                                {%= item.authorPrefix.join(\'\') %}\n                                {% if (item.authorUrl) { %}\n                                <a href="{%= item.authorUrl %}" class="ck-author ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">{%= item.author %}</a>\n                                {% } else { %}\n                                <span class="ck-author">{%= item.author %}</span>\n                                {% } %}\n                                {%= item.authorSuffix.join(\'\') %}\n                            </div>\n\n                            {% if (item.authorInfo.length) { %}\n                            <div class="ck-author-info-wrap">\n                                {%= item.authorInfo.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.authorDesc.length) { %}\n                            <div class="ck-author-desc-wrap">\n                                {%= item.authorDesc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.authorMeta.length) { %}\n                        <div class="ck-author-meta-wrap">\n                            {%= item.authorMeta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n\n                    </div>\n                    {% } %}\n\n                </div>\n\n            </div>\n        {% }); %}\n        </div>\n\n    {% } else { %}\n\n        <div class="ck-list">\n            <div class="ck-item blank">\n                <div class="ck-initem">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n            </div>\n        </div>\n\n    {% } %}\n    </div>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("../cardkit/tpl/unit/box",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.config.plain || data.config.plainhd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.config.plain && !data.config.plainhd) { %}\n        {%= hd() %}\n    {% } %}\n\n    {% if (data.hasContent) { %}\n    <section>{%= data.content %}</section>\n    {% } %}\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("mo/template/string",[],function(t,e){e.format=function(t,e){return t.replace(/\{\{(\w+)\}\}/g,function(t,n){return null!=e[n]?e[n]:""})},e.escapeHTML=function(t){t=t||"";var e={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return t.replace(/[<>'"\{\}@]/g,function(t){return e[t]})},e.substr=function(t,e,n){if(!t||"string"!=typeof t)return"";var i=t.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/([^\x00-\xff])\s/g,"$1");return n?n.call(i,i):t.length>i.length?i+"...":i},e.strsize=function(t){return t.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length}}),define("mo/template/micro",["mo/lang","mo/template/string"],function(t,e,n,i){function r(t,e,n){var o,s=i.tplSettings,c=n?"#"+n:"";if(/[\t\r\n% ]/.test(t))o=Function(n||"obj","api","var __p=[];"+(n?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(n||"obj")+");"+"__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(s.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(s.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(n?"":"}")+"return __p.join('');");else if(o=s._cache[t+c],!o){var l=a.getElementById(t);l&&(o=s._cache[t+c]=r(l.innerHTML,!1,n))}return o?e?o(e,i.tplHelpers):o:""}var a=this.document;i.tplSettings={_cache:{},evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g},i.tplHelpers={mix:t.mix,escapeHTML:e.escapeHTML,substr:e.substr,include:r,_has:function(e){return function(n){return t.ns(n,void 0,e)}}},i.convertTpl=r,i.reloadTpl=function(t){delete i.tplSettings._cache[t]}}),define("mo/template",["mo/lang","mo/template/string","mo/template/micro"],function(t,e,n,i,r){t.mix(r,e,n),r.str2html=function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.firstChild;if(1==e.childNodes.length)return n;var i=document.createDocumentFragment();do i.appendChild(n);while(n=e.firstChild);return i}}),define("../cardkit/render",["dollar","mo/lang","mo/template","../cardkit/tpl/unit/box","../cardkit/tpl/unit/list","../cardkit/tpl/unit/mini","../cardkit/tpl/unit/form","../cardkit/tpl/unit/banner","../cardkit/tpl/unit/blank","../cardkit/parser/box","../cardkit/parser/list","../cardkit/parser/mini","../cardkit/parser/form","../cardkit/parser/banner"],function(t,e,n,i,r,a,o,s,c,l,u,h,d,f){function p(t){Function("",t.innerHTML).call(this)}var m='script[type="text/cardscript"]',v='<div class="ck-banner-unit"></div>',g={initCard:function(e,i,r,a){if(!a.isModal){e.find(m).forEach(p,e[0]),e.trigger("card:loaded",{card:e});var o=e.find(".ck-banner-unit");o[0]||(o=t(v)),e.prepend(o)}var s=e.find(".ck-box-unit, .ck-mini-unit, .ck-list-unit, .ck-form-unit, .ck-banner-unit"),l={blank:e.data("cfgBlank")},u=g.initUnit(s,i);u||a.isModal||"false"==l.blank||e.append(n.convertTpl(c.template,{config:l},"data")),a.isModal||(e.append(r.clone()),e.trigger("card:ready",{card:e}))},openCard:function(t,e){e.isModal||t.trigger("card:open",{card:t})},closeCard:function(t,e){e.isModal||t.trigger("card:close",{card:t})},initUnit:function(e,n){var i;return t(e).forEach(function(t){var e=(/ck-(\w+)-unit/.exec(t.className)||[])[1];e&&g[e](t,n)&&(i=!0)}),i},banner:function(t,e){var i=f(t,e);t.innerHTML=n.convertTpl(s.template,i,"data")},box:function(e,r){var a=l(e,r);return a.hasContent||a.hd?(e.innerHTML=n.convertTpl(i.template,a,"data"),!0):(t(e).remove(),void 0)},mini:function(e,i){var r=h(e,i);return r.items=r.items.filter(function(t){return t.title||t.author||t.content&&t.content.length?!0:!1},r),r.items.length||r.hd&&"false"!=r.config.blank?(r.config.limit&&r.config.limit<r.items.length&&(r.items.length=r.config.limit),e.innerHTML=n.convertTpl(a.template,r,"data"),!0):(t(e).remove(),void 0)},list:function(e,i){var a=u(e,i);return a.items=a.items.filter(function(t){var e=this.style;if("more"===e||"menu"===e){if(!t.title)return!1}else if("grid"===e){if(!t.icon)return!1}else if(!t.title&&!t.author)return!1;return!0},a),a.config.limit&&a.config.limit<a.items.length&&(a.items.length=a.config.limit),a.items.length||a.hd&&"false"!=a.config.blank?(e.innerHTML=n.convertTpl(r.template,a,"data"),!0):(t(e).remove(),void 0)},form:function(e,i){var r=d(e,i);return r.items.length||r.hd&&"false"!=r.config.blank?(e.innerHTML=n.convertTpl(o.template,r,"data"),!0):(t(e).remove(),void 0)}};return g}),define("eventmaster",["mo/lang/es5","mo/lang/mix","mo/lang/struct"],function(t,e,n){function i(t){var e=this;t&&(this.subject=t.subject,this.trace=t.trace,this.traceStack=t.traceStack||[]),this.doneHandlers=l(),this.failHandlers=l(),this.observeHandlers=l(),this._alterQueue=l(),this._lastDoneQueue=[],this._lastFailQueue=[],this.status=0,this._argsCache=[],this.pipe={},h.forEach(function(t){this[t]=function(){return e[t].call(e,u.call(arguments))}},this.pipe)}function r(){var t=[],e=[],n=new i;return n._when=[],n._count=n._total=arguments.length,Array.prototype.forEach.call(arguments,function(n,i){function r(n){e[i]||(e[i]=!0,t[i]=n,0===--a._count&&(e.length=0,a._count=a._total,a.resolve.call(a,t)))}var a=this;a._when.push(n.bind(r))},n),n}function a(t,e){return t&&t.then?t.then(e.pipe.resolve,e.pipe.reject).progress(e.pipe.notify):void 0!==t&&e.resolve([t]),t}function o(t){return function(e){var n=this.lib[e];return n||(n=this.lib[e]=new i({subject:e,trace:this.trace,traceStack:this.traceStack})),n[t].apply(n,u.call(arguments,1)),this}}function s(t){t&&(this.trace=t.trace,this.traceStack=t.traceStack),this.lib={}}function c(t){return new s(t)}var l=n.fnQueue,u=Array.prototype.slice,h=["notify","fire","error","resolve","reject","reset","disable","enable"],d=i.prototype={then:function(t,e){var n=this.status;return e?2===n?this._resultCache=e.apply(this,this._argsCache):n||(this.failHandlers.push(e),this._lastFailQueue=this.failHandlers):this._lastFailQueue=[],t?1===n?this._resultCache=t.apply(this,this._argsCache):n||(this.doneHandlers.push(t),this._lastDoneQueue=this.doneHandlers):this._lastDoneQueue=[],this},done:function(t){return this.then(t)},fail:function(t){return this.then(!1,t)},cancel:function(t,e){return t&&this.doneHandlers.clear(t),e&&this.failHandlers.clear(e),this},bind:function(t){return this.status&&t.apply(this,this._argsCache),this.observeHandlers.push(t),this},unbind:function(t){return this.observeHandlers.clear(t),this},progress:function(t){var e=this;return this.observeHandlers.push(function(){e.status||t.apply(this,arguments)}),this},notify:function(t){return this._disalbed?this:(this.status=0,this.observeHandlers.apply(this,t||[]),this)},fire:function(t){if(this._disalbed)return this;this.trace&&this._trace(),t=t||[];var e=this.doneHandlers;return this.doneHandlers=this._alterQueue,this.failHandlers.length=0,this.observeHandlers.apply(this,t),e.apply(this,t),e.length=0,this._alterQueue=e,this},error:function(t){if(this._disalbed)return this;this.trace&&this._trace(),t=t||[];var e=this.failHandlers;return this.failHandlers=this._alterQueue,this.doneHandlers.length=0,this.observeHandlers.apply(this,t),e.apply(this,t),e.length=0,this._alterQueue=e,this},resolve:function(t){return this.status=1,this._argsCache=t||[],this.fire(t)},reject:function(t){return this.status=2,this._argsCache=t||[],this.error(t)},reset:function(){return this.status=0,this._argsCache=[],this.doneHandlers.length=0,this.failHandlers.length=0,this},disable:function(){this._disalbed=!0},enable:function(){this._disalbed=!1},merge:function(t){e.merge(this.doneHandlers,t.doneHandlers),e.merge(this.failHandlers,t.failHandlers),e.merge(this.observeHandlers,t.observeHandlers);var n=t.subject;e.mix(t,this),t.subject=n},_trace:function(){this.traceStack.unshift(this.subject),this.traceStack.length>this.trace&&this.traceStack.pop()},follow:function(){var t=new i;if(t._prevActor=this,this.status)a(this._resultCache,t);else{var e=this._lastDoneQueue.pop();e&&this._lastDoneQueue.push(function(){return a(e.apply(this,arguments),t)});var n=this._lastFailQueue.pop();n&&this._lastFailQueue.push(function(){return a(n.apply(this,arguments),t)})}return t},end:function(){return this._prevActor},all:function(){var t=r.apply(this,this._when);return t},any:function(){var t=r.apply(this,this._when);return t._count=t._total=1,t},some:function(t){var e=r.apply(this,this._when);return e._count=e._total=t,e}},f=s.prototype=function(t){for(var e in d)t[e]=o(e);return t}({});return f.once=f.wait=f.then,f.on=f.bind,f.off=f.unbind,f.promise=function(t){var e=this.lib[t];return e||(e=this.lib[t]=new i({subject:t,trace:this.trace,traceStack:this.traceStack})),e},f.when=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(this.promise(arguments[e]));return r.apply(this,t)},c.Promise=i,c.Event=s,c.when=r,c.pipe=a,c.VERSION="2.1.0",c}),define("../cardkit/bus",["eventmaster"],function(t){return t()}),define("../cardkit/tpl/layout/ctlbar",[],function(){return{template:'<div class="ck-ctl-bar">\n    <input type="button" class="ck-ctl-backward">\n    <input type="button" class="ck-ctl-forward disabled">\n    <input type="button" class="ck-ctl-reload">\n</div>\n'}}),define("moui/overlay",["mo/lang","dollar","eventmaster","mo/template/string"],function(t,e,n,i){function r(t){this.init(t),this.set(this._config)}function a(t){return new a.Overlay(t)}var o=e("body"),s="mouiOverlay",c='<div id="{{id}}" class="{{cname}}">                <header><h2></h2></header>                <article></article>            </div>',l='<span class="loading"><i>.</i><i>.</i><i>.</i></span>',u="加载中",h=0,d={title:"",content:"",className:"moui-overlay",openDelay:50,closeDelay:0,event:{}};return r.prototype={_ns:s,_template:c,_defaults:d,init:function(r){return this.id=this._ns+ ++h,this.event=n(),this._config=t.config({},r,this._defaults),o.append(i.format(this._template,{id:this.id,cname:this._config.className})),this._node=e("#"+this.id),this._header=this._node.find("header").eq(0),this._title=this._header.find("h1"),this._content=this._node.find("article").eq(0),this},set:function(e){return e?(t.config(this._config,e,this._defaults),"string"==typeof e.title&&this.setTitle(e.title),void 0!==e.content&&this.setContent(e.content),void 0!==e.className&&(this._node[0].className=e.className),this):this},setTitle:function(t){return this._title.html(t),this},setContent:function(t){return this._content.html(t),this},showLoading:function(t){return this._node.addClass("loading"),this._title.html((t||u)+l),this},hideLoading:function(){return this._node.removeClass("loading"),this._title.html(this._config.title),this},open:function(){if(clearTimeout(this._actimer),this.isOpened)return this.cancelClose(),this;var t=this,e=arguments;return this.prepareOpen.apply(t,e),this._actimer=setTimeout(function(){t.applyOpen.apply(t,e)},this._config.openDelay),this},close:function(){if(clearTimeout(this._actimer),!this.isOpened)return this.cancelOpen(),this;var t=this,e=arguments;return this.prepareClose.apply(t,e),this._actimer=setTimeout(function(){t.applyClose.apply(t,e)},this._config.closeDelay),this},prepareOpen:function(){this._node.appendTo(o).addClass("rendered"),this.event.fire("prepareOpen",[this])},prepareClose:function(){this.event.fire("prepareClose",[this]),this._node.removeClass("active")},cancelOpen:function(){this._node.removeClass("rendered"),this.event.fire("cancelOpen",[this])},cancelClose:function(){this._node.addClass("active"),this.event.fire("cancelClose",[this])},applyOpen:function(){this.isOpened=!0,this._node.addClass("active"),this.event.fire("open",[this])},applyClose:function(){this.isOpened=!1,this._content.empty(),this._node.removeClass("rendered"),this.event.fire("close",[this])},destroy:function(){return this._node.remove(),this.event.fire("destroy",[this]),this}},a.Overlay=r,a}),define("moui/growl",["dollar","mo/lang","mo/template","moui/overlay"],function(t,e,n,i){function r(t){t._exptimer=setTimeout(function(){t.close()},t._config.expires)}function a(t){return new a.Growl(t)}var o="mouiGrowl",s='<div id="{{id}}" class="moui-growl">                <header><h2></h2></header>                <article></article>            </div>',c="corner-",l={className:"moui-growl",closeDelay:300,corner:"center",expires:1400,keepalive:!1},u=e.construct(i.Overlay);return e.mix(u.prototype,{_ns:o,_template:s,_defaults:e.merge({},l,u.prototype._defaults),set:function(t){var e=this;return e.superClass.set.call(e,t),t.corner&&t.corner!==e._currentCorner&&(e._currentCorner&&e._node.removeClass(c+e._currentCorner),e._node.addClass(c+t.corner),e._currentCorner=t.corner),void 0!==t.expires&&(clearTimeout(e._exptimer),e.isOpened&&r(e)),e},applyOpen:function(){return clearTimeout(this._exptimer),-1!=this._config.expires&&r(this),this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){this.isOpened=!1,this._node.removeClass("rendered"),this.event.fire("close",[this]),this._config.keepalive||this.destroy()}}),a.Growl=u,a}),define("../cardkit/view/growl",["mo/lang","dollar","moui/growl"],function(t,e,n){function i(i,s){var c,l={corner:"bottom"};i.nodeName?(i=e(i),c=i[0][r],c&&o[c]&&o[c].close(),c=i[0][r]=++a,s=t.mix(l,i.data(),s)):s=t.mix(l,i),s.className="ck-growl";var u=n(s);return c&&(o[c]=u),u}var r="_ckGrowlUid",a=0,o={};return i}),define("moui/control",["mo/lang","dollar","eventmaster"],function(t,e,n){function i(t,e){this.init(t,e),this.set(this._config)}function r(t,e){return new r.Control(t,e)}var a={field:null,label:null,numField:null,numStep:1,enableVal:1,disableVal:0,enableLabel:"",disableLabel:"",loadingLabel:"稍等..."};return i.prototype={_defaults:a,init:function(i,r){this.event=n();var a=this._node=e(i);a.hasClass("enabled")&&(this.isEnabled=!0),this._numField=[],r=t.mix({field:a,label:a},this.data(),r),this.setNodes(r),this._label[0]&&(this._isLabelClose=this._label.isEmpty()),this._numField[0]&&(this._isNumFieldClose=this._numField.isEmpty()),this.isEnabled?(r.enableVal=this.val(),r.enableLabel=this.label()):(r.disableVal=this.val(),r.disableLabel=this.label()),this._config=t.config({},r,this._defaults)},set:function(e){return e?(t.mix(this._config,e),this.setNodes(e),this):this},setNodes:function(t){return void 0!==t.field&&(this._field=t.field?e(t.field,"string"==typeof t.field&&this._node).eq(0):[]),void 0!==t.label&&(this._label=t.label?e(t.label,"string"==typeof t.label&&this._node).eq(0):[]),void 0!==t.numField&&(this._numField=t.numField?e(t.numField,"string"==typeof t.numField&&this._node).eq(0):[]),this},val:function(t){return this._field[0]?"A"===this._field[0].nodeName?this._field.attr("href",t):this._field.val(t):void 0},label:function(t){return this._label[0]?this._isLabelClose?this._label.val(t):this._label.html(t):void 0},num:function(t){return this._numField[0]?this._isNumFieldClose?this._numField.val(null!=t?parseFloat(this._numField.val())+t:void 0):this._numField.html(null!=t?parseFloat(this._numField.html())+t:void 0):void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this.label(this._config.loadingLabel),this},hideLoading:function(){return this._node.removeClass("loading"),this},toggle:function(){return this.isEnabled?this.disable():this.enable(),this},enable:function(){return this.isEnabled?this:(this.isEnabled=!0,this._node.addClass("enabled"),this.val(this._config.enableVal),this.num(this._config.numStep),this._config.enableLabel&&this.label(this._config.enableLabel),this.event.reset("disable").resolve("enable",[this]),this)},disable:function(){return this.isEnabled?(this.isEnabled=!1,this._node.removeClass("enabled"),this.val(this._config.disbleVal),this.num(0-this._config.numStep),this._config.disableLabel&&this.label(this._config.disableLabel),this.event.reset("enable").resolve("disable",[this]),this):this}},r.Control=i,r}),define("moui/picker",["mo/lang","dollar","eventmaster","moui/control"],function(t,e,n,i){function r(t,e){this.init(t,e),this.set(this._config)}function a(t){s.call(this,"enable",t),this.event.fire("change",[this,t])}function o(t){s.call(this,"disable",t),this.event.fire("change",[this,t])}function s(t,e){if("enable"===t)if(this._config.multiselect)this._allSelected.push(e);else{var n=this._lastSelected;this._lastSelected=e,n&&n.disable()}else if(this._config.multiselect){var i=this._allSelected.indexOf(e);-1!==i&&this._allSelected.splice(i,1)}else{if(e&&this._lastSelected!==e)return;this._lastSelected=null}this._field[0]&&this._field.val(this.val())}function c(t,e){return new c.Picker(t,e)}var l="_moPickerOid",u={field:'input[type="hidden"]',options:".option",ignoreRepeat:!1,ignoreStatus:!1,multiselect:!1};return r.prototype={_defaults:u,init:function(i,r){return this._uoid=0,this.event=n(),this._node=e(i),this._options=[],r=t.mix({},this.data(),r),this._config=t.config({},r,this._defaults),this},set:function(n){return n?(t.mix(this._config,n),void 0!==n.multiselect&&(n.multiselect?this._allSelected||(this._allSelected=[]):(this._allSelected=null,this._lastSelected=null)),void 0!==n.field&&(this._field=n.field?e(n.field,"string"==typeof n.field&&this._node).eq(0):[]),n.options&&(this._options.forEach(this.removeOption,this),e(n.options,this._node).forEach(this.addOption,this)),this):this},addOption:function(t){if(t=e(t)[0],!t[l]){t[l]=++this._uoid;var n=i(t,{enableVal:t.value,label:!1});return n.event.bind("enable",a.bind(this)).bind("disable",o.bind(this)),this._options.push(n),n.isEnabled&&s.call(this,"enable",n),this}},removeOption:function(t){var e;return t.constructor===i.Control?(e=t,t=t._node[0]):e=this.getOption(t),this.unselect(t),e&&this._options.splice(this._options.indexOf(e),1),this},getOption:function(t){if("number"==typeof t)t=this._options[t];else if("string"==typeof t)t=this._options.filter(function(e){return e.val()===t
})[0];else{var n=e(t)[0][l];if(!n)return null;t=this._options.filter(function(t){return t._node[0][l]===n})[0]}return t},getOptions:function(){return this._options},getSelected:function(){return this._config.multiselect?this._allSelected||[]:this._lastSelected?[this._lastSelected]:[]},val:function(){return this._config?this._config.multiselect?this._allSelected.map(function(t){return t.val()}):this._lastSelected?this._lastSelected.val():void 0:void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this},hideLoading:function(){return this._node.removeClass("loading"),this},undo:function(){return this._lastActionTarget&&this._lastActionTarget.toggle(),this},selectAll:function(){return this._config.multiselect&&this._options.forEach(function(t){t.enable()}),this._lastActionTarget=null,this},unselectAll:function(){return this._config.multiselect?(this._options.forEach(function(t){t.disable()}),this._lastActionTarget=null):this.undo(),this},selectInvert:function(){return this._config.multiselect&&this._options.forEach(function(t){t.toggle()}),this._lastActionTarget=null,this},select:function(t){var e=this.getOption(t);if(e)if(!this._config.multiselect&&this._config.ignoreStatus)s.call(this,"enable",e),this.event.fire("change",[this,e]);else{if((this._config.multiselect&&-1!==this._allSelected.indexOf(e)||!this._config.multiselect&&this._lastSelected===e)&&!this._config.ignoreRepeat)return this.unselect(t);this._lastActionTarget=e.enable()}return this},unselect:function(t){if(t){var e=this.getOption(t);e&&(this._lastActionTarget=e.disable())}else this.unselectAll();return this}},c.Picker=r,c}),define("moui/actionview",["dollar","mo/lang","mo/template/string","moui/overlay","moui/picker"],function(t,e,n,i,r){function a(t){return new a.ActionView(t)}var o=e.mix,s="mouiActionView",c='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <div class="content">                        <header><h1></h1></header>                        <div class="desc"></div>                        <article></article>                    </div>                </div>                <footer>                    <span class="cancel"></span>                    <span class="confirm" data-is-default="true"></span>                </footer>            </div>',l={className:"moui-actionview",closeDelay:500,confirmText:"确认",cancelText:"取消",options:null,multiselect:!1},u=e.construct(i.Overlay);return o(u.prototype,{_ns:s,_template:c,_defaults:e.merge({},l,u.prototype._defaults),init:function(t){return this.superClass.init.call(this,t),this._wrapper=this._node.find(".wrapper").eq(0),this._actionsWrapper=this._content,this._wrapperContent=this._wrapper.find(".content").eq(0),this._content=this._wrapper.find(".desc").eq(0),this._footer=this._node.find("footer").eq(-1),this._confirmBtn=this._footer.find(".confirm"),this._cancelBtn=this._footer.find(".cancel"),this},set:function(e){if(!e)return this;if(this.superClass.set.call(this,e),void 0!==e.options){this._actionsWrapper.empty();var n=e.options?t(e.options).clone():[];n.length?(this._actionsWrapper.append(n),this._picker=r(this._actionsWrapper,{options:n,multiselect:this._config.multiselect,ignoreStatus:!this._config.multiselect}),this._node.removeClass("confirm-kind")):this._node.addClass("confirm-kind")}return void 0!==e.multiselect&&(e.multiselect?this._footer.addClass("multi"):this._footer.removeClass("multi")),e.confirmText&&this._confirmBtn.html(e.confirmText),e.cancelText&&this._cancelBtn.html(e.cancelText),this},val:function(){return this._picker?this._picker.val():void 0},confirm:function(){return this.event.fire("confirm",[this,this._picker]),this.ok()},cancel:function(){return this.event.fire("cancel",[this,this.picker]),this.ok()},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){if(!this._config.multiselect&&this._picker){var t=this;this._picker.event.once("change",function(){t.confirm()})}this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){!this._config.multiselect&&this._picker&&this._picker.event.reset(),this.superClass.applyClose.apply(this,arguments)}}),u.prototype.done=u.prototype.ok,["select","unselect","undo","selectAll","unselectAll","selectInvert"].forEach(function(t){this[t]=function(){return this._picker[t].apply(this._picker,arguments)}},u.prototype),a.ActionView=u,a}),define("../cardkit/view/actionview",["mo/lang","dollar","moui/actionview","../cardkit/bus"],function(t,e,n,i){function r(t,c){var l=t;if("object"==typeof t?(t=e(t),l=t[0][a]):t=!1,l&&s[l])return s[l].set(c);t&&(l=t[0][a]=++o),c=c||{},c.className="ck-actionview";var u=s[l]=n(c),h={component:u};return u.event.bind("prepareOpen",function(t){r.current=t,i.fire("actionView:prepareOpen",[t])}).bind("cancelOpen",function(t){r.current=null,i.fire("actionView:cancelOpen",[t])}).bind("open",function(e){i.fire("actionView:open",[e]),t&&t.trigger("actionView:open",h)}).bind("close",function(){r.current=null,i.unbind("actionView:confirmOnThis"),i.fire("actionView:close",[u]),t&&t.trigger("actionView:close",h)}).bind("cancel",function(){t&&t.trigger("actionView:cancel",h)}).bind("confirm",function(e,n){if(i.fire("actionView:confirmOnThis",[e]),t&&t.trigger("actionView:confirm",h),n&&n._lastSelected){var r=n._lastSelected._node.attr("target");r&&i.fire("actionView:jump",[e,n.val(),r])}}),u}var a="_ckActionViewUid",o=0,s={};return r}),define("moui/modalview",["dollar","mo/lang","mo/template/string","moui/overlay"],function(t,e,n,i){function r(t){return new r.ModalView(t)}var a=e.mix,o="mouiModalView",s='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <header>                        <button type="button" class="confirm" data-is-default="true"></button>                        <button type="button" class="cancel"></button>                        <h1></h1>                    </header>                    <article><div class="content"></div></article>                </div>            </div>',c={className:"moui-modalview",iframe:!1,hideConfirm:!1,confirmText:"确认",cancelText:"取消"},l=e.construct(i.Overlay);return a(l.prototype,{_ns:o,_template:s,_defaults:e.merge({},c,l.prototype._defaults),init:function(t){return this.superClass.init.call(this,t),this._wrapper=this._node.find(".wrapper").eq(0),this._contentWrapper=this._wrapper.find("article").eq(0),this._content=this._contentWrapper.find(".content").eq(0),this._confirmBtn=this._header.find(".confirm"),this._cancelBtn=this._header.find(".cancel"),this},set:function(t){if(!t)return this;var e=this;return e.superClass.set.call(e,t),void 0!==t.content?e._config.iframe=null:t.iframe&&e._setIframeContent(t),void 0!==t.hideConfirm&&(t.hideConfirm?this._confirmBtn.hide():this._confirmBtn.show()),t.confirmText&&this._confirmBtn.html(t.confirmText),t.cancelText&&this._cancelBtn.html(t.cancelText),e},setContent:function(t){return this.superClass.setContent.call(this,t),t&&this.event.fire("contentchange",[this]),this},_setIframeContent:function(){var e=this;this._clearIframeContent(),e.setContent(""),e.showLoading(),e._iframeContent=t('<iframe class="moui-modalview-iframebd" frameborder="0" scrolling="no" style="visibility:hidden;width:100%;"></iframe>').bind("load",function(){try{if(!this.contentWindow.document.body.innerHTML)return;if(e._iframeWindow=t(this.contentWindow),!e._iframeContent&&e._iframeWindow[0].location.href!==e._config.iframe)return;e._iframeContent[0].style.visibility="",e.event.resolve("frameOnload",[e]),e.hideLoading()}catch(n){}}).appendTo(e._content)},_clearIframeContent:function(){this._iframeContent&&(this._iframeContent.remove(),this._iframeContent=null),this.event.reset("frameOnload")},confirm:function(){return this.event.fire("confirm",[this]),this},cancel:function(){return this.event.fire("cancel",[this]),this.ok(),this},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){this.superClass.applyOpen.apply(this,arguments),this._config.iframe&&this._iframeContent.attr("src",this._config.iframe)},applyClose:function(){this._clearIframeContent(),this._contentWrapper[0].scrollTop=0,this.superClass.applyClose.apply(this,arguments)}}),l.prototype.done=l.prototype.ok,r.ModalView=l,r}),define("mo/network/ajax",["mo/browsers"],function(browsers,require,exports){var httpParam=function(t){var e=[];if(t.constructor==Array)for(var n=0;t.length>n;n++)e.push(t[n].name+"="+encodeURIComponent(t[n].value));else for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return e.join("&").replace(/%20/g,"+")},ajax=function(s){function httpSuccess(t){try{return!t.status&&"file:"==location.protocol||t.status>=200&&300>t.status||304==t.status||1223==t.status||browsers.safari&&!t.status}catch(e){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),xml="xml"==type||!type&&ct&&ct.indexOf("xml")>=0,data=xml?r.responseXML:r.responseText;if(xml&&"parsererror"==data.documentElement.tagName)throw"parsererror";return"script"==type&&eval.call(window,data),"json"==type&&(data=eval("("+data+")")),data}var options={type:s.type||"GET",url:s.url||"",data:s.data||null,dataType:s.dataType,contentType:s.contentType===!1?!1:s.contentType||"application/x-www-form-urlencoded",username:s.username||null,password:s.password||null,timeout:s.timeout||0,processData:void 0===s.processData?!0:s.processData,beforeSend:s.beforeSend||function(){},complete:s.complete||function(){},handleError:s.handleError||function(){},success:s.success||function(){},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}};options.data&&options.processData&&"string"!=typeof options.data&&(options.data=httpParam(options.data)),options.data&&"get"==options.type.toLowerCase()&&(options.url+=(options.url.match(/\?/)?"&":"?")+options.data,options.data=null);var status,data,requestDone=!1,xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;xhr.open(options.type,options.url,!0,options.username,options.password);try{options.data&&options.contentType!==!1&&xhr.setRequestHeader("Content-Type",options.contentType),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Accept",s.dataType&&options.accepts[s.dataType]?options.accepts[s.dataType]+", */*":options.accepts._default)}catch(e){}options.beforeSend&&options.beforeSend(xhr);var onreadystatechange=function(t){if(!requestDone&&xhr&&(4==xhr.readyState||"timeout"==t)){if(requestDone=!0,ival&&(clearInterval(ival),ival=null),status="timeout"==t&&"timeout"||!httpSuccess(xhr)&&"error"||"success","success"==status){try{data=httpData(xhr,options.dataType)}catch(e){status="parsererror"}options.success(data,status)}else options.handleError(xhr,status);options.complete(xhr,status),xhr=null}},ival=setInterval(onreadystatechange,13);return options.timeout>0&&setTimeout(function(){xhr&&(xhr.abort(),requestDone||onreadystatechange("timeout"))},options.timeout),xhr.send(options.data),xhr};exports.ajax=ajax,exports.params=httpParam}),define("mo/network",["mo/lang","mo/network/ajax"],function(_,net,require,exports){var window=this,uuid4jsonp=1;_.mix(exports,net),exports.getScript=function(t,e){var n=_.isWindow(this)?this.document:document,i=n.createElement("script");i.type="text/javascript",i.async="async",e?_.isFunction(e)&&(e={callback:e}):e={},e.charset&&(i.charset=e.charset),i.src=t;var r=n.getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(t,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0,!n&&e.callback&&e.callback())},r.insertBefore(i,r.firstChild)},exports.getStyle=function(t){var e=this.document||document,n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",t);var i=e.getElementsByTagName("head")[0];i.appendChild(n)};var RE_DOMAIN=/https?\:\/\/(.+?)\//;exports.getJSON=function(t,e,n,i){var r=t.match(RE_DOMAIN);if((!e||_.isFunction(e))&&(i=n,n=e,e={}),n&&!(i&&i.isScript||r&&r[1]!==window.location.host))return exports.ajax({url:t,data:e,success:n,error:i&&i.error,dataType:"json"}),!0;i=_.mix({charset:"utf-8",callback:"__oz_jsonp"+ ++uuid4jsonp},i||{}),i.random&&(e[i.random]=+new Date);var a=i.callbackName||"jsoncallback";e[a]=i.callback,t=[t,/\?/.test(t)?"&":"?",exports.httpParam(e)].join(""),n&&_.ns(i.callback,n),delete i.callback,exports.getScript(t,i)},exports.getRequest=function(t,e){var n=new Image;n.onload=function(){n=null},n.src=e?[t,/\?/.test(t)?"&":"?","string"==typeof e?e:exports.httpParam(e)].join(""):t},exports.parseJSON=function(json){json=json.replace(/^[\w(<\/*!\s]*?\{/,"{").replace(/[^\}]*$/,"");try{json=window.JSON?window.JSON.parse(json):eval(json)}catch(ex){json=!1}return json}}),define("../cardkit/view/modalcard",["dollar","mo/network","moui/modalview","../cardkit/supports"],function(t,e,n,i){var r=n({className:"ck-modalview",closeDelay:400}),a=r.set;return r.set=function(n){if(!n)return this;var i=this,r=n.jsonUrl||n.url;return r&&(n.content="",i.showLoading(),e.ajax({url:r,dataType:n.jsonUrl?"json":"text",success:function(t){n.jsonUrl&&(t=t.html),i.setContent(t),i.hideLoading()}})),n.iframeUrl&&(n.iframe=n.iframeUrl),n.source&&(n.content=t("."+n.source).map(function(e){var n=t(e).attr("type");return"text/cardscript"===n||"text/jscode"===n?"<script>"+e.innerHTML+"</script>":e.innerHTML}).join("")),a.call(this,n)},i.BROWSER_CONTROL&&(r.ok=r.done=function(){return history.back(),this.event.promise("close")}),r.event.bind("confirm",function(t){t.event.fire("confirmOnThis",arguments)}).bind("close",function(t){t.event.unbind("confirmOnThis")}),r}),define("moui/slider",["mo/lang","dollar","eventmaster"],function(t,e,n){function i(t,e){this.init(t,e)}function r(t,e){return new r.Slider(t,e)}return i.prototype={init:function(t){var i,r=this._node=e(t);this.event=n(),r.data("init")||(r.data("init",!0),this._field=i=r.find(".slider-field"),this._hoverArea=r.find(".slider-hover"),this._selectedArea=r.find(".slider-selected"),this._step=i.attr("step"),this._max=i.attr("max"),this._min=i.attr("min"),this._stepWidth=this._step*r.width()/(this._max-this._min))},calc:function(t){var e=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=this._node,i=this._stepWidth,r=this._step,a=e-n.offset().left;return a>n.width()?a=n.width():0>a&&(a=0),Math.ceil(a/i)*r},val:function(t){if(this._field[0]){var e=this._field.val(t);return void 0!==t&&this.event.fire("change"),e}},show:function(t){var e=this._stepWidth,n=this._selectedArea,i=this._hoverArea;i.hide(),n.css({width:t*e}).show()},pretend:function(t){var e=this._stepWidth,n=this._selectedArea,i=this._hoverArea,r=t*e;i.data("width")!=r&&(n.hide(),i.css({width:r}).show().data("width",r))}},r.Slider=i,r}),define("../cardkit/view/stars",["mo/lang","dollar","mo/network","moui/slider"],function(t,e,n,i){function r(t){t=e(t);var n=t[0][a];if(n&&s[n])return s[n];n=t[0][a]=++o;var r=s[n]=i(t);return r.event.bind("change",function(){var t=r.val();r.show(t)}),r}var a="_ckStarsUid",o=0,s={};return r.gc=function(t){for(var e in s)t(s[e])&&delete s[e]},r}),define("../cardkit/view/picker",["mo/lang","dollar","mo/network","moui/picker"],function(t,e,n,i){function r(t,e){var i=t.jsonUrl||t.url;if(i){var r;i=i.replace(/\?(.+)$/,function(t,e){return r=e.replace(/#.*/,""),""}),n.ajax({url:i,data:r,type:t.method||"post",dataType:t.jsonUrl?"json":"text",success:e})}else e(!1)}function a(n,a){n=e(n);var l=n[0][o];if(l&&c[l])return c[l].set(a);l=n[0][o]=++s,a=t.mix({options:".ck-option"},a||{});var u=c[l]=i(n,a);return u.event.bind("change",function(t,e){var i,a=e.data(),o={component:t};t.showLoading(),i=e.isEnabled?{method:a.requestMethod,url:a.enableUrl,jsonUrl:a.enableJsonUrl}:{method:a.requestMethod,url:a.disableUrl,jsonUrl:a.disableJsonUrl},r(i,function(e){t.hideLoading(),e!==!1&&(t.responseData=e,n.trigger("picker:response",o))}),n.trigger("picker:change",o)}),u}var o="_ckPickerUid",s=0,c={};return a.gc=function(t){for(var e in c)t(c[e])&&delete c[e]},a}),define("../cardkit/view/control",["mo/lang","dollar","mo/network","moui/control"],function(t,e,n,i){function r(t,n){t=e(t);var i=t[0][a];if(i&&s[i])return s[i].set(n);i=t[0][a]=++o;var c=s[i]=new r.Control(t,n);return c.event.bind("enable",function(e){t.trigger("control:enable",{component:e})}).bind("disable",function(e){t.trigger("control:disable",{component:e})}),c}var a="_ckControlUid",o=0,s={},c=t.construct(i.Control);return t.mix(c.prototype,{enable:function(){var t=this.data();return this.request({method:t.requestMethod,url:t.enableUrl,jsonUrl:t.enableJsonUrl},function(){this.superClass.enable.call(this)})},disable:function(){var t=this.data();return this.request({method:t.requestMethod,url:t.disableUrl,jsonUrl:t.disableJsonUrl},function(){this.superClass.disable.call(this)})},request:function(t,e){var i=this,r=t.jsonUrl||t.url;if(r){var a;r=r.replace(/\?(.+)$/,function(t,e){return a=e.replace(/#.*/,""),""}),i.showLoading(),n.ajax({url:r,data:a,type:t.method||"post",dataType:t.jsonUrl?"json":"text",success:function(t){i.hideLoading(),i.responseData=t,e.call(i)}})}else e.call(i);return this}}),r.Control=c,r.gc=function(t){for(var e in s)t(s[e])&&delete s[e]},r}),define("momo/base",["mo/lang/es5","mo/lang/type","mo/lang/mix"],function(t,e,n){function i(t,e,n){(!e||o(e))&&(n=e,e={}),this._listener=n;var i=n&&++s;this.event={},this.EVENTS.forEach(function(t){this[t]=t+(n?"_"+i:"")},this.event),this.node=t,this._config={event:this.EVENTS[0]},this.config(e),this.enable()}function r(){}function a(t,e,n){return new a.Class(t,e,n)}var o=e.isFunction,s=0,c=!1;try{document.createEvent("TouchEvent"),c=!0}catch(l){}return i.prototype={SUPPORT_TOUCH:c,PRESS:c?"touchstart":"mousedown",MOVE:c?"touchmove":"mousemove",RELEASE:c?"touchend":"mouseup",EVENTS:[],DEFAULT_CONFIG:{namespace:""},config:function(t){var e=this._config.namespace;n.merge(n.mix(this._config,t),this.DEFAULT_CONFIG);var i=this._config.namespace||"";return this.EVENTS.forEach(function(t){this[t]=this[t].replace(e||/^/,i)},this.event),this},enable:function(){var t=this;return t.bind(t.PRESS,t._press||(t._press=t.press.bind(t))).bind(t.MOVE,t._move||(t._move=t.move.bind(t))).bind(t.CANCEL,t._cancel||(t._cancel=t.cancel.bind(t))).bind(t.RELEASE,t._release||(t._release=t.release.bind(t))),t._listener&&t.bind(this.event[this._config.event],t._listener),t},disable:function(){var t=this;return t.unbind(t.PRESS,t._press).unbind(t.MOVE,t._move).unbind(t.CANCEL,t._cancel).unbind(t.RELEASE,t._release),t._listener&&t.unbind(this.event[this._config.event],t._listener),t},once:function(t,e,n){function i(){return r.unbind(t,i,n),e.apply(this,arguments)}var r=this;this.bind(t,i,n)},bind:r,unbind:r,trigger:r,press:r,move:r,release:r,cancel:r},a.Class=i,a}),define("momo/scroll",["mo/lang","momo/base"],function(t,e){function n(t,e,i){return new n.Class(t,e,i)}var i=t.construct(e.Class);return t.mix(i.prototype,{EVENTS:["scrolldown","scrollup","scrollstart","scrollend"],DEFAULT_CONFIG:{directThreshold:5,scrollEndGap:5},watchScroll:function(t){this.scrollingNode=t},checkScollDirection:function(t){var e={target:this.node},n=t-this._lastY,i=this._config.directThreshold;0-i>n?(this._scrollDown!==!0&&this.trigger(e,this.event.scrolldown),this._lastY=t,this._scrollDown=!0):n>i&&(this._scrollDown!==!1&&this.trigger(e,this.event.scrollup),this._lastY=t,this._scrollDown=!1)},press:function(t){var e=this,n=this.SUPPORT_TOUCH?t.touches[0]:t;if(e._scrollDown=null,e._lastY=n.clientY,e._scrollY=null,e._ended=!1,e.scrollingNode){var i=e._scrolling;e._scrolling=!1;var r=e._tm=t.timeStamp;e.once(e.MOVE,function(){e.once("scroll",function(){r===e._tm&&(i||(e._started=!0,e.trigger({target:e.node},e.event.scrollstart),e._ended&&(e._ended=!1,e.trigger({target:e.node},e.event.scrollend))))},e.scrollingNode)})}},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this.checkScollDirection(e.clientY),this.scrollingNode&&(this._scrollY=this.scrollingNode.scrollTop)},release:function(t){var e=this,n=this.SUPPORT_TOUCH?t.changedTouches[0]:t,i={target:e.node};if(this.checkScollDirection(n.clientY),null!==e._scrollY){var r=e.scrollingNode,a=Math.abs(r.scrollTop-e._scrollY)||0;if(e._scrollY>=0&&e._scrollY<=r.scrollHeight+r.offsetHeight&&e._config.scrollEndGap>a)e._started?(e.trigger(i,e.event.scrollend),e._started=!1):e._ended=!0;else{var o=e._tm;e._scrolling=!0,e.once("scroll",function(){o===e._tm&&(e._scrolling=!1,e._started=!1,e.trigger(i,e.event.scrollend))},r)}e._scrollY=null}else e._started&&(e._started=!1,e.trigger(i,e.event.scrollend))}}),n.Class=i,n}),define("momo/drag",["mo/lang","momo/base"],function(t,e){function n(t,e,i){return new n.Class(t,e,i)}var i=t.construct(e.Class);return n.Class=i,n}),define("momo/swipe",["mo/lang","momo/base"],function(t,e){function n(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function i(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function r(t,e){var n,r,a=i(t,e),o={down:a>=45&&135>a,left:a>=135||-135>=a,up:-45>a&&a>-135,right:a>=-45&&45>=a};for(r in o)if(o[r]){n=r;break}return n}function a(t,e,n){return new a.Class(t,e,n)}var o=t.construct(e.Class);return t.mix(o.prototype,{EVENTS:["swipeup","swipedown","swiperight","swipeleft"],DEFAULT_CONFIG:{timeThreshold:200,distanceThreshold:20},press:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._startX=e.clientX,this._startY=e.clientY,this._moveX=0/0,this._moveY=0/0,this._startTime=t.timeStamp},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._moveX=e.clientX,this._moveY=e.clientY},release:function(t){var e=this,i={x:e._startX,y:e._startY},a={x:e._moveX,y:e._moveY},o=n(i,a),s=r(i,a),c=t.timeStamp-e._startTime;e._config.timeThreshold>c&&o>e._config.distanceThreshold&&e.trigger(t,e.event["swipe"+s])}}),a.Class=o,a}),define("momo/tap",["mo/lang","momo/base"],function(t,e){function n(t){return t._moveTarget&&t._moveTarget!==t._startTarget||Math.abs(t._movePosX-t._startPosX)>t._config.tapRadius||Math.abs(t._movePosY-t._startPosY)>t._config.tapRadius?!0:void 0}function i(){}function r(t,e,n){return new r.Class(t,e,n)}var a=t.construct(e.Class);return t.mix(a.prototype,{EVENTS:["tap","doubletap","hold","tapstart","tapcancel"],DEFAULT_CONFIG:{tapRadius:10,doubleTimeout:300,tapThreshold:0,holdThreshold:500},press:function(t){var e=this,r=e.SUPPORT_TOUCH?t.touches[0]:t;e._startTime=t.timeStamp,e._startTarget=r.target,e._startPosX=r.clientX,e._startPosY=r.clientY,e._movePosX=e._movePosY=e._moveTarget=0/0,e._started=!1,e._pressTrigger=function(){e._started=!0,e.trigger(t,e.event.tapstart),e._pressTrigger=i},e._activeTimer=setTimeout(function(){n(e)||e._pressTrigger()},e._config.tapThreshold)},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._moveTarget=e.target,this._movePosX=e.clientX,this._movePosY=e.clientY},release:function(t){var e=this,i=t.timeStamp,r=n(e);return clearTimeout(e._activeTimer),r||i-e._startTime<e._config.tapThreshold?(r||(e._firstTap=i),e._started&&e.trigger(t,e.event.tapcancel),void 0):(e._started||e._pressTrigger(),i-e._startTime>e._config.holdThreshold+e._config.tapThreshold?e.trigger(t,e.event.hold):e._firstTap&&i-e._firstTap<e._config.doubleTimeout?(t.preventDefault(),e.trigger(t,e.event.doubletap),e._firstTap=0):(e.trigger(t,e.event.tap),e._firstTap=i),void 0)},cancel:function(t){clearTimeout(this._activeTimer),this._started&&this.trigger(t,this.event.tapcancel)}}),r.Class=a,r}),define("mo/easing/base",[],function(){return{def:"ease",positions:{linear:[.25,.25,.75,.75],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},values:{linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out"},functions:{linear:function(t,e,n,i){return n+i*t},ease:function(t,e,n,i){return(-Math.cos(t*Math.PI)/2+.5)*i+n},easeIn:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOut:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOut:function(t,e,n,i,r){return 1>(e/=r/2)?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n}}}}),define("choreo",["mo/lang/es5","mo/lang/mix","mo/easing/base","mo/mainloop","eventmaster"],function(t,e,n,i,r){function a(t,e,n,i){for(var r in t)n=e?"-"+e+"-"+r:r,y(n)in I.style&&(t[r]=n,O||"transition"!==r||(O=j[e]),i=!0);return i}function o(t){if(t||(t="_oz_choreo_"+q++),Y[t])return Y[t];var e=this;Y[t]=this,this.name=t,this._promise=new r.Promise,this._reset_promise=new r.Promise,this._count=0,this._optCache=[],F?this._runningActors=[]:i.addStage(t),this._reset_promise.bind(function(){e._promise.reset()})}function s(t,e){Array.isArray(t)&&(this.members=t,t={_promise:r.when.apply(r,this.members.map(function(t){return t.follow()}))},t._promise.bind(t._promise.pipe.disable)),this._opt=t,this.stage=e}function c(t,e){if(F){var n=t._runningActors;t.isPlaying()&&(n.forEach(function(n){e&&e(t.name,n)}),n.state=0,n.length=0)}else e&&e(t.name)}function l(t){var e=t.target,n=parseFloat(t._current_from||t.from),i=parseFloat(t.to),r=i-n,a=t._startTime?+new Date-t._startTime:0;0>a&&(a=0);var o=a/(t.duration||1),s=m(e),c=X[s];if(c&&c[t.prop]===t?(clearTimeout((c[t.prop]||{})._runtimer),delete c[t.prop]):o=0,o){var l=b(s);if(e.style[ee]=l,1>o){Q[t.easing]&&(o=Q[t.easing](o,a,0,1,t.duration));var u=w(t.from,t.to);n=n+r*o+u}else n=t.to;_(e,t.prop,n)}}function u(t){var e=t.target,n=m(e),i=X[n];i&&delete i[t.prop];var r=b(n);e.style[ee]=r,_(e,t.prop,t.to)}function h(t){var e=t.target,n=t.prop,i=m(e),r=X[i],a=t.from||g(e,n);if(a==t.to){var o=!0;if(r&&delete r[n],H[n])for(var s in r)if(H[s]){o=!1;break}return o&&t._promise.resolve([{target:t.target,succ:!0}]).disable(),void 0}t._current_from=a,t._startTime=+new Date+(t.delay||0),r[n]=t,_(e,n,a);var c=b(i);t._runtimer=setTimeout(function(){delete t._runtimer,e.style[ee]=c,_(e,n,t.to)},0)}function d(t,e){var n=e.target,r=parseFloat(e.to),a=e.from||g(e.target,e.prop),o=w(a,e.to);o&&0>(""+a).indexOf(o)&&(a=0),e._current_from=a;var s=parseFloat(a),c=e.delay&&"_oz_anim_"+B++;i.addTween(t,s,r,e.duration,{easing:e.easing,delay:e.delay,step:function(t){_(n,e.prop,t+o)},renderId:c,callback:function(){e._promise.resolve([{target:n,succ:!0}]).disable()}}),e._render=i.getRender(c)}function f(t,e){var n=p(t);return Object.keys(n).map(function(t){return e({prop:t,to:this[t]})},n)}function p(t){var e={};return t.split(N).forEach(function(t){var e=t.match(/([^\(\)]+)/g),n=e[1].split(/\,\s*/),i=H[e[0]],r=3===i,a=0>i||1>=n.length,o=a?[""]:["X","Y","Z"];i&&n.forEach(function(t,n){if(t&&o.length>=n&&r||a&&1>n||!a&&2>n){var i=e[0].replace("3d","")+o[n];this[i]=t}},this)},e),e}function m(t){var e=t._oz_fx;return e||(e=++W,t._oz_fx=e,t.removeEventListener(O,v),t.addEventListener(O,v)),X[e]||(X[e]={}),e}function v(t){if(t.target===this){var e=this,n=this._oz_fx,i=X[n];if(i)if(t.propertyName===J){for(var r in H)delete i[r];var a=z[n]||[];this.style[ee]=b(n),a.forEach(function(t){t.resolve([{target:e,succ:!0}]).disable()})}else{var o=i[t.propertyName];o&&(delete i[o.prop],this.style[ee]=b(n),o._promise&&o._promise.resolve([{target:this,succ:!0}]).disable())}}}function g(t,e){if(H[e])return k(t,e)||0;if(e===J)return t&&t.style[te||e]||R;var n=y(e),i=t&&(t.style[n]||(V?V(t,"").getPropertyValue(e):t.currentStyle[e]));return i&&/\d/.test(i)&&i||0}function _(t,e,n){H[e]?J&&k(t,e,n):t.style[y(e)]=n}function k(t,n,i){var r=p(g(t,J));if(!i)return r[n]||"rotate"===n&&"0deg";var a=p(n+"("+i+")");e.mix(r,a),t.style[te]=Object.keys(r).map(function(t){return t+"("+this[t]+")"},r).join(" ")}function b(t){var e=X[t];if(e){var n,i=[];for(var r in e)n=e[r],n&&n.prop&&i.push([H[n.prop]&&J||n.prop,(n.duration||0)+"ms",G[n.easing]||"linear",(n.delay||0)+"ms"].join(" "));return i.join(",")}return""}function w(t,e){var n=(""+(t||"")).replace(D,""),i=(""+(e||"")).replace(D,"");return 0===parseFloat(t)&&i||0===parseFloat(e)&&n||i||n}function y(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function x(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function C(t){var e;if(F){e=new r.Promise;var n=m(t);z[n]||(z[n]=[]),z[n].push(e)}return e}function T(t){if(t.members){var n=t.members[0]._opt;if(!H[n.prop])return t.members.map(function(t){return T(t)});var i=t._opt=e.copy(n);i.prop=J,i.to=t.members.map(function(t){return t._opt.prop+"("+t._opt.to+")"}).join(" "),delete i._parent}return t._opt}function S(t,e,n){var i=t._opt,r=t.stage;if(r&&!r.isCompleted()&&r.cancel(),t.members){if("string"==typeof e&&H[t.members[0]._opt.prop]){var a={};f(e,function(t){a[t.prop]=t.to}),e=a}t.members.forEach(function(t){var e=t._opt;e.to=n(e,this[e.prop])},e)}else i.to=n(t._opt,e);return t}function E(t){return new o(t)}for(var O,L=this,A=["Moz","webkit","ms","O",""],j={"":"transitionend",Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},H={rotate:-2,rotateX:-1,rotateY:-1,rotateZ:-1,scale:2,scale3d:3,scaleX:-1,scaleY:-1,scaleZ:-1,skew:2,skewX:-1,skewY:-1,translate:2,translate3d:3,translateX:-1,translateY:-1,translateZ:-1},R="rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateX(0px) translateY(0px) translateZ(0px) scaleX(1) scaleY(1) scaleZ(1) skewX(0deg) skewY(0deg)",M=["target","prop","duration","easing","delay","to"],N=/\)\s+/,D=/^[\-\d\.]+/,I=L.document.body,P=Array.prototype.slice,V=(document.defaultView||{}).getComputedStyle,U={transform:"",transition:""},F=!1,W=0,q=0,B=0,Y={},X={},z={},G=n.values,Q=n.functions,$=0,Z=A.length;Z>$&&!a(U,A[$]);$++);var J=U.transform,K=U.transition,te=y(J),ee=y(K);return te&&ee&&(F=!0),o.prototype={isPlaying:function(){return F?!!this._runningActors.state:i.isRunning(this.name)},isCompleted:function(){return 0>=this._count},play:function(){return this.isCompleted()&&(clearTimeout(this._end_timer),this._reset_promise.fire(),this._optCache.forEach(function(t){this.actor(t)},this)),F?this.isPlaying()||(this._runningActors.state=1,this._runningActors.forEach(h)):i.run(this.name),this},pause:function(){return F?(this._runningActors.state=0,this._runningActors.forEach(l)):i.pause(this.name),this},clear:function(){return this.cancel(),this._optCache.forEach(function(t){t._cached=!1}),this._optCache.length=0,this},cancel:function(){return c(this,function(t,e){F?l(e):i.remove(t)}),this._optCache.forEach(function(t){t._promise.reject([{target:t.target,succ:!1}]).disable()}),this},complete:function(){return c(this,function(t,e){F?(u(e),e._promise.resolve([{target:e.target,succ:!0}]).disable()):i.complete(t)}),this},actor:function(t,n){function i(t){(t||l.follow()).reset().enable()}function a(t){return t.follow().bind(o),t._opt._watcher=o,delete t._opt._parent,t}function o(t){--p._count>0||(p._end_timer=setTimeout(function(){c(p),p._promise[t.succ?"resolve":"reject"]([{succ:t.succ}])},0))}var l,u,p=this,m=this.name;if(clearTimeout(this._end_timer),n){if(t.nodeType){var v,g={};if(M.forEach(function(t,e){"prop"===t?v=this[e]:"to"!==t&&(g[t]=this[e])},arguments),u=Object.keys(v).map(function(t){return p.actor(e.mix({_parent:!0,prop:t,to:v[t]},this))},g),1===u.length)return u[0]}else u=P.call(arguments),u=u.map(function(t){return t._parent=!0,p.actor(t)});return this._reset_promise.bind(i),l=new s(u,p)}if(t.prop=U[t.prop]||t.prop,t._promise&&i(t._promise),t.prop===J){var _=C(t.target);return u=f(t.to,function(n){return e.merge(n,t),n._parent=!0,n._promise=_,p.actor(n)}),this._reset_promise.bind(i),l=new s(u,p)}return p._count++,t._promise||(t._promise=new r.Promise),F?(this._runningActors.push(t),this.isPlaying()&&h(t)):d(m,t),l=new s(t,p),t._cached||(t._cached=!0,this._optCache.push(t),a(l)),l},group:function(){var t,e=this,n=P.call(arguments).filter(function(t){return t.stage===e});return this._reset_promise.bind(function(){t.follow().reset().enable()}),t=new s(n,e)},follow:function(){return this._promise}},s.prototype={enter:function(t){this.stage&&this.exit();var n=t.actor.apply(t,[].concat(T(this)));
return n.follow().merge(this.follow()),e.mix(this,n)},exit:function(){var t=this.stage,n=this._opt;if(!t)return this;this.members?this.members=this.members.map(function(t){return t.exit()}):(F?(x(t._runningActors,n),t.isPlaying()&&l(n)):i.remove(t.name,n._render),x(t._optCache,n),n._promise.reject([{target:n.target,succ:!1}]).disable());var r=this.fork();return n._parent||r.follow().merge(n._promise),e.occupy(n,r._opt),delete this.stage,this},fork:function(){if(this.members)return new s(this.members.map(function(t){return t.fork()}));var t={};return M.forEach(function(e){t[e]=this[e]},this._opt),t._promise=new r.Promise,new s(t)},setto:function(t){return S(this,t,function(t,e){return e||0===e?e:t.to})},extendto:function(t){return S(this,t,function(t,e){if(!e)return t.to;var n=w(t.to,e);return parseFloat(t.to)+parseFloat(e)+n})},reverse:function(){return S(this,{},function(t){return void 0!==t.from?t.from:t._current_from})},follow:function(){return this._opt._promise}},e.mix(E,{VERSION:"1.0.3",renderMode:F?"css":"js",Stage:o,Actor:s,config:function(t){t.easing&&(e.mix(G,t.easing.values),e.mix(Q,t.easing.functions),i&&i.config({easing:Q})),/(js|css)/.test(t.renderMode)&&(F="css"===t.renderMode,this.renderMode=t.renderMode)},transform:k}),E}),define("soviet",["mo/lang/es5","mo/lang/mix","mo/lang/type","mo/lang/struct","dollar"],function(t,e,n,i,r){function a(t,n){e.config(this,n||{},m),this.target=r(t),this.events={},this.locks={},this.traceStack||(this.traceStack=[])}function o(t,e,n){var i;return t&&(this.trace&&(this.traceStack.unshift("<"+e.nodeName+"#"+(e.id||"")+">."+(e.className||"").split(/\s+/).join(".")),this.traceStack.length>this.trace&&this.traceStack.pop()),i=t.call(e,n),this.preventDefault&&!i&&n.preventDefault()),i}function s(t,e,n,i){var r=t[e];i?t[e]=n:n&&(r||(r=t[e]=d()),r.push(n))}function c(t,e,n,i){var r=t[e];!n||i?delete t[e]:r&&r.clear(n)}function l(t,e){return t[e]}function u(t){return this.locks[t]=this.matchesSelector?{}:{".":{},"#":{},"&":{}}}function h(t,e,n,i,r){if(void 0===r&&(r=this.autoOverride),e){if(!this.matchesSelector){var a=(/^[\.#]/.exec(e)||["&"])[0];e=e.substr("&"!==a?1:0),t=t[a],"."===a&&(e=e.split(".").join(" "))}}else e="_self_";return i(t,e,n,r)}var d=i.fnQueue,f=n.isFunction,p=r.find.matchesSelector,m={preventDefault:!1,matchesSelector:!1,autoOverride:!1,aliasEvents:{},trace:!1,traceStack:null};a.prototype={on:function(t,e,n){if(f(e)&&(n=e,e=void 0),"object"==typeof e)for(var i in e)this.on(t,i,e[i]);else{t=this.aliasEvents[t]||t;var r=this.events[t];r||(this.target.bind(t,this.trigger.bind(this)),this.reset(t),r=this.events[t]),h.call(this,r,e,n,s)}return this},off:function(t,e,n){f(e)&&(n=e,e=void 0),t=this.aliasEvents[t]||t;var i=this.events[t];return i&&h.call(this,i,e,n,c),this},matches:function(t,e){t=this.aliasEvents[t]||t;var n=this.events[t];return h.call(this,n,e,null,l)},reset:function(t){return t?(t=this.aliasEvents[t]||t,this.events[t]=this.matchesSelector?{}:{".":{},"#":{},"&":{}},u.call(this,t)):(this.events={},this.locks={}),this},disable:function(t,e){var n=this.locks;if(t){t=this.aliasEvents[t]||t;var i=n[t];i||(i=u.call(this,t)),e?h.call(this,i,e,!0,s,!0):i._disable=!0}else this._global_lock=!0;return this},enable:function(t,e){var n=this.locks;if(t){t=this.aliasEvents[t]||t;var i=n[t];i&&(e?h.call(this,i,e,null,c,!0):delete i._disable)}else delete this._global_lock;return this},trigger:function(t){var e=this.aliasEvents[t.type];e&&(t.type=e);var n,i=this,r=t.target,a=this.locks[t.type]||{},s=this.events[t.type];if(!s||this._global_lock||a._disable)return n;if(this.matchesSelector)Object.keys(s).forEach(function(e){!a[e]&&p(this,e)&&(n=o.call(i,s[e],this,t))},r);else{var c,l,u=(c="#")&&(l=r.id)&&s[c][l]||(c=".")&&(l=r.className)&&s[c][l]||(c="&")&&(l=r.nodeName.toLowerCase())&&s[c][l]||null;if(u){var h=a[c][l];h||(n=o.call(this,u,r,t))}}return s._self_&&(n=o.call(this,s._self_,r,t)),n}};var v=function(t,e){return new v.Soviet(t,e)};return v.Soviet=a,v}),define("mo/easing/timing",["mo/lang/mix","mo/easing/base"],function(t,e){function n(t,e){e=e||{};for(var n in t)e[n]="cubic-bezier("+t[n].join(",")+")";return e}var i={easeInQuad:[.55,.085,.68,.53],easeInCubic:[.55,.055,.675,.19],easeInQuart:[.895,.03,.685,.22],easeInQuint:[.755,.05,.855,.06],easeInSine:[.47,0,.745,.715],easeInExpo:[.95,.05,.795,.035],easeInCirc:[.6,.04,.98,.335],easeInBack:[.6,-.28,.735,.045],easeOutQuad:[.25,.46,.45,.94],easeOutCubic:[.215,.61,.355,1],easeOutQuart:[.165,.84,.44,1],easeOutQuint:[.23,1,.32,1],easeOutSine:[.39,.575,.565,1],easeOutExpo:[.19,1,.22,1],easeOutCirc:[.075,.82,.165,1],easeOutBack:[.175,.885,.32,1.275],easeInOutQuad:[.455,.03,.515,.955],easeInOutCubic:[.645,.045,.355,1],easeInOutQuart:[.77,0,.175,1],easeInOutQuint:[.86,0,.07,1],easeInOutSine:[.445,.05,.55,.95],easeInOutExpo:[1,0,0,1],easeInOutCirc:[.785,.135,.15,.86],easeInOutBack:[.68,-.55,.265,1.55]};return i.swing=i.jswing=e.positions.ease,{positions:t.mix(i,e.positions),values:t.mix(n(i),e.values),stringify:n}}),define("../cardkit/app",["dollar","mo/lang","mo/browsers","mo/template","mo/easing/timing","soviet","choreo","momo/base","momo/tap","momo/swipe","momo/drag","momo/scroll","../cardkit/view/control","../cardkit/view/picker","../cardkit/view/stars","../cardkit/view/modalcard","../cardkit/view/actionview","../cardkit/view/growl","../cardkit/tpl/layout/ctlbar","../cardkit/bus","../cardkit/render","../cardkit/supports","cardkit/env","mo/domready"],function(t,e,n,i,r,a,o,s,c,l,u,h,d,f,p,m,v,g,_,k,b,w,y){function x(){de.openModal(t(this).data())}function C(){var t=d(this),e=t.data();e.disableUrl||e.disableJsonUrl?t.toggle():t.isEnabled||t.enable()}function T(){var t=d(this).toggle();A(t)}function S(){return t(this).hasClass("ck-post-button")?(C.call(this),void 0):S.call(this.parentNode)}function E(){return t(this).hasClass("ck-switch")?(T.call(this),void 0):E.call(this.parentNode)}function O(n){var i=e.mix({confirmText:"确认",cancelText:"取消",multiselect:!1},n.data());return i.options=t(i.options||".ck-option",n),v(n,i).open()}function L(t,e){var n=p(this),i=n.calc(t);n[e](i)}function A(t){t.parentId||(t.parentId=++te),de.viewportGarbage[t.parentId]=1}function j(){}function H(e){var n=t(this).closest(".ck-list-wrap"),i=n.data("ckSlideAnime");i||(i=n.data("ckSlideAnime",+new Date));var r=de.slideItemWidth,a=n[0].scrollLeft,s=a/r,c=s-Math.floor(s),l=t(".ck-list",n)[0],u=t(".ck-item",l).length-1;if(s>0&&u>s&&u-s>.1){s=e?.1>c?Math.floor(s):Math.ceil(s):c>.9?Math.ceil(s):Math.floor(s);var h=a-s*r+(s===u?ce:0);n.addClass("stop-scroll"),o(i).clear().play().actor(l,{transform:"translateX("+h+"px)"},200,"easeOutSine").follow().then(function(){o.transform(l,"translateX","0"),n[0].scrollLeft-=h,n.removeClass("stop-scroll")})}}function R(t){return t.replace(/#.*/,"")===Z.href.replace(/#.*/,"")}function M(e){var n,i,r=e.replace(/#(.*)/,function(t,e){return n=e,""}),a=Z.href.replace(/#(.*)/,function(t,e){return i=e||"",""});if(n&&r===a){if(!(n&&t("#"+n).hasClass("ck-card")||(n=re,i.split(ne).pop()!==n)))return!1}else n="";return n}function N(e){for(var n=e.target;!n.href;)n=n.parentNode;var i=M(n.href);if(i!==!1){if(t(n).hasClass("ck-link-extern"))return F(n.href,{target:"_blank"}),void 0;if(t(n).hasClass("ck-link"));else{if(/(^|\s)ck-\w+/.test(n.className))return;if(n.target)return i&&"_self"===n.target?D(i,null,!0):F(n.href,n),void 0}i?D(i):D(ae,n.href)}}function D(e,n,i){if(de.disableControl(),m.isOpened)return de.closeModal().done(function(){D(e,n)}),void 0;de._sessionLocked=!0;var r=e&&t("#"+e);if(!r.hasClass("ck-card"))return de.enableControl(),de._sessionLocked=!1,void 0;de.hideTopbar();var a=de.viewport;if(P(e),i)return de.loadingCard.addClass("moving").show(),setTimeout(function(){de.changeView(r),a.hide(),de.loadingCard.hide().removeClass("moving"),de.enableControl(),de._sessionLocked=!1,de.showTopbar()},400),void 0;o.transform(r[0],"translateX",Q.innerWidth+"px"),r.addClass("moving"),de.changeView(r),de.cardMask.css("opacity",0).addClass("moving");var s=o("card:moving").clear().play();s.actor(de.cardMask[0],{opacity:"0.8"},400,"ease"),s.actor(r[0],{transform:"translateX(0)"},450,"ease"),s.follow().then(function(){a.hide(),de.cardMask.removeClass("moving"),r.removeClass("moving"),n?(de._unexpectStateWhenGoback=!1,de._pageCached=!0,Q.location=n):(de.enableControl(),de._sessionLocked=!1,de.showTopbar())})}function I(e){if(de._sessionLocked=!0,de.disableControl(),v.current)return v.current.close().event.once("close",function(){I(e)}),void 0;de.hideTopbar();var n=t("#"+e),i=de.viewport;o.transform(i[0],"translateX","0px"),i.addClass("moving"),de.changeView(n),de.cardMask.css("opacity","0.8").addClass("moving");var r=o("card:moving").clear().play();r.actor(de.cardMask[0],{opacity:"0"},400,"ease"),r.actor(i[0],{transform:"translateX("+Q.innerWidth+"px)"},450,"ease"),r.follow().then(function(){if(de.cardMask.removeClass("moving"),i.hide().removeClass("moving"),o.transform(i[0],"translateX","0px"),e===ae){(R(J.referrer)||!/#.+/.test(J.referrer))&&(de._backFromSameUrl=!0),$.back();var t=Z.href;setTimeout(function(){Z.href===t&&Z.reload()},700)}else de.enableControl(),de._sessionLocked=!1,de.showTopbar()})}function P(t){w.BROWSER_CONTROL&&(Q.location=Z.href.replace(/#(.*)|$/,"#$1"+ne+t))}function V(t){de._preventNextHashEv=!0,Z.replace(Z.href.replace(/#.*/,"")+(t||ie))}function U(){if(!w.WINDOW_SCROLL){var t,e=de.viewport[0];1>e.scrollTop?e.scrollTop=1:e.scrollTop>(t=e.scrollHeight-e.offsetHeight-1)&&(e.scrollTop=t)}}function F(t,e){if(e=e||{target:"_self"},"_self"!==e.target)W(t,e.target);else{if(de.disableControl(),m.isOpened)return de.closeModal().done(function(){F(t,e)}),void 0;de._sessionLocked=!0,de.hideTopbar();var n=de.loadingCard,i=de.viewport;P(ae),n.addClass("moving"),de.changeView(n),setTimeout(function(){i.hide(),n.removeClass("moving"),de._unexpectStateWhenGoback=!1,de._pageCached=!0,Q.location=t},10)}}function W(e,n){w.NEW_WIN?Q.open(e,n):t('<a href="'+e+'" target="'+n+'"></a>').trigger("click")}function q(e){var n=e&&e.prev()[0];return n&&!n.offsetHeight?q(t(n)):n}function B(e){for(var n in e)t.Event.aliases[n]=ee[n]="ck_"+e[n]}function Y(){}function X(){return!1}var z,G,Q=this,$=Q.history,Z=Q.location,J=Q.document,K=J.body,te=0,ee={},ne="!/",ie="#"+ne+"i",re="ckDefault",ae="ckLoading",oe="_modal_",se=10,ce=15,le='<div class="ck-viewmask"></div>',ue='<div class="ck-cardmask"></div>';e.mix(s.Class.prototype,{bind:function(e,n,i){return t(i||this.node).bind(e,n),this},unbind:function(e,n,i){return t(i||this.node).unbind(e,n),this},trigger:function(e,n){return t(e.target).trigger(n),this}});var he={a:N,"a *":N,".ck-post-link":C,".ck-post-button, .ck-post-button span":S,".ck-switch, .ck-switch span":E,".ck-segment .ck-option, .ck-segment .ck-option span":function(){var e=t(this);e.hasClass("ck-option")||(e=e.closest(".ck-option"));var n=f(e.parent());n.select(e)},".ck-tagselector .ck-option":function(){var t=f(this.parentNode);t.select(this)},".ck-actions .ck-option":function(){var e=t(this).closest(".ck-actions"),n=f(e,{ignoreStatus:"false"!==e.data("ignoreStatus")&&!0});n.select(this)},".ck-folder header":function(){d(this.parentNode).toggle()},".ck-select, .ck-select span, .ck-select .enabled":function(){var e=t(this);e.hasClass("ck-select")||(e=e.parent());var n=f(e);O(e),k.bind("actionView:confirmOnThis",function(t){n.select(t.val())})},".ck-actions-button, .ck-actions-button span":function(){var e=t(this);e.hasClass("ck-actions-button")||(e=e.parent()),O(e)},".ck-modal-button":x,".ck-modal-link":x,".ck-growl-button":function(){g(this).open()},".ck-actionview article > .ck-option":function(){v.current.select(this)},".ck-actionview > footer .confirm":function(){v.current.confirm()},".ck-actionview > footer .cancel":function(){v.current.cancel()},".ck-modalview .wrapper > header .confirm":function(){m.confirm()},".ck-modalview .wrapper > header .cancel":function(){m.cancel()},".ck-ctl-backward":function(){de.viewport[0].id===re?I(ae):I(de.viewport.data("prevCard")||re)},".ck-ctl-reload":function(){Q.location.reload()},".ck-top-create .btn":x,".ck-top-action .btn":function(){v(this).open()}};k.bind("cardkit:updateSize",function(){if(m.isOpened){var t=m._contentWrapper,e=2*Q.innerHeight;m._iframeContent&&m._iframeContent.css({minHeight:e+"px",width:t[0].offsetWidth+"px",height:t[0].offsetHeight-de.headerHeight+"px"}),m._content.css("minHeight",e+"px")}var n=v.current;if(n){var i=Q.innerHeight+10,e=n._wrapperContent.children().map(function(t){return t.offsetHeight||0}).reduce(function(t,e){return t+e})+parseFloat(n._wrapperContent.find("article").eq(0).css("bottom"));i>e&&(e=i),n._wrapperContent.css({minHeight:e+"px"}),n._node.css({height:e+"px"})}}),m.event.bind("prepareOpen",function(){de.disableView=!0,w.CARD_SCROLL?t(K).addClass("bg").addClass("modal-view"):de.resetWindowTop()}).bind("cancelOpen",function(){de.disableView=!1,t(K).removeClass("bg").removeClass("modal-view")}).bind("open",function(){w.CARD_SCROLL||t(K).addClass("bg").addClass("modal-view");var e=m._contentWrapper;z=de.viewport,de.changeView(e,{isModal:!0}),m._iframeContent?m.event.done("frameOnload",function(){var e=t(m._iframeWindow[0].document.body);e.bind("touchstart",U),de.initView(e,{isModal:!0}),setTimeout(function(){de.enableControl()},400)}):m._content.html()?setTimeout(function(){de.enableControl()},400):m.event.done("contentchange",function(){de.initView(e,{isModal:!0}),setTimeout(function(){de.enableControl()},400)})}).bind("prepareClose",function(){de.disableView=!1,t(K).removeClass("modal-view")}).bind("cancelClose",function(){de.disableView=!0,t(K).addClass("modal-view")}).bind("close",function(){de.changeView(z),t(K).removeClass("bg")}),k.bind("actionView:prepareOpen",function(e){de.disableView=!0;var n=e._wrapper;G=de.viewport,n[0].scrollTop=0,de.changeView(n,{preventRender:!0,preventScroll:!0,isActions:!0}),w.CARD_SCROLL||t(K).addClass("bg")}).bind("actionView:cancelOpen",function(){m.isOpened||(de.disableView=!1),w.CARD_SCROLL||t(K).removeClass("bg"),de.changeView(G,{preventRender:m.isOpened,preventScroll:!0,isModal:m.isOpened})}).bind("actionView:close",function(){m.isOpened||(de.disableView=!1),w.CARD_SCROLL||t(K).removeClass("bg"),de.changeView(G,{preventRender:m.isOpened,preventScroll:!0,isModal:m.isOpened})}).bind("actionView:jump",function(t,e,n){t.event.once("close",function(){de.openURL(e,{target:n})})});var de={init:function(e){var i=t(J),s=this.root=e.root;this.wrapper=t(".ck-wrapper",s),this.header=t(".ck-header",s),w.BROWSER_CONTROL||(this.ctlbar=t(_.template).appendTo(this.wrapper),t(K).addClass("has_ctlbar")),this.footer=t(".ck-footer",s),this.raw=t(".ck-raw",s),this.loadingCard=t("#"+ae).data("rendered","1"),this.defaultCard=t("#"+re),this.scrollMask=t(le).appendTo(K),y.showScrollMask&&this.scrollMask.css({opacity:"0.2",background:"#f00"}),this.controlMask=t(le).appendTo(K),y.showControlMask&&this.controlMask.css({opacity:"0.2",background:"#0f0"}),this.cardMask=t(ue).appendTo(K),this.headerHeight=this.header.height(),this.sizeInited=!1,this.viewportGarbage={},this._sessionLocked=!0,this._unexpectStateWhenGoback=!0,this.initWindow(),y.enableConsole&&(console.info("Features:",w),console.info("Platform:",n)),o.config({easing:r}),this.scrollGesture=h(J,{}),B(this.scrollGesture.event);var u=c(J,{tapThreshold:"android"!==n.os||!n.chrome&&20||0});B(u.event);var d=l(this.wrapper,{timeThreshold:1e4,distanceThreshold:10});B(d.event),w.CARD_SCROLL||t(K).addClass("no-cardscroll"),w.SAFARI_OVERFLOWSCROLL||t(K).addClass("no-overflowscroll"),w.HIDE_TOPBAR&&t(K).addClass("mobilesafari-bar"),w.FIXED_BOTTOM_BUGGY&&t(K).addClass("fixed-bottom-buggy"),y.hideToolbars&&t(K).addClass("hide-toolbars"),this.initState(),t(Q).bind("resize",function(){var t=de.isLandscape();t!==de.landscapeMode&&(de.initWindow(),de.hideAddressbar(),v.current&&!w.CARD_SCROLL&&(de.viewport[0].innerHTML=de.viewport[0].innerHTML))}),this.loadingCard.bind("touchstart",function(t){t.preventDefault()}),a(J,{aliasEvents:ee,matchesSelector:!0,preventDefault:!0}).on("click",{a:j,"a *":j}).on("touchend",{".ck-stars":function(t){L.call(this,t,"val")},".ck-stars .slider-selected":function(t){L.call(this.parentNode,t,"val")}}).on("touchmove",{".ck-stars":function(t){L.call(this,t,"pretend")},".ck-stars .slider-selected":function(t){L.call(this.parentNode,t,"pretend")}}).on("tap",he),i.bind("scrolldown",function(){g||setTimeout(function(){de.hideAddressbar()},0)});var f=a(this.wrapper,{aliasEvents:ee,matchesSelector:!0}).on("swipeleft",{".ck-mini-unit .ck-list-wrap *":function(){H.call(this,!0)}}).on("swiperight",{".ck-mini-unit .ck-list-wrap *":function(){H.call(this,!1)}});if(w.SAFARI_OVERFLOWSCROLL||f.on("touchend",{".ck-mini-unit .ck-list-wrap *":function(t){t.preventDefault()}}),w.CARD_SCROLL&&w.SAFARI_OVERFLOWSCROLL&&(i.bind("scrollstart",function(){de.scrollMask.show()}).bind("scrollend",function(){de.scrollMask.hide()}),i.bind("touchstart",U)),w.CARD_SCROLL&&i.bind("scroll",function(){if(m.isOpened){var t=Q.scrollY;if(!t&&Q.innerHeight>=de.windowFullHeight)return;de.resetWindowTop(),K.scrollTop=0,t>40&&(de.viewport[0].scrollTop=de.viewport[0].scrollTop+t-40)}}),w.CARD_SCROLL){var p,g,k=function(){g=!1},b=function(t){this===t.target&&(p=t.touches[0].clientY,setTimeout(function(){g=!0,de.viewport[0].scrollTop=0},0))};this.header.find(".ck-top-title").bind("touchstart",b),this.header.bind("touchstart",b),w.HIDE_TOPBAR&&this.header.bind("touchmove",function(t){g&&p>t.touches[0].clientY&&(k(),g=!0,de.windowFullHeight=1/0,de.hideAddressbar())}).bind("touchend",k).bind("touchcancel",k)}},showView:function(){t(K).addClass("ck-inited"),de.hideAddressbar(),de.hideLoadingCard(),de.enableControl(),k.resolve("inited")},initWindow:function(){this.landscapeMode=this.isLandscape(),this.windowFullHeight=1/0},initStateWatcher:function(){var e,n;t(Q).bind("hashchange",function(i){if(!de._backFromSameUrl){if(e=!0,de._preventNextHashEv||i.newURL.length>=i.oldURL.length)return de._preventNextHashEv=!1,void 0;if(de._sessionLocked)return Q.location.reload(!0),void 0;if(n)return de.resetWindowTop(),P(n),m.isOpened?m.close():de._backFromOtherpage?(de._backFromOtherpage=!1,de.changeView(n),de._sessionLocked=!1,de.showView()):I(n),n=!1,void 0;var r=Z.hash.split(ne).pop();if(r&&"i"!==r){if(de._sessionLocked=!1,n=r===oe&&re||r,!t("#"+n).hasClass("ck-card"))return Q.location.reload(!0),void 0;$.back()}else I(ae)}}),t(Q).bind("popstate",function(){if(de._backFromSameUrl){var t=Q.location.hash.split(ne).pop();return t?($.back(),void 0):(Q.location.reload(),void 0)}e=!1,setTimeout(function(){e||de._backFromOtherpage||(de._sessionLocked=!1,de._backFromOtherpage=!0,w.GOBACK_WHEN_POP&&!de._unexpectStateWhenGoback?$.back():Q.location.reload(!0))},100)})},initState:function(){de._sessionLocked=!1,w.BROWSER_CONTROL?de.initStateWatcher():k.once("inited",function(){var e=w.NO_POP_ON_CACHED_PAGE?"resize":"popstate";t(Q).bind(e,function(){(!w.RESIZE_WHEN_SCROLL||de._pageCached)&&(de._pageCached=!1,de.hideTopbar(),de.viewport.hide(),de.changeView(de.loadingCard),setTimeout(function(){Q.location.reload()},20))})});var e,n,i=Z.hash.replace(/^#/,"");if(i&&(i=i.split(ne)),i){var r=[];if(i=i.map(function(e){return e===oe||"i"===e||e&&t("#"+e).hasClass("ck-card")?(r.push(ne+e),e):void 0}).filter(function(t){return t}),e=i.pop(),r=r.join(""),"#"+r!==Z.hash&&(V(ie+r),!w.REPLACE_HASH))return Q.location.reload();w.BROWSER_CONTROL||(e===ae||e===oe)&&(e=null),e===oe?(n=!0,e=re):"i"===e&&(e=null)}w.BROWSER_CONTROL&&w.REPLACE_HASH&&!R(J.referrer)&&(V(ie),e&&(i.forEach(function(t){"i"!==t&&P(t)}),P(e))),e?(de.changeView(e),e===ae||n?(de._backFromOtherpage=!0,$.back()):de.showView()):de.initNewPage()},initNewPage:function(){de.changeView(de.defaultCard),P(re),de.showView()},initView:function(t,e){b.openCard(t,e),t.data("rendered")||e.preventRender||(b.initCard(t,this.raw,this.footer,e),e.isModal||e.isActions||t.data("rendered","1")),this.watchScroll(t)},releaseView:function(t){this.viewport&&b.closeCard(this.viewport,t)},changeView:function(e,n){n=n||{},w.CARD_SCROLL||n.preventScroll||de.resetWindowTop(),this.releaseView(n),"string"==typeof e&&(e=t("#"+e));var i=e===this.loadingCard;this.viewport&&e.data("prevCard",this.viewport[0].id),this.initView(e,n),this.viewport=e.show(),this.updateSize(n),n.isModal||n.isActions||this.updateHeader(),sessionStorage.ck_lasturl=Z.href,i||setTimeout(function(){k.fire("readycardchange",[e])},0)},updateSize:function(e){if(e=e||{},(w.CARD_SCROLL||e.isActions)&&this.viewport[0].id!==ae){this.viewport[0].style.height=(this.sizeInited?Q.innerHeight:screen.availHeight+60)+2+"px";var n=this.viewport.find(".ck-footer"),i=q(n);if(i){var r=screen.availHeight-(i.offsetTop+i.offsetHeight+this.viewport[0].scrollTop);r>0?n.css("paddingTop",r+"px"):n.css("paddingTop","0px")}}this.viewport.find(".ck-mini-unit").forEach(function(t){var e=this(".ck-item",t),n=de.slideItemWidth=Q.innerWidth-se-ce;e.length>1&&(e.css("width",n-se-2+"px"),this(".ck-list",t).css("width",n*e.length+se+"px"))},t),k.fire("cardkit:updateSize")},watchScroll:function(t){this.scrollGesture.watchScroll(t[0])},updateHeader:function(){var t=this.header.find(".ck-top-create").empty(),e=this.viewport.find(".ckd-top-create").html();e&&t.append(e)},renderUnit:function(t){b.initUnit(t,this.raw)},hideLoadingCard:function(){de.loadingCard.hide().css({height:Q.innerHeight+60+"px",position:"static"}),de.showTopbar()},hideTopbar:function(){this.topbarEnable&&!this.disableView&&(this.topbarEnable=!1,t(K).removeClass("ck-topbar-enabled"))},showTopbar:function(){this.topbarEnable||(this.topbarEnable=!0,t(K).addClass("ck-topbar-enabled"))},hideAddressbar:function(){this.windowFullHeight>Q.innerHeight&&(this.loadingCard.find("div")[0].style.visibility="hidden",!w.HIDE_TOPBAR||!w.CARD_SCROLL&&this.sizeInited||(de.resetWindowTop(),K.scrollTop=0),this.sizeInited||(this.sizeInited=!0),this.windowFullHeight=Q.innerHeight,de.updateSize(),this.loadingCard.find("div")[0].style.visibility="")},resetWindowTop:function(){w.HIDE_ADDRESSBAR&&Q.scrollTo(0,-1)},isLandscape:function(){return Q.innerWidth/Q.innerHeight>1.1},enableControl:function(){this.controlMask.hide(),Q.ckControl=Y},disableControl:function(){this.controlMask.show(),Q.ckControl=X},showLoading:function(t){this.disableControl(),this.loadingTips||(this.loadingTips=g({expires:-1,keepalive:!0,corner:"center"})),this.loadingTips.set({content:t||"正在加载..."}).open(),this._loadingStart=+new Date},hideLoading:function(t){t=e.mix({duration:800},t);var n=+new Date-this._loadingStart;t.duration>n?setTimeout(function(){de.hideLoading(t)},t.duration-n):(this.loadingTips&&this.loadingTips.close(),this.enableControl())},openModal:function(t){this.hideAddressbar(),this.disableControl(),m.isOpened||P(oe),m.set(t).open()},closeModal:function(){return m.cancel(),m.event.promise("close")},alert:function(t,n){v("ckAlert",e.mix({title:"提示",content:t||"",cancelText:"关闭",multiselect:!1},n)).open()},confirm:function(t,n,i){v("ckAlert",e.mix({title:"提示",content:t||"",confirmText:"确认",cancelText:"取消",multiselect:!0},i)).open().event.once("confirm",n)},notify:function(t,n){de.growl(e.mix({content:t},n)).open()},openURL:F,delegate:a(J,{aliasEvents:ee,autoOverride:!0,matchesSelector:!0,preventDefault:!0}),event:k,control:d,picker:f,modalCard:m,actionView:v,growl:g};return de}),require.config({baseUrl:"js/mod/",distUrl:"dist/js/mod/",aliases:{cardkit:"../cardkit/"}}),define("mo/easing/functions",[],function(){}),define("mo/mainloop",[],function(){}),define("cardkit/env",[],function(){return{}}),define("cardkit/pageready",["finish","cardkit/bus"],function(t,e){e.once("readycardchange",function(){setTimeout(t,500)})}),require(["dollar","cardkit/bus","cardkit/app","cardkit/env"],function(t,e,n,i){function r(){n.init({root:t(".ck-root")})}i.enableConsole?require(["mo/console"],function(t){t.config({record:!0}).enable(),r()}):r()});