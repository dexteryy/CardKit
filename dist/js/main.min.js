!function(){function a(a,b,c){var e="string"==typeof c;c||(b?n(b)?c=h(i(j(a))):(c=b,b=null):(c=a,a=""),"string"!=typeof a?(b=a,a=""):(e="string"==typeof c,e||b||(b=d(c)))),a=a&&i(a);var f=a&&B.mods[a];if(B.debug||!f||!f.name||!(e&&2==f.loaded||f.exports)){e&&B.enable_ozma&&(b=null);var g=o(this)?this:s;if(f=B.mods[a]={name:a,url:f&&f.url,host:g,deps:b||[]},""===a&&(q=f),"string"!=typeof c)f.block=c,f.loaded=2;else{var k=B.aliases;k&&(c=c.replace(/\{(\w+)\}/g,function(a,b){return k[b]||""})),f.url=c}f.block&&!m(f.block)&&(f.exports=c)}}function b(a,f,g){if("string"==typeof a){if(!f)return(B.mods[i(j(a,r))]||{}).exports;a=[a]}else f||(f=a,a=d(f));var h=o(this)?this:s;g||(g={url:r&&r.url});for(var k,l=0,m=c.call(h,a,g),n=0,p=m.length;p>n;n++)k=m[n],k.is_reset&&(k=B.mods[k.name]),k.url&&2!==k.loaded&&(l++,k.loaded=1,J(k,function(){this.loaded=2;var c=q;c&&(c.name=this.name,c.url=this.url,B.mods[this.name]=c,q=null),--l<=0&&b.call(h,a,f,g)}));l||(g.deps=a,g.host=h,g.block=f,setTimeout(function(){e(a,g),m.push(g),I(m.reverse())},0))}function c(b,d,f){if(f=f||[],!b[0])return f;var g,k=f.history;if(k||(k=f.history={}),b[1])g=b,b=!1;else{var l,m=b[0],n=u.exec(m);n&&(m=n[2],n=n[1]);var o=i(m);if(!B.mods[o]&&!A[o]){var p=i(j(m,d));o!==p&&(B.mods[d.url+":"+o]=p,o=p),B.mods[p]||a(p,h(p))}if(b=d=B.mods[o],!b)return f;if("new"===n?b={is_reset:!0,deps:b.deps,name:o,newname:n+"!"+o,host:this}:l=b.name,k[l])return f;k[l]?g=[]:(g=b.deps||[],l&&(k[l]=!0))}for(var q=g.length-1;q>=0;q--)k[g[q]]||c.call(this,[g[q]],d,f);return b&&(e(g,b),f.push(b)),f}function d(a){var b=a.hiddenDeps||[];if(!a.hiddenDeps){var c=a.toString(),d=null;for(b=a.hiddenDeps=[];d=v.exec(c);)b.push(d[0].slice(10,-2))}return b.slice()}function e(a,b){H.call(a.slice(),function(c,d){var e=this[b.url+":"+i(c)];"string"==typeof e&&(a[d]=e)},B.mods)}function f(a){for(var b in a)if("aliases"===b){B[b]||(B[b]={});for(var c in a[b])B[b][c]=a[b][c];var d=B.mods;for(var e in d)d[e].name=i(e),d[d[e].name]=d[e]}else B[b]=a[b]}function g(a){return a.replace(/(.+?)(_src.*)?(\.\w+)$/,function(a,b,c,d){return b+(c&&"_combo"||"_pack")+d})}function h(a){return w.test(a)?a:a+".js"}function i(a){var b=B.aliases;return b&&(a=a.replace(z,function(a,c){return b[c]||c+"/"})),a}function j(a,b){var c=x.exec(a);return c&&b&&(a=(b.url||"").replace(/[^\/]+$/,"")+c[0]),k(a)}function k(a){a=a.replace(y,"$1");for(var b,c,d=a,e=/(\.\.\/)+/g;b=(e.exec(d)||[])[0];)c=b.match(/\.\.\//g).length,a=a.replace(new RegExp("([^/\\.]+/){"+c+"}"+b),"");return a.replace(/\/\//g,"/")}function l(a,b){var c=o(this)?this.document:document,d=c.createElement("script");d.type="text/javascript",d.async="async",b?m(b)&&(b={callback:b}):b={},b.charset&&(d.charset=b.charset),d.src=a;var e=c.getElementsByTagName("head")[0];d.onload=d.onreadystatechange=function(a,c){(c||!d.readyState||/loaded|complete/.test(d.readyState))&&(d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=void 0,!c&&b.callback&&b.callback())},e.insertBefore(d,e.firstChild)}function m(a){return"[object Function]"===t.call(a)}function n(a){return"[object Array]"===t.call(a)}function o(a){return"setInterval"in a}function p(a){function b(){}return b.prototype=a,new b}var q,r,s=this,t=Object.prototype.toString,u=/(.*)!(.+)/,v=/\Wrequire\((['"]).+?\1\)/g,w=/\.(js|json)$/,x=/^\.+?\/.+/,y=/(^|\/)\.\//g,z=/^([\w\-]+)\//,A={require:1,exports:1,module:1,host:1,finish:1},B={mods:{}},C={},D={},E={},F={},G={},H=Array.prototype.forEach||function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)},I=function(a){for(var c,d,e,f,g,h,j,k,l,m,n=F;c=a.pop();)if(c.is_reset?(m=p(B.mods[c.name]),m.host=c.host,m.newname=c.newname,c=m,G[c.newname]||(G[c.newname]=[]),G[c.newname].push(c),c.exports=void 0):c.name&&(c=B.mods[c.name]||c),c.block&&(c.running||void 0===c.exports)){j=[],k={},l={id:c.name,filename:c.url,exports:k},h=c.deps.slice(),h[c.block.hiddenDeps?"unshift":"push"]("require","exports","module");for(var o=0,q=h.length;q>o;o++)switch(d=h[o]){case"require":j.push(b);break;case"exports":j.push(k);break;case"module":j.push(l);break;case"host":j.push(c.host);break;case"finish":e=c.name,n[e]?n[e].push(a):n[e]=[a],j.push(function(a){setTimeout(function(){void 0!==a&&(c.exports=a),n[e]&&(H.call(n[e],function(a){this(a)},I),delete n[e],c.running=0)},0)}),g=1;break;default:j.push(((G[d]||[]).pop()||B.mods[i(d)]||{}).exports)}if(!c.running){r=c,f=c.block.apply(c.host,j)||null,r=!1,k=l.exports,c.exports=void 0!==f?f:k;for(var s in k){s&&(c.exports=k);break}}if(g){c.running=1;break}}},J=function(a,b){var c=a.url,d=C[c];if(d)1===d?b.call(a):d.push([b,a]);else{var e=a.name,f=D;if(a.deps&&a.deps.length&&1!==f[e]){if(f[e]=[a.deps.length,b],H.call(a.deps,function(b){var c=B.mods[i(b)];1!==this[b]&&c.url&&2!==c.loaded?(this[b]||(this[b]=[]),this[b].push(a)):f[e][0]--},E),f[e][0]>0)return;f[e]=1}d=C[c]=[[b,a]];var h=/^\w+:\/\//.test(c)?c:(B.enable_ozma&&B.distUrl||B.baseUrl||"")+(B.enableAutoSuffix?g(c):c);l.call(a.host||this,h,function(){H.call(d,function(a){a[0].call(a[1])}),C[c]=1,E[e]&&1!==E[e]&&(H.call(E[e],function(a){var b=this[a.name];--b[0]<=0&&(this[a.name]=1,J(a,b[1]))},f),E[e]=1)})}},K={VERSION:"2.5.2",define:a,require:b,config:f,seek:d,fetch:J,realname:i,basename:j,filesuffix:h,namesuffix:g,_getScript:l,_clone:p,_forEach:H,_isFunction:m,_isWindow:o};if(b.config=f,a.amd={jQuery:!0},s.window)s.oz=K,s.define=a,s.require=b;else{exports.oz=K,exports._config=B;for(var L in K)exports[L]=K[L];var M=function(a){return function(){return exports[a].apply(this,arguments)}};I=M("exec"),J=M("fetch"),b=M("require"),b.config=f}}(),require.config({enable_ozma:!0}),define("mo/browsers",[],function(){var a,b,c,d,e,f=this.navigator.userAgent.toLowerCase(),g={"360ee":2,"maxthon/3":2,qqbrowser:2,metasr:2,"360se":1,theworld:1,maxthon:1,tencenttraveler:-1};try{var h=/(windows) nt ([\w.]+)/,i=/(mac) os \w+ ([\w.]+)/,j=/(iphone) os ([\w._]+)/,k=/(ipad) os ([\w.]+)/,l=/(android)[ ;]([\w.]*)/,m=/(\w+)[ \/]([\w.]+)[ \/]mobile.*safari/,n=/(\w+)[ \/]([\w.]+) safari/,o=/(.)([^\/]+)[ \/]mobile\//,p=/(webkit)[ \/]([\w.]+)/,q=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,s=/(mozilla)(?:.*? rv:([\w.]+))?/,t=/(360se)/,u=/(360ee)/,v=/(360) \w+phone/,w=/(theworld)/,x=/(maxthon\/3)/,y=/(maxthon)/,z=/(micromessenger)/,A=/(tencenttraveler)/,B=/(qqbrowser)/,C=/(baidubrowser)/,D=/(ucbrowser)/,E=/(metasr)/;if(c=j.exec(f)||k.exec(f)||l.exec(f)||i.exec(f)||h.exec(f)||[],a=p.exec(f)||q.exec(f)||r.exec(f)||f.indexOf("compatible")<0&&s.exec(f)||[],d=m.exec(f)||(e=o.exec(f)),"webkit"===a[1]){var F=d||n.exec(f);F&&(a[3]=a[1],a[4]=a[2],a[1]="version"===F[1]&&(("iphone"===c[1]||"ipad"===c[1])&&"mobilesafari"||"android"===c[1]&&"aosp"||"safari")||e&&"webview"||F[1],a[2]=e?0:F[2])}b=t.exec(f)||u.exec(f)||v.exec(f)||D.exec(f)||w.exec(f)||x.exec(f)||y.exec(f)||z.exec(f)||A.exec(f)||B.exec(f)||C.exec(f)||E.exec(f)||[]}catch(G){a=[],b=[]}var H={browser:a[1]||"",version:a[2]||"0",engine:a[3],engineversion:a[4]||"0",os:c[1],osversion:c[2]||"0",isMobile:"iphone"===c[1]||"android"===c[1]&&!!d,skin:b[1]||"",ua:f};return"android"!==H.os||H.browser||(H.skin="ucbrowser",H.browser="aosp",H.engine="webkit",H.osversion="0"),a[1]&&(H[a[1]]=parseInt(H.version,10)||!0),b[1]&&(H.rank=g[H.skin]||0),H.shell=H.skin,H}),define("mo/domready",["finish"],function(a){var b,c=this,d=c.document,e="addEventListener",f="attachEvent",g="DOMContentLoaded",h="onreadystatechange";if("complete"===d.readyState)setTimeout(a,1);else if(d[e])b=function(){d.removeEventListener("READY",b,!1),a()},d[e](g,b,!1),c[e]("load",a,!1);else if(d[f]){b=function(){"complete"===d.readyState&&(d.detachEvent(h,b),a())},d[f](h,b),c[f]("load",a);var i=!1;try{i=null==c.frameElement}catch(j){}if(d.documentElement.doScroll&&i){var k=function(){try{d.documentElement.doScroll("left")}catch(b){return setTimeout(k,1),void 0}a()};k()}}}),define("../cardkit/supports",["mo/browsers","cardkit/env"],function(a,b){var c=this,d=c.document,e=d.body,f="android"===a.os,g="iphone"===a.os||"ipad"===a.os,h=g&&"webkit"===a.engine&&parseFloat(a.engineversion)<536,i=parseFloat(a.osversion)>=7,j=a.mozilla&&f,k="mac"===a.os||"windows"===a.os||"linux"===a.os,l={GOBACK_WHEN_POP:!h&&!a.aosp,REPLACE_HASH:!h&&!a.aosp,BROWSER_CONTROL:k||a.mobilesafari||f&&a.chrome,NO_POP_ON_CACHED_PAGE:j,RESIZE_WHEN_SCROLL:j,FIXED_BOTTOM_BUGGY:a.crios,NEW_WIN:!h&&!a.aosp,CARD_SCROLL:!k&&!a.aosp,HIDE_ADDRESSBAR:!a.crios,PREVENT_WINDOW_SCROLL:!!a.mobilesafari,FULLSCREEN_MODE:a.webview||b.fullscreenMode,FOLDABLE_URLBAR:a.mobilesafari&&!i};return l.SAFARI_OVERFLOWSCROLL="webkitOverflowScrolling"in e.style&&(l.CARD_SCROLL||h),l.WINDOW_SCROLL=!l.CARD_SCROLL||f,l}),define("mo/lang/es5",[],function(){function a(){}var b=this,c=b.Array,d=b.String,e=b.Object,f=b.Function,g=e.prototype,h=c.prototype,i=f.prototype,j=g.toString;i.bind||(i.bind=function(b){var c=this,d=h.slice.call(arguments,1),f=function(){var a=d.concat(h.slice.call(arguments));if(this instanceof f){var g=c.apply(this,a);return e(g)===g?g:this}return c.apply(b,a)};return c.prototype&&(a.prototype=c.prototype,f.prototype=new a,a.prototype=null),f});var k=i.call,l=k.bind(g.hasOwnProperty),j=k.bind(g.toString);h.filter||(h.filter=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c}),h.forEach||(h.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)}),h.map||(h.map=function(a,b){for(var c=0,d=[],e=this.length;e>c;c++)c in this&&(d[c]=a.call(b,this[c],c,this));return d}),h.reduce||(h.reduce=function(a,b){for(var c=1,d=this[0],e=this.length;e>c;c++)c in this&&(d=a.call(b,d,this[c],c,this));return d}),h.some||(h.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1}),h.every||(h.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),h.indexOf||(h.indexOf=function(a,b){var c=this.length;for(b=parseInt(b,10)||0,0>b&&(b+=c);c>b;b++)if(b in this&&this[b]===a)return b;return-1}),h.lastIndexOf||(h.lastIndexOf=function(a,b){var c=this.length;for(b=parseInt(b,10)||c-1,0>b&&(b+=c);b>-1;b--)if(b in this&&this[b]===a)return b;return-1}),c.isArray||(c.isArray=function(a){return"[object Array]"===j.call(a)});var m=/\S/,n=/^\s+/,o=/\s+$/;m.test(" ")&&(n=/^[\s\xA0]+/,o=/[\s\xA0]+$/),d.prototype.trim||(d.prototype.trim=function(a){return null==a?"":a.toString().replace(n,"").replace(o,"")}),e.keys||(e.keys=function(a){var b=[];for(var c in a)l(a,c)&&b.push(c);return b}),e.create||(e.create=function(a){function b(){}return b.prototype=a,new b}),e.getPrototypeOf||(e.getPrototypeOf=function(a){return a.__proto__||a.constructor.prototype})}),define("mo/lang/type",["mo/lang/es5"],function(a,b,c){function d(a){return null==a?String(a):g[e.call(a)]||"object"}var e=Object.prototype.toString,f=Array.prototype,g={};f.forEach.call("Boolean Number String Function Array Date RegExp Object".split(" "),function(a){this["[object "+a+"]"]=a.toLowerCase()},g),c.type=d,c.isFunction=function(a){return"[object Function]"===e.call(a)},c.isWindow=function(a){return"setInterval"in a},c.isEmptyObject=function(a){for(var b in a)return b=null,!1;return!0}}),define("mo/lang/mix",["mo/lang/es5","mo/lang/type"],function(a,b,c,d){function e(a){var b,c,d,f,g=arguments,h=g.length,i={number:1,"boolean":2,string:3};"object"!=typeof g[h-1]?(c=g[h-1]||0,h--):c=0;for(var j=1;h>j;j++)if(b=g[j],Array.isArray(b))for(a=!i[typeof a]&&a||[],f=b.length,d=0;f>d;d++)a[d]=c>=1&&b[d]&&"object"==typeof b[d]?e(a[d],b[d],c-1):b[d];else{a=!i[typeof a]&&a||{};for(d in b)a[d]=c>=1&&b[d]&&"object"==typeof b[d]?e(a[d],b[d],c-1):b[d]}return a}function f(a){var b,c,d,e,g,i,j,k=arguments,l=k.length,m={object:1,array:2};"object"!=typeof k[l-1]?(c=k[l-1]||0,l--):c=0;for(var n=1;l>n;n++)if(b=k[n],Array.isArray(a))a=a||[],g={},i=[],j="__oz_uniqmark_"+(+new Date+Math.random()),b=b.concat(a),a.length=0,b.forEach(function(b){b&&"object"==typeof b?b[j]||(c>=1&&Array.isArray(b)?a.push(f(b,[],c-1)):a.push(b),b[j]=1,i.push(b)):(e=typeof b+"_"+b,this[e]||(a.push(b),this[e]=1))},g),i.forEach(function(a){delete a[j]});else{a=a||{};for(d in b)a.hasOwnProperty(d)?c>=1&&d&&m[h(a[d])]+0===m[h(b[d])]+0&&(a[d]=f(a[d],b[d],c-1)):a[d]=b[d]}return a}function g(a){var b,c,d,e,f,i,j,k=arguments,l=k.length,m={object:1,array:2};"object"!=typeof k[l-1]?(c=k[l-1]||0,l--):c=0;for(var n=1;l>n;n++)if(b=k[n],Array.isArray(a))a=a||[],f={},i=[],j="__oz_uniqmark_"+(+new Date+Math.random()),a.forEach(function(a){a&&"object"==typeof a&&!a[j]?(a[j]=1,i.push(a)):(e=typeof a+"_"+a,this[e]=1)},f),a.length=0,b.forEach(function(b){b&&"object"==typeof b?1===b[j]&&(a.push(b),b[j]=2):(e=typeof b+"_"+b,1===this[e]&&(a.push(b),this[e]=2))},f),i.forEach(function(a){delete a[j]});else{a=a||{};for(d in a)b.hasOwnProperty(d)?c>=1&&d&&m[h(a[d])]+0===m[h(b[d])]+0&&(a[d]=g(a[d],b[d],c-1)):delete a[d]}return a}var h=b.type;d.mix=e,d.merge=f,d.interset=g,d.copy=function(a,b){return e(null,a,b)},d.occupy=function(a,b,c){return e(g(a,b,c),b,c)},d.defaults=f,d.config=function(a,b,c,d){return e(f(a,c,d),g(e(null,b,d),c,d),d)},d.unique=function(a,b){return f(a,[],b)}}),define("mo/lang/oop",["mo/lang/es5","mo/lang/mix"],function(a,b,c,d){function e(a,b,c){return a.apply(b,c)}var f=b.mix;d.construct=function(a,b,c){b&&!Array.isArray(b)&&(c=b),c||(c=function(){this.superConstructor.apply(this,arguments)});var d=Object.create(a.prototype),g=Object.create(a.prototype),h=function(){var b=this;return this.constructor=h,this.superConstructor=function(){e.prototype=a.prototype;var c=new e(a,b,arguments);for(var d in c)b[d]||(b[d]=g[d]=c[d])},this.superClass=g,c.apply(this,arguments)};return h.prototype=d,b&&(b=f.apply(this,b),f(d,b),f(g,b)),h}}),define("mo/lang/struct",["mo/lang/es5","mo/lang/mix"],function(a,b,c,d){var e=b.mix;d.index=function(a,b){for(var c,d={},e=0,f=a.length;f>e;e++)c=a[e],b&&"object"==typeof c?d[c[b]]=c:d[c]=!0;return d},d.fnQueue=function(){function a(a){return function(){var b,d;for(c=this.slice().reverse();d=c.pop();)b=d[a].apply(d,arguments);return c=!1,b}}var b=[],c=!1;return e(b,{call:a("call"),apply:a("apply"),clear:function(a){if(a){for(var b=this.length,d=b-c.length,e=this.length-1;e>=0;e--)this[e]===a&&(this.splice(e,1),c&&e>=d&&c.splice(b-e-1,1));if(0>e)return!1}else this.length=0;return!0}}),b}}),define("mo/lang",["mo/lang/es5","mo/lang/type","mo/lang/mix","mo/lang/struct","mo/lang/oop"],function(a,b,c,d,e,f,g){var h=this,i=h.window;c.mix(g,b,c,d,e),g.ns=function(a,b,c){for(var d,e=c||i,f=a.split(".").reverse();(d=f.pop())&&f.length>0;){if("undefined"==typeof e[d])e[d]={};else if("object"!=typeof e[d])return!1;e=e[d]}return"undefined"!=typeof b&&(e[d]=b),e[d]}}),define("dollar/origin",["mo/lang/es5","mo/lang/mix","mo/lang/type"],function(a,b,c){function d(a,b){if(a){if(a.constructor===d)return a;if("string"!=typeof a){var c=new d;return a.push===L||a[0]?L.apply(c,M.call(a)):L.call(c,a),c}return a=a.trim(),I.test(a)?t(a):b?d(b).find(a):Q.find(a)}return this===z?new d:void 0}function e(a){return a}function f(a,b){return a&&a[E](b)}function g(a,b){return function(c){return b&&(c=c[b]),f(c,a)&&this.push(c),c}}function h(a){return function(c){return d(b.unique([void 0,A,null].concat(this._map(c?function(b){var d=b[a];return d&&f(d,c)?d:void 0}:function(b){return b[a]}))).slice(3))}}function i(a,c,e){return function(g,h){e||(h=g);var i=new d;return this.forEach(function(b){var i,j=c?b.parentNode[c]:b;e&&(i=d(g,b.parentNode));do{if(i&&i.indexOf(j)>-1)break;b===j||h&&!f(j,h)||this.push(j)}while(j=j[a])},i),b.unique(i)}}function j(a,b,c,d,e){var f=J(b);return a.forEach(function(a,g){d.call(e,a,f?b.call(this,g,c&&a[c]):b)},a),a}function k(a,b,c){return function(d,e){if("object"==typeof d)if(c)c(this,d);else for(var f in d)this.forEach(function(b){a(b,this,d[this])},f);else{if(void 0===e)return b(this[0],d);var g=J(e);this.forEach(function(c,f){a(c,d,g?e.call(this,f,b(c,d)):e)},this)}return this}}function l(a){function b(c,d){if("object"==typeof c)for(var e in c)b.call(this,[e,c[e]]);else d&&(c=m.aliases[c]||c,this.forEach(function(b){b[a+"EventListener"](c,this,!1)},d));return this}return b}function m(a,c){var d=!0,e=G[a],f=document.createEvent(e&&"TouchEvent"||F[a]&&"MouseEvents"||"Events");return c&&("bubbles"in c&&(d=!!c.bubbles,delete c.bubbles),b.mix(f,c)),a=m.aliases[a]||a,f[e&&"initTouchEvent"||"initEvent"](a,d,!0),f}function n(a,c,e){return this===d?a=d(a):(e=c,c=a,a=this),"string"==typeof c&&(c=m(c)),b.mix(c,e),a.forEach("submit"!=c.type||c.defaultPrevented?function(a){"dispatchEvent"in a&&a.dispatchEvent(this)}:function(a){a.submit()},c),this}function o(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function p(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function q(a,b){return"number"==typeof b&&!H[a]&&b+"px"||b}function r(a){var b=O[a];if(!b){var c=document.createElement(a);A.body.appendChild(c),b=N(c,"").getPropertyValue("display"),c.parentNode.removeChild(c),"none"===b&&(b="block"),O[a]=b}return b}function s(a){return function(){return this[0]===z?z["inner"+a]:this[0]===A?A.documentElement["offset"+a]:(this.offset()||{})[a.toLowerCase()]}}function t(a,b){var c=(I.exec(a)||[])[0]||a,e=P[c];e||(e=P[c]="tr"===c&&document.createElement("tbody")||("tbody"===c||"thead"===c||"tfoot"===c)&&document.createElement("table")||("td"===c||"th"===c)&&document.createElement("tr")||document.createElement("div")),e.innerHTML=a;var f=new d;if(L.apply(f,M.call(e.childNodes)),f.forEach(function(a){this.removeChild(a)},e),b)for(var g in b)f.attr(g,b[g]);return f}function u(a,b,c){switch("SCRIPT"!==b.nodeName.toUpperCase()||b.type&&"text/javascript"!==b.type||z.eval.call(z,b.innerHTML),c){case 1:a.appendChild(b);break;case 2:a.parentNode.insertBefore(b,a);break;case 3:a.insertBefore(b,a.firstChild);break;case 4:a.parentNode.insertBefore(b,a.nextSibling)}}function v(a,b){var c=b?function(b){u(b,this,a)}:function(b){u(this,b,a)};return function(a){return this.forEach(function(a){this.forEach(c,a)},d(a)),this}}function w(a){return v(a,!0)}function x(a){return v(a)}function y(a){return K.call(a,function(a){return"object"==typeof a?a._slice():a})}var z=this,A=z.document,B="nextElementSibling",C="previousElementSibling",D="firstElementChild",E=["webkitMatchesSelector","mozMatchesSelector","matchesSelector"].map(function(a){return this[a]&&a},A.body).filter(e)[0],F={click:1,mousedown:1,mouseup:1,mousemove:1},G={touchstart:1,touchmove:1,touchend:1,touchcancel:1},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=c.isFunction,K=Array.prototype.map,L=Array.prototype.push,M=Array.prototype.slice,N=document.defaultView.getComputedStyle,O={},P={},Q=d.fn=d.prototype=[];["map","filter","slice","reverse","sort"].forEach(function(a){var b=this["_"+a]=this[a];this[a]=function(){return d(b.apply(this,arguments))}},Q);var R=Q._concat=Q.concat;Q.concat=function(){return d(R.apply(this._slice(),y(arguments)))};var S=Q._splice=Q.splice;return Q.splice=function(){return d(S.apply(this,y(arguments)))},b.mix(Q,{constructor:d,toString:function(){return this.join(",")},find:function(a){var b,c=new d;if(this===Q?b=[A]:c.prevObject=b=this,/^#[\w_]+$/.test(a)){var e=((b[0]||A).getElementById||A.getElementById).call(A,a.substr(1));e&&c.push(e)}else{var f=/\W/.test(a)?"querySelectorAll":"getElementsByTagName";b[1]?b.forEach(function(b){this.push.apply(this,M.call(b[f](a)))},c):b[0]&&c.push.apply(c,M.call(b[0][f](a)))}return c},eq:function(a){return-1===a?this.slice(-1):this.slice(a,a+1)},not:function(a){return this.filter(function(b){return b&&!this(b,a)},f)},has:function(a){return this.filter(function(b){return this(b,a)},f)},parent:h("parentNode"),parents:function(a){for(var b=new d,c=this,e=a?g(a,"parentNode"):function(a){return this[this.push(a.parentNode)-1]};c.length;)c=c.map(e,b);return b},closest:function(a){for(var b=new d,c=this,e=g(a,"parentNode");c.length&&!b.length;)c=c.map(e,b);return b.length&&b||this},siblings:i(B,D),next:h(B),nextAll:i(B),nextUntil:i(B,!1,!0),prev:h(C),prevAll:i(C),prevUntil:i(C,!1,!0),children:function(){var a=new d;return this.forEach(function(b){this(a,d(b.children))},b.merge),a},contents:function(){var a=new d;return this.forEach(function(b){this(a,d(b.childNodes))},b.merge),a},is:function(a){return this.some(function(b){return f(b,a)})},hasClass:function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].classList.contains(a))return!0;return!1},isEmpty:function(){return this.every(function(a){if(!a.innerHTML){if(a.innerHTML=" ",!a.innerHTML)return!0;a.innerHTML=""}return!1})},addClass:function(a){return j(this,a,"className",function(a,b){a.classList.add(b)})},removeClass:function(a){return j(this,a,"className",function(a,b){a.classList.remove(b)})},toggleClass:function(a,b){return j(this,a,"className",function(a,c){a.classList[void 0===b&&"toggle"||this&&"add"||"remove"](c)})},attr:k(function(a,b,c){a.setAttribute(b,c)},function(a,b){return a&&a.getAttribute(b)}),removeAttr:function(a){return this.forEach(function(a){a.removeAttribute(this)},a),this},prop:k(function(a,b,c){a[b]=c},function(a,b){return(a||{})[b]}),removeProp:function(a){return this.forEach(function(a){delete a[this]},a),this},data:k(function(a,b,c){a.dataset[o(b)]=c},function(a,c){var d=(a||{}).dataset;return c?d[o(c)]:b.mix({},d)}),removeData:function(a){return this.forEach(function(a){delete a.dataset[this]},a),this},val:function(a){var b=this[0];return void 0!==a?j(this,a,"value",function(a,b){a.value=b}):b?b.multiple?d("option",this).filter(function(a){return a.selected}).map(function(a){return a.value}):b.value:void 0},empty:function(){return this.forEach(function(a){a.innerHTML=""}),this},html:function(a){return void 0===a?(this[0]||{}).innerHTML:j(this,a,"innerHTML",function(a,b){I.test(b)?this(a).empty().append(b):a.innerHTML=b},d)},text:function(a){return void 0===a?(this[0]||{}).textContent:j(this,a,"textContent",function(a,b){a.textContent=b})},clone:function(){return this.map(function(a){return a.cloneNode(!0)})},css:k(function(a,b,c){var d=p(b);c||0===c?a.style.cssText+=";"+d+":"+q(d,c):a.style.removeProperty(d)},function(a,b){return a&&(a.style[o(b)]||N(a,"").getPropertyValue(b))},function(a,b){var c,d,e="";for(var f in b)d=b[f],c=p(f),d||0===d?e+=c+":"+q(c,d)+";":a.forEach(function(a){a.style.removeProperty(this)},c);a.forEach(function(a){a.style.cssText+=";"+this},e)}),hide:function(){return this.css("display","none")},show:function(){return this.forEach(function(a){"none"===a.style.display&&(a.style.display=null),"none"===this(a,"").getPropertyValue("display")&&(a.style.display=r(a.nodeName))},N),this},offset:function(){var a=this[0].getBoundingClientRect();return{left:a.left+z.pageXOffset,top:a.top+z.pageYOffset,width:a.width,height:a.height}},width:s("Width"),height:s("Height"),appendTo:w(1),append:x(1),prependTo:w(3),prepend:x(3),insertBefore:w(2),before:x(2),insertAfter:w(4),after:x(4),replaceAll:function(a){var b=d(a);return this.insertBefore(b),b.remove(),this},replaceWith:function(a){return d(a).replaceAll(this)},wrap:function(a){return j(this,a,!1,function(a,b){this(b).insertBefore(a).append(a)},d)},wrapAll:function(a){return d(a).insertBefore(this.eq(0)).append(this),this},wrapInner:function(a){return j(this,a,!1,function(a,b){this(a).contents().wrapAll(b)},d)},unwrap:function(){return this.parent().forEach(function(a){this(a).children().replaceAll(a)},d),this},remove:function(){return this.forEach(function(a){var b=a.parentNode;b&&b.removeChild(a)}),this},on:l("add"),off:l("remove"),once:function(a,b){var c=function(){return d(this).off(a,c),b.apply(this,arguments)};d(this).on(a,c)},trigger:n,end:function(){return this.prevObject||new d},each:function(a){for(var b=0,c=this.length;c>b;b++){var d=a.call(this[b],b);if(d===!1)break}return this}}),Q.bind=Q.on,Q.unbind=Q.off,m.aliases={},d.find=d,d.matchesSelector=f,d.createNodes=t,d.camelize=o,d.dasherize=p,d.Event=m,d.trigger=n,d._kvAccess=k,d._eachNode=j,d.VERSION="1.2.0",d}),define("dollar",["dollar/origin"],function(a){return a}),define("../cardkit/parser/util",["dollar","mo/lang"],function(a){function b(a){if(a)for(var b,c=0,d=a.length;d>c;c++)if(b=a[c].href)return b}function c(a){return a.map(function(a){return a.textContent}).join("")}function d(b){return b.map(function(a){return a.innerHTML},a).join("")}function e(b,c){return b.map(function(a){var b=a.outerHTML;return c?b.replace(o,function(a,b,d){return d===c?b+"ck-"+d:a}):b},a).join("")}function f(a,b,c){return b.forEach(function(a){var b=a.outerHTML;b=b.replace(o,function(a,b,d){return d===c?b+"ck-"+d:a}),this.replaceWith(b)},a)}function g(a,b,c,d,e){var f=b.find(a);return f.length?f.map(function(b){var f=p.getSource(b,c);if(f){var g=f.find(a);return g[0]||(g=f),d(g,b,e,c)}return d(b,void 0,e,c)}):f}function h(a,b,c,d){if(b&&"object"==typeof b){b=c(b,null,null,d);for(var e in b)!b[e]||b[e]instanceof Array&&!b[e].length||(a[e]=b[e])}return a}function i(c,e){c=a(c);var f=c&&{html:d(c),href:b(c)}||{};return h(f,e,i)}function j(c,e,f,i){c=a(c);var o,p,q,r,s,t=g(".ckd-title",c,i,m,"title")[0],u=g(".ckd-author",c,i,m,"author")[0],v=g(".ckd-icon",c,i,k,"icon")[0];t||u||v?(o=g(".ckd-title-link-alone",c,i,l,"title-link-alone")[0],p=o||g(".ckd-title-link-extern",c,i,l,"title-link-extern")[0],q=p||g(".ckd-title-link",c,i,l,"title-link")[0]||g(".ckd-title",c,i,l,"title")[0],r=g(".ckd-author-link-extern",c,i,l,"author-link-extern")[0],s=r||g(".ckd-author-link",c,i,l,"author-link")[0]||g(".ckd-author",c,i,l,"author")[0]):(t=d(c),o=c.hasClass("ckd-title-link-alone"),p=c.hasClass("ckd-title-link-extern"),q=b(c));var w={title:t,href:!o&&q,hrefAlone:o,hrefExtern:p,titlePrefix:g(".ckd-title-prefix",c,i,n,"title-prefix"),titleSuffix:g(".ckd-title-suffix",c,i,n,"title-suffix"),titleTag:g(".ckd-title-tag",c,i,n,"title-tag"),icon:v,desc:g(".ckd-desc",c,i,n,"desc").concat(g(".ckd-subtitle",c,i,n,"subtitle")),info:g(".ckd-info",c,i,n,"info"),opt:g(".ckd-opt",c,i,n,"opt"),content:g(".ckd-content",c,i,n,"content"),meta:g(".ckd-meta",c,i,n,"meta"),author:u,authorUrl:s,authorUrlExtern:r,authorPrefix:g(".ckd-author-prefix",c,i,n,"author-prefix"),authorSuffix:g(".ckd-author-suffix",c,i,n,"author-suffix"),avatar:g(".ckd-avatar",c,i,k,"avatar")[0],authorDesc:g(".ckd-author-desc",c,i,n,"author-desc"),authorInfo:g(".ckd-author-info",c,i,n,"author-info"),authorMeta:g(".ckd-author-meta",c,i,n,"author-meta")};return h(w,e,j,i)}function k(b){return b=a(b),b.attr("src")}function l(c){return c=a(c),b(c)}function m(b){return b=a(b),d(b)}function n(b,c,d){return b=a(b),e(b,d)}var o=/([^\w-])ckd\-([\w\-]+)(?=[^\w\-])/,p={mergeSource:h,getSource:function(b,c){var d=a(b).data("source");if(d){var e=c.find("."+d);return e[0]&&e||!1}},getHref:b,getText:c,getInnerHTML:d,getOuterHTML:e,replaceOuterHTML:f,getCustom:g,getHd:i,getItemData:j,getItemDataOuter:n};return p}),define("../cardkit/parser/navdrawer",["dollar","mo/lang","../cardkit/parser/util"],function(a,b,c){function d(b,d){b=a(b);var h=c.getSource(b,d),i={},j=f(h&&h.find(".ckd-hd")),k=h&&h.find(".ckd-content").map(function(a){return e(".ckd-content",a,d,g,"content").join("")||c.getInnerHTML(a)})||a(),l=e(".ckd-hd",b,d,f)[0]||{},m=e(".ckd-content",b,d,g,"content").join("")||"",n={config:i,hd:void 0===l.html?j.html:l.html,content:m+k.join("")};return n}var e=c.getCustom,f=c.getHd,g=c.getItemDataOuter;return d}),define("../cardkit/parser/actionbar",["dollar","mo/lang","../cardkit/parser/util","../cardkit/supports"],function(a,b,c,d){function e(b,e){b=a(b);var f=c.getSource(b,e),g={limit:b.data("cfgLimit")||!d.FULLSCREEN_MODE&&1||0},h=f&&f.find(".ckd-item").map(function(a){return c.getItemDataOuter(a,null,"item")})||a(),i=f&&f.find(".ckd-overflow-item").map(function(a){return c.getItemDataOuter(a,null,"overflow-item")})||a(),j=c.getCustom(".ckd-item",b,e,c.getItemDataOuter,"item"),k=c.getCustom(".ckd-overflow-item",b,e,c.getItemDataOuter,"overflow-item");if(f===!1&&!j.length)return!1;var l={config:g,items:j.concat(h||a()),overflowItems:k.concat(i||a())};return l}return e}),define("../cardkit/parser/banner",["dollar","mo/lang","../cardkit/parser/util"],function(a,b,c){function d(b,d){b=a(b);var e=c.getSource(b,d),f={},g=e&&c.getOuterHTML(e),h={config:f,content:b[0].innerHTML+(g||"")};return h.content&&/\S/.test(h.content)&&(h.hasContent=!0),h}return d}),define("../cardkit/parser/form",["dollar","mo/lang","../cardkit/parser/util"],function(a,b,c){function d(b,d){b=a(b);var i=c.getSource(b,d),j={blank:b.data("cfgBlank"),plainhd:b.data("cfgPlainhd")},k=g(i&&i.find(".ckd-hd")),l=g(i&&i.find(".ckd-hd-link-extern")),m=l.href?l:g(i&&i.find(".ckd-hd-link")),n=h(i&&i.find(".ckd-hdopt"),"hdopt"),o=g(i&&i.find(".ckd-ft")),p=i&&i.find(".ckd-item").map(function(a){return e(a,null,null,d)})||a(),q=f(".ckd-hd",b,d,g)[0]||{},r=f(".ckd-hd-link-extern",b,d,g)[0]||{},s=r.href?r:f(".ckd-hd-link",b,d,g)[0]||{},t=f(".ckd-hdopt",b,d,h,"hdopt").join(""),u=f(".ckd-ft",b,d,g)[0]||{},v=f(".ckd-item",b,d,e),w={config:j,style:b.data("style"),items:v.concat(p||a()),hd:void 0===q.html?k.html:q.html,hd_url:s.href||null!==s.href&&m.href||q.href||null!==q.href&&k.href,hd_url_extern:r.href||l.href,hd_opt:t+n,ft:void 0===u.html?o.html:u.html};return w}function e(b,d,g,i){b=a(b);var j={content:f(".ckd-content",b,i,h,"content").join("")||c.getInnerHTML(b)};return c.mergeSource(j,d,e,i)}var f=c.getCustom,g=c.getHd,h=c.getItemDataOuter;return d}),define("../cardkit/parser/list",["dollar","mo/lang","../cardkit/parser/util"],function(a,b,c){function d(b,d){b=a(b);var i=c.getSource(b,d),j={blank:b.data("cfgBlank"),limit:b.data("cfgLimit"),col:b.data("cfgCol"),paper:b.data("cfgPaper"),plain:b.data("cfgPlain"),plainhd:b.data("cfgPlainhd")},k=f(i&&i.find(".ckd-hd")),l=f(i&&i.find(".ckd-hd-link-extern")),m=l.href?l:f(i&&i.find(".ckd-hd-link")),n=h(i&&i.find(".ckd-hdopt"),"hdopt"),o=f(i&&i.find(".ckd-ft")),p=i&&i.find(".ckd-item").map(function(a){return g(a,null,null,d)})||a(),q=e(".ckd-hd",b,d,f)[0]||{},r=e(".ckd-hd-link-extern",b,d,f)[0]||{},s=r.href?r:e(".ckd-hd-link",b,d,f)[0]||{},t=e(".ckd-hdopt",b,d,h,"hdopt").join(""),u=e(".ckd-ft",b,d,f)[0]||{},v=c.getCustom(".ckd-item",b,d,g),w={config:j,style:b.data("style"),items:v.concat(p),hd:void 0===q.html?k.html:q.html,hd_url:s.href||null!==s.href&&m.href||q.href||null!==q.href&&k.href,hd_url_extern:r.href||l.href,hd_opt:t+n,ft:void 0===u.html?o.html:u.html};return(j.plain||j.plainhd||"split"===w.style)&&(w.hasSplitHd=!0),w}var e=c.getCustom,f=c.getHd,g=c.getItemData,h=c.getItemDataOuter;return d}),define("../cardkit/parser/mini",["dollar","mo/lang","../cardkit/parser/list"],function(a,b,c){function d(a,b){var d=c(a,b);return d.hasSplitHd=!0,d}return d}),define("../cardkit/parser/box",["dollar","mo/lang","../cardkit/parser/util"],function(a,b,c){function d(b,d){b=a(b);var k=c.getSource(b,d),l={disableReader:b.data("cfgDisableReader"),paper:b.data("cfgPaper"),plain:b.data("cfgPlain"),plainhd:b.data("cfgPlainhd")},m=i(k&&k.find(".ckd-hd")),n=i(k&&k.find(".ckd-hd-link-extern")),o=n.href?n:i(k&&k.find(".ckd-hd-link")),p=j(k&&k.find(".ckd-hdopt"),"hdopt"),q=i(k&&k.find(".ckd-ft")),r=k&&c.getOuterHTML(k.find(".ckd-content")),s=h(".ckd-hd",b,d,f)[0]||{},t=h(".ckd-hd-link-extern",b,d,f)[0]||{},u=t.href?t:h(".ckd-hd-link",b,d,f)[0]||{},v=h(".ckd-hdopt",b,d,g,"hdopt").join(""),w=h(".ckd-ft",b,d,f)[0]||{};h(".ckd-content",b,d,e);var x={config:l,style:b.data("style"),content:b[0].innerHTML+(r||""),hd:void 0===s.html?m.html:s.html,hd_url:u.href||null!==u.href&&o.href||s.href||null!==s.href&&m.href,hd_url_extern:t.href||n.href,hd_opt:v+p,ft:void 0===w.html?q.html:w.html||(l.plain||l.paper)&&" "};return x.content&&/\S/.test(x.content)&&(x.hasContent=!0),x}function e(b,c){c?a(c).replaceWith(b.clone()):(b=a(b),/\S/.test(b.html()||"")||b.remove())}function f(b,c){var d=i(b,c);return a(b).remove(),d}function g(b,c,d){var e=j(b,c,d);return a(b).remove(),e
}var h=c.getCustom,i=c.getHd,j=c.getItemDataOuter;return d}),define("../cardkit/tpl/layout/actionbar",[],function(){return{template:'\n{% if (actionbar.overflowItems.length) { %}\n<button type="button" class="ck-top-overflow ck-item"></button>\n{% } %}\n\n{% actionbar.items.reverse().forEach(function(item){ %}\n\n    {%=(item)%}\n\n{% }); %}\n\n<span class="ck-top-overflow-items">\n{% actionbar.overflowItems.forEach(function(item){ %}\n\n    {%=(item)%}\n\n{% }); %}\n</span>\n'}}),define("../cardkit/tpl/layout/navdrawer",[],function(){return{template:'\n{% if (navdrawer.hd) { %}\n<header>{%=navdrawer.hd%}</header>\n{% } %}\n\n<article>\n    <div class="ck-nav-wrap">\n        <div class="ck-nav-content">{%=navdrawer.content%}</div>\n        <div class="ck-footer"></div>\n    </div>\n</article>\n\n'}}),define("../cardkit/tpl/unit/blank",[],function(){return{template:'\n<div class="ck-blank-unit">\n    <article class="ck-unit-wrap">\n        <div>{%=(data.config.blank || \'目前还没有内容\')%}</div>\n    </article>\n</div>\n'}}),define("../cardkit/tpl/unit/banner",[],function(){return{template:"\n<article class=\"ck-unit-wrap {%=(!data.hasContent && 'empty' || '')%}\">\n\n    {% if (data.hasContent) { %}\n    <section>{%= data.content %}</section>\n    {% } %}\n\n</article>\n\n<div class=\"ck-top-tips\"><span>tips: 点击顶栏可返回顶部，向下拖拽顶栏可显示网址</span></div>\n\n"}}),define("../cardkit/tpl/unit/form",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.config.plain || data.config.plainhd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.config.plain && !data.config.plainhd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <section>\n    {% if (!data.items.length) { %}\n    <div class="ck-item blank">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n    {% } %}\n    {% data.items.forEach(function(item){ %}\n        <div class="ck-item">\n            {%= item.content %}\n        </div>\n    {% }); %}\n    </section>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n\n'}}),define("../cardkit/tpl/unit/mini",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.hasSplitHd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap {%= (data.items.length > 1 ? \'slide\' : \'\') %}">\n\n    {% if (!data.hasSplitHd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <div class="ck-list-wrap">\n    {% if (data.items.length) { %}\n\n        <div class="ck-list">\n        {% data.items.forEach(function(item, i){ %}\n            <div class="ck-item {%= (item.href && \'clickable\' || \'\') %}">\n\n                <div class="ck-initem">\n\n                    {% if (item.href) { %}\n                    <a href="{%= item.href %}" class="ck-link ck-link-mask {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}"></a>\n                    {% } %}\n\n                    <div class="ck-title-box">\n\n                        {%= item.opt.join(\'\') %}\n\n                        {% if (item.icon) { %}\n                        <span class="ck-icon">\n                            <img src="{%= item.icon %}"/>\n                        </span>\n                        {% } %}\n\n                        <div class="ck-title-set">\n\n                            {% if (item.title) { %}\n                            <div class="ck-title-line">\n                                {%= item.titlePrefix.join(\'\') %}\n\n                                {% if (item.hrefAlone) { %}\n                                <a href="{%= item.hrefAlone %}" class="ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">{%= item.title %}</a>\n                                {% } else { %}\n                                <span class="ck-title">{%= item.title %}</span>\n                                {% } %}\n\n                                {%= item.titleSuffix.join(\'\') %}\n                                {%= item.titleTag.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.info.length) { %}\n                            <div class="ck-info-wrap">\n                                {%= item.info.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.desc.length) { %}\n                            <div class="ck-desc-wrap">\n                                {%= item.desc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.content.length) { %}\n                        <div class="ck-content-wrap">\n                            {%= item.content.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                        {% if (item.meta.length) { %}\n                        <div class="ck-meta-wrap">\n                            {%= item.meta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                    </div>\n\n                    {% if (item.author || item.authorDesc.length || item.authorMeta.length) { %}\n                    <div class="ck-author-box">\n\n                        {% if (item.avatar) { %}\n                            {% if (item.authorUrl) { %}\n                            <a href="{%= item.authorUrl %}" class="ck-avatar ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.avatar %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-avatar">\n                                <img src="{%= item.avatar %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-author-set">\n\n                            <div class="ck-author-line">\n                                {%= item.authorPrefix.join(\'\') %}\n                                {% if (item.authorUrl) { %}\n                                <a href="{%= item.authorUrl %}" class="ck-author ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">{%= item.author %}</a>\n                                {% } else { %}\n                                <span class="ck-author">{%= item.author %}</span>\n                                {% } %}\n                                {%= item.authorSuffix.join(\'\') %}\n                            </div>\n\n                            {% if (item.authorInfo.length) { %}\n                            <div class="ck-author-info-wrap">\n                                {%= item.authorInfo.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.authorDesc.length) { %}\n                            <div class="ck-author-desc-wrap">\n                                {%= item.authorDesc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.authorMeta.length) { %}\n                        <div class="ck-author-meta-wrap">\n                            {%= item.authorMeta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n\n                    </div>\n                    {% } %}\n\n                </div>\n\n            </div>\n        {% }); %}\n        </div>\n\n    {% } else { %}\n\n        <div class="ck-list">\n            <div class="ck-item blank">\n                <div class="ck-initem">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n            </div>\n        </div>\n\n    {% } %}\n    </div>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n\n'}}),define("../cardkit/tpl/unit/list",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.hasSplitHd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.hasSplitHd) { %}\n        {%= hd() %}\n    {% } %}\n\n    <div class="ck-list-wrap">\n    {% if (data.items.length) { %}\n\n        <div class="ck-list">\n        {% data.items.forEach(function(item, i){ %}\n            {% if (i && (i % data.config.col === 0)) { %}\n            </div><div class="ck-list">\n            {% } %}\n            <div class="ck-item {%= (item.href && \'clickable\' || \'\') %}" \n                    style="width:{%= (data.config.col ? Math.floor(1000/data.config.col)/10 + \'%\' : \'\') %};">\n\n                <div class="ck-initem">\n\n                    {% if (item.href) { %}\n                    <a href="{%= item.href %}" class="ck-link ck-link-mask {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}"></a>\n                    {% } %}\n\n                    <div class="ck-title-box">\n\n                        {%= item.opt.join(\'\') %}\n\n                        {% if (item.icon) { %}\n                            {% if (item.hrefAlone) { %}\n                            <a href="{%= item.hrefAlone %}" class="ck-icon ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.icon %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-icon">\n                                <img src="{%= item.icon %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-title-set">\n\n                            {% if (item.title) { %}\n                            <div class="ck-title-line">\n                                {%= item.titlePrefix.join(\'\') %}\n\n                                {% if (item.hrefAlone) { %}\n                                <a href="{%= item.hrefAlone %}" class="ck-link {%= (item.hrefExtern ? \'ck-link-extern\' : \'\') %}">{%= item.title %}</a>\n                                {% } else { %}\n                                <span class="ck-title">{%= item.title %}</span>\n                                {% } %}\n\n                                {%= item.titleSuffix.join(\'\') %}\n                                {%= item.titleTag.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.info.length) { %}\n                            <div class="ck-info-wrap">\n                                {%= item.info.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.desc.length) { %}\n                            <div class="ck-desc-wrap">\n                                {%= item.desc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.content.length) { %}\n                        <div class="ck-content-wrap">\n                            {%= item.content.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                        {% if (item.meta.length) { %}\n                        <div class="ck-meta-wrap">\n                            {%= item.meta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n                    </div>\n\n                    {% if (item.author || item.authorDesc.length || item.authorMeta.length) { %}\n                    <div class="ck-author-box">\n\n                        {% if (item.avatar) { %}\n                            {% if (item.authorUrl) { %}\n                            <a href="{%= item.authorUrl %}" class="ck-avatar ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">\n                                <img src="{%= item.avatar %}"/>\n                            </a>\n                            {% } else { %}\n                            <span class="ck-avatar">\n                                <img src="{%= item.avatar %}"/>\n                            </span>\n                            {% } %}\n                        {% } %}\n\n                        <div class="ck-author-set">\n\n                            <div class="ck-author-line">\n                                {%= item.authorPrefix.join(\'\') %}\n                                {% if (item.authorUrl) { %}\n                                <a href="{%= item.authorUrl %}" class="ck-author ck-link {%= (item.authorUrlExtern ? \'ck-link-extern\' : \'\') %}">{%= item.author %}</a>\n                                {% } else { %}\n                                <span class="ck-author">{%= item.author %}</span>\n                                {% } %}\n                                {%= item.authorSuffix.join(\'\') %}\n                            </div>\n\n                            {% if (item.authorInfo.length) { %}\n                            <div class="ck-author-info-wrap">\n                                {%= item.authorInfo.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                            {% if (item.authorDesc.length) { %}\n                            <div class="ck-author-desc-wrap">\n                                {%= item.authorDesc.join(\'\') %}\n                            </div>\n                            {% } %}\n\n                        </div>\n\n                        {% if (item.authorMeta.length) { %}\n                        <div class="ck-author-meta-wrap">\n                            {%= item.authorMeta.join(\'\') %}\n                        </div>\n                        {% } %}\n\n\n                    </div>\n                    {% } %}\n\n                </div>\n\n            </div>\n        {% }); %}\n        </div>\n\n    {% } else { %}\n\n        <div class="ck-list">\n            <div class="ck-item blank">\n                <div class="ck-initem">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n            </div>\n        </div>\n\n    {% } %}\n    </div>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("../cardkit/tpl/unit/box",[],function(){return{template:'\n{% function hd(){ %}\n    {% if (data.hd) { %}\n    <header class="ck-hd-wrap">\n\n        <span class="ck-hd {%= (data.hd_url && \'clickable\' || \'\') %}">\n            {% if (data.hd_url) { %}\n            <a href="{%= data.hd_url %}" class="ck-link ck-link-mask {%= (data.hd_url_extern ? \'ck-link-extern\' : \'\') %}"></a>\n            {% } %}\n            <span>{%= data.hd %}</span>\n        </span>\n\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt-wrap">{%=data.hd_opt%}</div>\n        {% } %}\n\n    </header>\n    {% } %}\n{% } %}\n\n{% if (data.config.plain || data.config.plainhd) { %}\n    {%= hd() %}\n{% } %}\n\n<article class="ck-unit-wrap">\n\n    {% if (!data.config.plain && !data.config.plainhd) { %}\n        {%= hd() %}\n    {% } %}\n\n    {% if (data.hasContent) { %}\n    <section>\n        {%= data.content %}\n    </section>\n    {% } %}\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("mo/template/string",[],function(a,b){b.format=function(a,b){return a.replace(/\{\{(\w+)\}\}/g,function(a,c){return null!=b[c]?b[c]:""})},b.escapeHTML=function(a){a=a||"";var b={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return a.replace(/[<>'"\{\}@]/g,function(a){return b[a]})},b.substr=function(a,b,c){if(!a||"string"!=typeof a)return"";var d=a.substr(0,b).replace(/([^\x00-\xff])/g,"$1 ").substr(0,b).replace(/([^\x00-\xff])\s/g,"$1");return c?c.call(d,d):a.length>d.length?d+"...":d},b.strsize=function(a){return a.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length}}),define("mo/template/micro",["mo/lang","mo/template/string"],function(a,b,c,d){function e(a,b,c){var g,h=d.tplSettings,i=c?"#"+c:"";if(/[\t\r\n% ]/.test(a))g=new Function(c||"obj","api","var __p=[];"+(c?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(c||"obj")+");"+"__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(h.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(h.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(c?"":"}")+"return __p.join('');");else if(g=h._cache[a+i],!g){var j=f.getElementById(a);j&&(g=h._cache[a+i]=e(j.innerHTML,!1,c))}return g?b?g(b,d.tplHelpers):g:""}var f=this.document;d.tplSettings={_cache:{},evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g},d.tplHelpers={mix:a.mix,escapeHTML:b.escapeHTML,substr:b.substr,include:e,_has:function(b){return function(c){return a.ns(c,void 0,b)}}},d.convertTpl=e,d.reloadTpl=function(a){delete d.tplSettings._cache[a]}}),define("mo/template",["mo/lang","mo/template/string","mo/template/micro"],function(a,b,c,d,e){a.mix(e,b,c),e.str2html=function(a){var b=document.createElement("div");b.innerHTML=a;var c=b.firstChild;if(1==b.childNodes.length)return c;var d=document.createDocumentFragment();do d.appendChild(c);while(c=b.firstChild);return d}}),define("../cardkit/render",["dollar","mo/lang","mo/template","../cardkit/tpl/unit/box","../cardkit/tpl/unit/list","../cardkit/tpl/unit/mini","../cardkit/tpl/unit/form","../cardkit/tpl/unit/banner","../cardkit/tpl/unit/blank","../cardkit/tpl/layout/navdrawer","../cardkit/tpl/layout/actionbar","../cardkit/parser/box","../cardkit/parser/list","../cardkit/parser/mini","../cardkit/parser/form","../cardkit/parser/banner","../cardkit/parser/actionbar","../cardkit/parser/navdrawer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a){new Function("",a.innerHTML).call(this)}var t={navdrawer:r,"page-actions":q,"card-actions":q},u=Array.prototype.slice,v='script[type="text/cardscript"]',w='<div class="ck-banner-unit"></div>',x={initCard:function(b,d,e,f){if(!f.isModal){b.find(v).forEach(s,b[0]),b.trigger("card:loaded",{card:b});var g=b.find(".ck-banner-unit");g[0]||(g=a(w)),b.prepend(g)}var h=b.find(".ck-box-unit, .ck-mini-unit, .ck-list-unit, .ck-form-unit, .ck-banner-unit"),j={blank:b.data("cfgBlank")},k=x.initUnit(h,d);k||f.isModal||"false"==j.blank||b.append(c.convertTpl(i.template,{config:j},"data")),f.isModal||(b.append(e.clone()),b.trigger("card:ready",{card:b}))},openCard:function(a,b){b.isModal||a.trigger("card:open",{card:a})},closeCard:function(a,b){b.isModal||a.trigger("card:close",{card:a})},initUnit:function(b,c){var d;return a(b).forEach(function(a){var b=(/ck-(\w+)-unit/.exec(a.className)||[])[1];b&&x[b](a,c)&&(d=!0)}),d},banner:function(a,b){var d=p(a,b);a.innerHTML=c.convertTpl(h.template,d,"data")},box:function(b,e){var f=l(b,e);return f.hasContent||f.hd?(b.innerHTML=c.convertTpl(d.template,f,"data"),!0):(a(b).remove(),void 0)},mini:function(b,d){var e=n(b,d);return e.items=e.items.filter(function(a){return a.title||a.author||a.content&&a.content.length?!0:!1},e),e.items.length||e.hd&&"false"!=e.config.blank?(e.config.limit&&e.config.limit<e.items.length&&(e.items.length=e.config.limit),b.innerHTML=c.convertTpl(f.template,e,"data"),!0):(a(b).remove(),void 0)},list:function(b,d){var f=m(b,d);return f.items=f.items.filter(function(a){var b=this.style;if("more"===b||"menu"===b){if(!a.title)return!1}else if("grid"===b){if(!a.icon)return!1}else if(!a.title&&!a.author)return!1;return!0},f),f.config.limit&&f.config.limit<f.items.length&&(f.items.length=f.config.limit),f.items.length||f.hd&&"false"!=f.config.blank?(b.innerHTML=c.convertTpl(e.template,f,"data"),!0):(a(b).remove(),void 0)},form:function(b,d){var e=o(b,d);return e.items.length||e.hd&&"false"!=e.config.blank?(b.innerHTML=c.convertTpl(g.template,e,"data"),!0):(a(b).remove(),void 0)},_frameConfig:{},_frameCustomized:{},setFrame:function(b,d,e,f){var g,h,i,l=this._frameConfig,m=this._frameCustomized,n={};for(var o in t)(!l[o]||m[o])&&(g=d.find(".ckcfg-"+o),g[0]&&(l[o]=t[o](g,f),l[o]&&(n[o]=!0))),i=b.find(".ckcfg-"+o),m[o]=!!i[0],m[o]&&(h=t[o](i,f),h?(l[o]=h,n[o]=!0):m[o]=!1);if(n["card-actions"]){var p=l.actionbar=l["card-actions"],q=p.items,r=p.overflowItems;q.push.apply(q,u.call(l["page-actions"].items)),r.push.apply(r,u.call(l["page-actions"].overflowItems)),r.unshift.apply(p.overflowItems,u.call(q.splice(p.config.limit))),a(".ck-top-actions").html(c.convertTpl(k.template,l))}n.navdrawer&&e.html(c.convertTpl(j.template,l))}};return x}),define("eventmaster",["mo/lang/es5","mo/lang/mix","mo/lang/struct"],function(a,b,c){function d(a){var b=this;a&&(this.subject=a.subject,this.trace=a.trace,this.traceStack=a.traceStack||[]),this.doneHandlers=j(),this.failHandlers=j(),this.observeHandlers=j(),this._alterQueue=j(),this._lastDoneQueue=[],this._lastFailQueue=[],this.status=0,this._argsCache=[],this.pipe={},l.forEach(function(a){this[a]=function(){return b[a].call(b,k.call(arguments))}},this.pipe)}function e(){var a=[],b=[],c=new d;return c._when=[],c._count=c._total=arguments.length,Array.prototype.forEach.call(arguments,function(c,d){function e(c){b[d]||(b[d]=!0,a[d]=c,0===--f._count&&(b.length=0,f._count=f._total,f.resolve.call(f,a)))}var f=this;f._when.push(c.bind(e))},c),c}function f(a,b){return a&&a.then?a.then(b.pipe.resolve,b.pipe.reject).progress(b.pipe.notify):void 0!==a&&b.resolve([a]),a}function g(a){return function(b){var c=this.lib[b];return c||(c=this.lib[b]=new d({subject:b,trace:this.trace,traceStack:this.traceStack})),c[a].apply(c,k.call(arguments,1)),this}}function h(a){a&&(this.trace=a.trace,this.traceStack=a.traceStack),this.lib={}}function i(a){return new h(a)}var j=c.fnQueue,k=Array.prototype.slice,l=["notify","fire","error","resolve","reject","reset","disable","enable"],m=d.prototype={then:function(a,b){var c=this.status;return b?2===c?this._resultCache=b.apply(this,this._argsCache):c||(this.failHandlers.push(b),this._lastFailQueue=this.failHandlers):this._lastFailQueue=[],a?1===c?this._resultCache=a.apply(this,this._argsCache):c||(this.doneHandlers.push(a),this._lastDoneQueue=this.doneHandlers):this._lastDoneQueue=[],this},done:function(a){return this.then(a)},fail:function(a){return this.then(!1,a)},cancel:function(a,b){return a&&this.doneHandlers.clear(a),b&&this.failHandlers.clear(b),this},bind:function(a){return this.status&&a.apply(this,this._argsCache),this.observeHandlers.push(a),this},unbind:function(a){return this.observeHandlers.clear(a),this},progress:function(a){var b=this;return this.observeHandlers.push(function(){b.status||a.apply(this,arguments)}),this},notify:function(a){return this._disalbed?this:(this.status=0,this.observeHandlers.apply(this,a||[]),this)},fire:function(a){if(this._disalbed)return this;this.trace&&this._trace(),a=a||[];var b=this.doneHandlers;return this.doneHandlers=this._alterQueue,this.failHandlers.length=0,this.observeHandlers.apply(this,a),b.apply(this,a),b.length=0,this._alterQueue=b,this},error:function(a){if(this._disalbed)return this;this.trace&&this._trace(),a=a||[];var b=this.failHandlers;return this.failHandlers=this._alterQueue,this.doneHandlers.length=0,this.observeHandlers.apply(this,a),b.apply(this,a),b.length=0,this._alterQueue=b,this},resolve:function(a){return this.status=1,this._argsCache=a||[],this.fire(a)},reject:function(a){return this.status=2,this._argsCache=a||[],this.error(a)},reset:function(){return this.status=0,this._argsCache=[],this.doneHandlers.length=0,this.failHandlers.length=0,this},disable:function(){this._disalbed=!0},enable:function(){this._disalbed=!1},merge:function(a){b.merge(this.doneHandlers,a.doneHandlers),b.merge(this.failHandlers,a.failHandlers),b.merge(this.observeHandlers,a.observeHandlers);var c=a.subject;b.mix(a,this),a.subject=c},_trace:function(){this.traceStack.unshift(this.subject),this.traceStack.length>this.trace&&this.traceStack.pop()},follow:function(){var a=new d;if(a._prevActor=this,this.status)f(this._resultCache,a);else{var b=this._lastDoneQueue.pop();b&&this._lastDoneQueue.push(function(){return f(b.apply(this,arguments),a)});var c=this._lastFailQueue.pop();c&&this._lastFailQueue.push(function(){return f(c.apply(this,arguments),a)})}return a},end:function(){return this._prevActor},all:function(){var a=e.apply(this,this._when);return a},any:function(){var a=e.apply(this,this._when);return a._count=a._total=1,a},some:function(a){var b=e.apply(this,this._when);return b._count=b._total=a,b}},n=h.prototype=function(a){for(var b in m)a[b]=g(b);return a}({});return n.once=n.wait=n.then,n.on=n.bind,n.off=n.unbind,n.promise=function(a){var b=this.lib[a];return b||(b=this.lib[a]=new d({subject:a,trace:this.trace,traceStack:this.traceStack})),b},n.when=function(){for(var a=[],b=0,c=arguments.length;c>b;b++)a.push(this.promise(arguments[b]));return e.apply(this,a)},i.Promise=d,i.Event=h,i.when=e,i.pipe=f,i.VERSION="2.1.0",i}),define("../cardkit/bus",["eventmaster"],function(a){return a()}),define("../cardkit/tpl/layout/ctlbar",[],function(){return{template:'<div class="ck-ctl-bar">\n    <input type="button" class="ck-ctl-backward">\n    <input type="button" class="ck-ctl-reload">\n</div>\n'}}),define("../cardkit/tpl/layout/overflowmenu",[],function(){return{template:'\n<button type="button" class="ck-option" value="{%=item.i%}">{%=item.text%}</button>\n'}}),define("moui/overlay",["mo/lang","dollar","eventmaster","mo/template/string"],function(a,b,c,d){function e(a){this.init(a),this.set(this._config)}function f(a){return new f.Overlay(a)}var g=b("body"),h="mouiOverlay",i='<div id="{{id}}" class="{{cname}}">                <header><h2></h2></header>                <article></article>            </div>',j='<span class="loading"><i>.</i><i>.</i><i>.</i></span>',k="加载中",l=0,m={title:"",content:"",className:"moui-overlay",parent:g,openDelay:50,closeDelay:0,event:{}};return e.prototype={_ns:h,_template:i,_defaults:m,init:function(e){return this.id=this._ns+ ++l,this.event=c(),this._config=a.config({},e,this._defaults),g.append(d.format(this._template,{id:this.id,cname:this._config.className})),this._node=b("#"+this.id),this._header=this._node.find("header").eq(0),this._title=this._header.find("h1"),this._content=this._node.find("article").eq(0),this},set:function(b){return b?(a.config(this._config,b,this._defaults),"string"==typeof b.title&&this.setTitle(b.title),void 0!==b.content&&this.setContent(b.content),void 0!==b.className&&(this._node[0].className=b.className),this):this},setTitle:function(a){return this._title.html(a),this},setContent:function(a){return this._content.html(a),this},insertNode:function(a){this._node.appendTo(a||this._config.parent)},showLoading:function(a){return this._node.addClass("loading"),this._title.html((a||k)+j),this},hideLoading:function(){return this._node.removeClass("loading"),this._title.html(this._config.title),this},open:function(){if(clearTimeout(this._actimer),this.isOpened)return this.cancelClose(),this;var a=this,b=arguments;return this.prepareOpen.apply(a,b),this._actimer=setTimeout(function(){a.applyOpen.apply(a,b)},this._config.openDelay),this},close:function(){if(clearTimeout(this._actimer),!this.isOpened)return this.cancelOpen(),this;var a=this,b=arguments;return this.prepareClose.apply(a,b),this._actimer=setTimeout(function(){a.applyClose.apply(a,b)},this._config.closeDelay),this},prepareOpen:function(){this.insertNode(),this._node.addClass("rendered"),this.event.fire("prepareOpen",[this])},prepareClose:function(){this.event.fire("prepareClose",[this]),this._node.removeClass("active")},cancelOpen:function(){this._node.removeClass("rendered"),this.event.fire("cancelOpen",[this])},cancelClose:function(){this._node.addClass("active"),this.event.fire("cancelClose",[this])},applyOpen:function(){this.isOpened=!0,this._node.addClass("active"),this.event.fire("open",[this])},applyClose:function(){this.isOpened=!1,this._content.empty(),this._node.removeClass("rendered"),this.event.fire("close",[this])},destroy:function(){return this._node.remove(),this.event.fire("destroy",[this]),this}},f.Overlay=e,f}),define("moui/growl",["dollar","mo/lang","mo/template","moui/overlay"],function(a,b,c,d){function e(a){a._exptimer=setTimeout(function(){a.close()},a._config.expires)}function f(a){return new f.Growl(a)}var g="mouiGrowl",h='<div id="{{id}}" class="moui-growl">                <header><h2></h2></header>                <article></article>            </div>',i="corner-",j={className:"moui-growl",closeDelay:300,corner:"center",expires:1400,keepalive:!1},k=b.construct(d.Overlay);return b.mix(k.prototype,{_ns:g,_template:h,_defaults:b.merge({},j,k.prototype._defaults),set:function(a){var b=this;return b.superClass.set.call(b,a),a.corner&&a.corner!==b._currentCorner&&(b._currentCorner&&b._node.removeClass(i+b._currentCorner),b._node.addClass(i+a.corner),b._currentCorner=a.corner),void 0!==a.expires&&(clearTimeout(b._exptimer),b.isOpened&&e(b)),b},applyOpen:function(){return clearTimeout(this._exptimer),-1!=this._config.expires&&e(this),this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){this.isOpened=!1,this._node.removeClass("rendered"),this.event.fire("close",[this]),this._config.keepalive||this.destroy()}}),f.Growl=k,f}),define("../cardkit/view/growl",["mo/lang","dollar","moui/growl"],function(a,b,c){function d(d,h){var i,j={corner:"bottom"};d.nodeName?(d=b(d),i=d[0][e],i&&g[i]&&g[i].close(),i=d[0][e]=++f,h=a.mix(j,d.data(),h)):h=a.mix(j,d),h.className="ck-growl";var k=c(h);return i&&(g[i]=k),k}var e="_ckGrowlUid",f=0,g={};return d}),define("moui/control",["mo/lang","dollar","eventmaster"],function(a,b,c){function d(a,b){this.init(a,b),this.set(this._config)}function e(a,b){return new e.Control(a,b)}var f={field:null,label:null,numField:null,numStep:1,enableVal:1,disableVal:0,enableLabel:"",disableLabel:"",loadingLabel:"稍等..."};return d.prototype={_defaults:f,init:function(d,e){this.event=c();var f=this._node=b(d);f.hasClass("enabled")&&(this.isEnabled=!0),this._numField=[],e=a.mix({field:f,label:f},this.data(),e),this.setNodes(e),this._label[0]&&(this._isLabelClose=this._label.isEmpty()),this._numField[0]&&(this._isNumFieldClose=this._numField.isEmpty()),void 0===e.enableVal&&(e.enableVal=this.val()),void 0===e.enableLabel&&(e.enableLabel=this.label()),void 0===e.disableVal&&(e.disableVal=this.val()),void 0===e.disableLabel&&(e.disableLabel=this.label()),this._config=a.config({},e,this._defaults)
},set:function(b){return b?(a.mix(this._config,b),this.setNodes(b),this):this},setNodes:function(a){return void 0!==a.field&&(this._field=a.field?b(a.field,"string"==typeof a.field&&this._node).eq(0):[]),void 0!==a.label&&(this._label=a.label?b(a.label,"string"==typeof a.label&&this._node).eq(0):[]),void 0!==a.numField&&(this._numField=a.numField?b(a.numField,"string"==typeof a.numField&&this._node).eq(0):[]),this},val:function(a){return this._field[0]?"A"===this._field[0].nodeName?this._field.attr("href",a):this._field.val(a):void 0},label:function(a){return this._label[0]?this._isLabelClose?this._label.val(a):this._label.html(a):void 0},num:function(a){return this._numField[0]?this._isNumFieldClose?this._numField.val(null!=a?parseFloat(this._numField.val())+a:void 0):this._numField.html(null!=a?parseFloat(this._numField.html())+a:void 0):void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this.label(this._config.loadingLabel),this},hideLoading:function(){return this._node.removeClass("loading"),this},toggle:function(){return this.isEnabled?this.disable():this.enable(),this},enable:function(){return this.isEnabled?this:(this.isEnabled=!0,this._node.addClass("enabled"),this.val(this._config.enableVal),this.num(this._config.numStep),this._config.enableLabel&&this.label(this._config.enableLabel),this.event.reset("disable").resolve("enable",[this]),this)},disable:function(){return this.isEnabled?(this.isEnabled=!1,this._node.removeClass("enabled"),this.val(this._config.disbleVal),this.num(0-this._config.numStep),this._config.disableLabel&&this.label(this._config.disableLabel),this.event.reset("enable").resolve("disable",[this]),this):this}},e.Control=d,e}),define("moui/picker",["mo/lang","dollar","eventmaster","moui/control"],function(a,b,c,d){function e(a,b){this.init(a,b),this.set(this._config)}function f(a){h.call(this,"enable",a),this.event.fire("change",[this,a])}function g(a){h.call(this,"disable",a),this.event.fire("change",[this,a])}function h(a,b){if("enable"===a)if(this._config.multiselect)this._allSelected.push(b);else{var c=this._lastSelected;this._lastSelected=b,c&&c.disable()}else if(this._config.multiselect){var d=this._allSelected.indexOf(b);-1!==d&&this._allSelected.splice(d,1)}else{if(b&&this._lastSelected!==b)return;this._lastSelected=null}this._field[0]&&this._field.val(this.val())}function i(a,b){return new i.Picker(a,b)}var j="_moPickerOid",k={field:'input[type="hidden"]',options:".option",ignoreRepeat:!1,ignoreStatus:!1,multiselect:!1};return e.prototype={_defaults:k,init:function(d,e){return this._uoid=0,this.event=c(),this._node=b(d),this._options=[],e=a.mix({},this.data(),e),this._config=a.config({},e,this._defaults),this},set:function(c){return c?(a.mix(this._config,c),void 0!==c.multiselect&&(c.multiselect?this._allSelected||(this._allSelected=[]):(this._allSelected=null,this._lastSelected=null)),void 0!==c.field&&(this._field=c.field?b(c.field,"string"==typeof c.field&&this._node).eq(0):[]),c.options&&(this._options.forEach(this.removeOption,this),b(c.options,this._node).forEach(this.addOption,this)),this):this},addOption:function(a){if(a=b(a)[0],!a[j]){a[j]=++this._uoid;var c=d(a,{enableVal:a.value,label:!1});return c.event.bind("enable",f.bind(this)).bind("disable",g.bind(this)),this._options.push(c),c.isEnabled&&h.call(this,"enable",c),this}},removeOption:function(a){var b;return a.constructor===d.Control?(b=a,a=a._node[0]):b=this.getOption(a),this.unselect(a),b&&this._options.splice(this._options.indexOf(b),1),this},getOption:function(a){if("number"==typeof a)a=this._options[a];else if("string"==typeof a)a=this._options.filter(function(b){return b.val()===a})[0];else{var c=b(a)[0][j];if(!c)return null;a=this._options.filter(function(a){return a._node[0][j]===c})[0]}return a},getOptions:function(){return this._options},getSelected:function(){return this._config.multiselect?this._allSelected||[]:this._lastSelected?[this._lastSelected]:[]},val:function(){return this._config?this._config.multiselect?this._allSelected.map(function(a){return a.val()}):this._lastSelected?this._lastSelected.val():void 0:void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this},hideLoading:function(){return this._node.removeClass("loading"),this},undo:function(){return this._lastActionTarget&&this._lastActionTarget.toggle(),this},selectAll:function(){return this._config.multiselect&&this._options.forEach(function(a){a.enable()}),this._lastActionTarget=null,this},unselectAll:function(){return this._config.multiselect?(this._options.forEach(function(a){a.disable()}),this._lastActionTarget=null):this.undo(),this},selectInvert:function(){return this._config.multiselect&&this._options.forEach(function(a){a.toggle()}),this._lastActionTarget=null,this},select:function(a){var b=this.getOption(a);if(b)if(!this._config.multiselect&&this._config.ignoreStatus)h.call(this,"enable",b),this.event.fire("change",[this,b]);else{if((this._config.multiselect&&-1!==this._allSelected.indexOf(b)||!this._config.multiselect&&this._lastSelected===b)&&!this._config.ignoreRepeat)return this.unselect(a);this._lastActionTarget=b.enable()}return this},unselect:function(a){if(a){var b=this.getOption(a);b&&(this._lastActionTarget=b.disable())}else this.unselectAll();return this}},i.Picker=e,i}),define("moui/actionview",["dollar","mo/lang","mo/template/string","moui/overlay","moui/picker"],function(a,b,c,d,e){function f(a){return new f.ActionView(a)}var g=b.mix,h="mouiActionView",i='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <div class="content">                        <header><h1></h1></header>                        <div class="desc"></div>                        <article></article>                    </div>                </div>                <footer>                    <span class="cancel"></span>                    <span class="confirm" data-is-default="true"></span>                </footer>            </div>',j={className:"moui-actionview",closeDelay:500,confirmText:"确认",cancelText:"取消",options:null,multiselect:!1},k=b.construct(d.Overlay);return g(k.prototype,{_ns:h,_template:i,_defaults:b.merge({},j,k.prototype._defaults),init:function(a){return this.superClass.init.call(this,a),this._wrapper=this._node.find(".wrapper").eq(0),this._actionsWrapper=this._content,this._wrapperContent=this._wrapper.find(".content").eq(0),this._content=this._wrapper.find(".desc").eq(0),this._footer=this._node.find("footer").eq(-1),this._confirmBtn=this._footer.find(".confirm"),this._cancelBtn=this._footer.find(".cancel"),this},set:function(b){if(!b)return this;if(this.superClass.set.call(this,b),void 0!==b.options){this._actionsWrapper.empty();var c=b.options?a(b.options).clone():[];c.length?(this._actionsWrapper.append(c),this._picker=e(this._actionsWrapper,{options:c,multiselect:this._config.multiselect,ignoreStatus:!this._config.multiselect}),this._node.removeClass("confirm-kind")):this._node.addClass("confirm-kind")}return void 0!==b.multiselect&&(b.multiselect?this._footer.addClass("multi"):this._footer.removeClass("multi")),b.confirmText&&this._confirmBtn.html(b.confirmText),b.cancelText&&this._cancelBtn.html(b.cancelText),this},val:function(){return this._picker?this._picker.val():void 0},confirm:function(){return this.event.fire("confirm",[this,this._picker]),this.ok()},cancel:function(){return this.event.fire("cancel",[this,this.picker]),this.ok()},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){if(!this._config.multiselect&&this._picker){var a=this;this._picker.event.once("change",function(){a.confirm()})}this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){!this._config.multiselect&&this._picker&&this._picker.event.reset(),this.superClass.applyClose.apply(this,arguments)}}),k.prototype.done=k.prototype.ok,["select","unselect","undo","selectAll","unselectAll","selectInvert"].forEach(function(a){this[a]=function(){return this._picker[a].apply(this._picker,arguments)}},k.prototype),f.ActionView=k,f}),define("../cardkit/view/actionview",["mo/lang","dollar","moui/actionview","../cardkit/bus"],function(a,b,c,d){function e(a,i){var j=a;if("object"==typeof a?(a=b(a),j=a[0][f]):a=!1,j&&h[j])return h[j].set(i);a&&(j=a[0][f]=++g),i=i||{},i.className="ck-actionview";var k=h[j]=c(i),l={component:k};return k.event.bind("prepareOpen",function(a){e.current=a,d.fire("actionView:prepareOpen",[a])}).bind("cancelOpen",function(a){e.current=null,d.fire("actionView:cancelOpen",[a])}).bind("open",function(b){d.fire("actionView:open",[b]),a&&a.trigger("actionView:open",l)}).bind("close",function(){e.current=null,d.unbind("actionView:confirmOnThis"),d.fire("actionView:close",[k]),a&&a.trigger("actionView:close",l)}).bind("cancel",function(){a&&a.trigger("actionView:cancel",l)}).bind("confirm",function(b,c){if(d.fire("actionView:confirmOnThis",[b]),a&&a.trigger("actionView:confirm",l),c&&c._lastSelected){var e=c._lastSelected._node.attr("target");e&&d.fire("actionView:jump",[b,c.val(),e])}}),k}var f="_ckActionViewUid",g=0,h={};return e}),define("moui/modalview",["dollar","mo/lang","mo/template/string","moui/overlay"],function(a,b,c,d){function e(a){return new e.ModalView(a)}var f=b.mix,g="mouiModalView",h='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <header>                        <button type="button" class="confirm" data-is-default="true"></button>                        <button type="button" class="cancel"></button>                        <h1></h1>                    </header>                    <article><div class="content"></div></article>                </div>            </div>',i={className:"moui-modalview",iframe:!1,hideConfirm:!1,confirmText:"确认",cancelText:"取消"},j=b.construct(d.Overlay);return f(j.prototype,{_ns:g,_template:h,_defaults:b.merge({},i,j.prototype._defaults),init:function(a){return this.superClass.init.call(this,a),this._wrapper=this._node.find(".wrapper").eq(0),this._contentWrapper=this._wrapper.find("article").eq(0),this._content=this._contentWrapper.find(".content").eq(0),this._confirmBtn=this._header.find(".confirm"),this._cancelBtn=this._header.find(".cancel"),this},set:function(a){if(!a)return this;var b=this;return b.superClass.set.call(b,a),void 0!==a.content?b._config.iframe=null:a.iframe&&b._setIframeContent(a),void 0!==a.hideConfirm&&(a.hideConfirm?this._confirmBtn.hide():this._confirmBtn.show()),a.confirmText&&this._confirmBtn.html(a.confirmText),a.cancelText&&this._cancelBtn.html(a.cancelText),b},setContent:function(a){return this.superClass.setContent.call(this,a),a&&this.event.fire("contentchange",[this]),this},_setIframeContent:function(){var b=this;this._clearIframeContent(),b.setContent(""),b.showLoading(),b._iframeContent=a('<iframe class="moui-modalview-iframebd" frameborder="0" scrolling="no" style="visibility:hidden;width:100%;"></iframe>').bind("load",function(){try{if(!this.contentWindow.document.body.innerHTML)return;if(b._iframeWindow=a(this.contentWindow),!b._iframeContent&&b._iframeWindow[0].location.href!==b._config.iframe)return;b._iframeContent[0].style.visibility="",b.event.resolve("frameOnload",[b]),b.hideLoading()}catch(c){}}).appendTo(b._content)},_clearIframeContent:function(){this._iframeContent&&(this._iframeContent.remove(),this._iframeContent=null),this.event.reset("frameOnload")},confirm:function(){return this.event.fire("confirm",[this]),this},cancel:function(){return this.event.fire("cancel",[this]),this.ok(),this},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){this.superClass.applyOpen.apply(this,arguments),this._config.iframe&&this._iframeContent.attr("src",this._config.iframe)},applyClose:function(){this._clearIframeContent(),this._contentWrapper[0].scrollTop=0,this.superClass.applyClose.apply(this,arguments)}}),j.prototype.done=j.prototype.ok,e.ModalView=j,e}),define("mo/network/ajax",["mo/browsers"],function(browsers,require,exports){var httpParam=function(a){var b=[];if(a.constructor==Array)for(var c=0;c<a.length;c++)b.push(a[c].name+"="+encodeURIComponent(a[c].value));else for(var d in a)b.push(d+"="+encodeURIComponent(a[d]));return b.join("&").replace(/%20/g,"+")},ajax=function(s){function httpSuccess(a){try{return!a.status&&"file:"==location.protocol||a.status>=200&&a.status<300||304==a.status||1223==a.status||browsers.safari&&!a.status}catch(b){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),xml="xml"==type||!type&&ct&&ct.indexOf("xml")>=0,data=xml?r.responseXML:r.responseText;if(xml&&"parsererror"==data.documentElement.tagName)throw"parsererror";return"script"==type&&eval.call(window,data),"json"==type&&(data=eval("("+data+")")),data}var options={type:s.type||"GET",url:s.url||"",data:s.data||null,dataType:s.dataType,contentType:s.contentType===!1?!1:s.contentType||"application/x-www-form-urlencoded",username:s.username||null,password:s.password||null,timeout:s.timeout||0,processData:void 0===s.processData?!0:s.processData,beforeSend:s.beforeSend||function(){},complete:s.complete||function(){},handleError:s.handleError||function(){},success:s.success||function(){},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}};options.data&&options.processData&&"string"!=typeof options.data&&(options.data=httpParam(options.data)),options.data&&"get"==options.type.toLowerCase()&&(options.url+=(options.url.match(/\?/)?"&":"?")+options.data,options.data=null);var status,data,requestDone=!1,xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;xhr.open(options.type,options.url,!0,options.username,options.password);try{options.data&&options.contentType!==!1&&xhr.setRequestHeader("Content-Type",options.contentType),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Accept",s.dataType&&options.accepts[s.dataType]?options.accepts[s.dataType]+", */*":options.accepts._default)}catch(e){}options.beforeSend&&options.beforeSend(xhr);var onreadystatechange=function(a){if(!requestDone&&xhr&&(4==xhr.readyState||"timeout"==a)){if(requestDone=!0,ival&&(clearInterval(ival),ival=null),status="timeout"==a&&"timeout"||!httpSuccess(xhr)&&"error"||"success","success"==status){try{data=httpData(xhr,options.dataType)}catch(b){status="parsererror"}options.success(data,status)}else options.handleError(xhr,status);options.complete(xhr,status),xhr=null}},ival=setInterval(onreadystatechange,13);return options.timeout>0&&setTimeout(function(){xhr&&(xhr.abort(),requestDone||onreadystatechange("timeout"))},options.timeout),xhr.send(options.data),xhr};exports.ajax=ajax,exports.params=httpParam}),define("mo/network",["mo/lang","mo/network/ajax"],function(_,net,require,exports){var window=this,uuid4jsonp=1;_.mix(exports,net),exports.getScript=function(a,b){var c=_.isWindow(this)?this.document:document,d=c.createElement("script");d.type="text/javascript",d.async="async",b?_.isFunction(b)&&(b={callback:b}):b={},b.charset&&(d.charset=b.charset),d.src=a;var e=c.getElementsByTagName("head")[0];d.onload=d.onreadystatechange=function(a,c){(c||!d.readyState||/loaded|complete/.test(d.readyState))&&(d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=void 0,!c&&b.callback&&b.callback())},e.insertBefore(d,e.firstChild)},exports.getStyle=function(a){var b=this.document||document,c=b.createElement("link");c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a);var d=b.getElementsByTagName("head")[0];d.appendChild(c)};var RE_DOMAIN=/https?\:\/\/(.+?)\//;exports.getJSON=function(a,b,c,d){var e=a.match(RE_DOMAIN);if((!b||_.isFunction(b))&&(d=c,c=b,b={}),c&&!(d&&d.isScript||e&&e[1]!==window.location.host))return exports.ajax({url:a,data:b,success:c,error:d&&d.error,dataType:"json"}),!0;d=_.mix({charset:"utf-8",callback:"__oz_jsonp"+ ++uuid4jsonp},d||{}),d.random&&(b[d.random]=+new Date);var f=d.callbackName||"jsoncallback";b[f]=d.callback,a=[a,/\?/.test(a)?"&":"?",exports.httpParam(b)].join(""),c&&_.ns(d.callback,c),delete d.callback,exports.getScript(a,d)},exports.getRequest=function(a,b){var c=new Image;c.onload=function(){c=null},c.src=b?[a,/\?/.test(a)?"&":"?","string"==typeof b?b:exports.httpParam(b)].join(""):a},exports.parseJSON=function(json){json=json.replace(/^[\w(<\/*!\s]*?\{/,"{").replace(/[^\}]*$/,"");try{json=window.JSON?window.JSON.parse(json):eval(json)}catch(ex){json=!1}return json}}),define("../cardkit/view/modalcard",["dollar","mo/network","moui/modalview","../cardkit/supports"],function(a,b,c,d){var e,f=c({className:"ck-modalview",closeDelay:400}),g=f.setContent,h=f.set;return f.set=function(c){if(!c)return this;var d=this,f=c.jsonUrl||c.url;return f&&(c.content="",d.showLoading(),b.ajax({url:f,dataType:c.jsonUrl?"json":"text",success:function(a){c.jsonUrl&&(a=a.html),d.setContent(a),d.hideLoading()}})),e=c.contentFilter,c.iframeUrl&&(c.iframe=c.iframeUrl),c.source&&(c.content=a("."+c.source).map(function(b){var c=a(b).attr("type");return"text/cardscript"===c||"text/jscode"===c?"<script>"+b.innerHTML+"</script>":b.innerHTML}).join("")),h.call(this,c)},f.setContent=function(a){return e&&(a=(new RegExp(e).exec(a)||[])[1]),g.call(this,a)},d.BROWSER_CONTROL&&(f.ok=f.done=function(){return history.back(),this.event.promise("close")}),f.event.bind("confirm",function(a){a.event.fire("confirmOnThis",arguments)}).bind("close",function(a){a.event.unbind("confirmOnThis")}),f}),define("moui/slider",["mo/lang","dollar","eventmaster"],function(a,b,c){function d(a,b){this.init(a,b)}function e(a,b){return new e.Slider(a,b)}return d.prototype={init:function(a){var d,e=this._node=b(a);this.event=c(),e.data("init")||(e.data("init",!0),this._field=d=e.find(".slider-field"),this._hoverArea=e.find(".slider-hover"),this._selectedArea=e.find(".slider-selected"),this._step=d.attr("step"),this._max=d.attr("max"),this._min=d.attr("min"),this._stepWidth=this._step*e.width()/(this._max-this._min))},calc:function(a){var b=a.changedTouches?a.changedTouches[0].pageX:a.pageX,c=this._node,d=this._stepWidth,e=this._step,f=b-c.offset().left;return f>c.width()?f=c.width():0>f&&(f=0),Math.ceil(f/d)*e},val:function(a){if(this._field[0]){var b=this._field.val(a);return void 0!==a&&this.event.fire("change"),b}},show:function(a){var b=this._stepWidth,c=this._selectedArea,d=this._hoverArea;d.hide(),c.css({width:a*b}).show()},pretend:function(a){var b=this._stepWidth,c=this._selectedArea,d=this._hoverArea,e=a*b;d.data("width")!=e&&(c.hide(),d.css({width:e}).show().data("width",e))}},e.Slider=d,e}),define("../cardkit/view/stars",["mo/lang","dollar","mo/network","moui/slider"],function(a,b,c,d){function e(a){a=b(a);var c=a[0][f];if(c&&h[c])return h[c];c=a[0][f]=++g;var e=h[c]=d(a);return e.event.bind("change",function(){var a=e.val();e.show(a)}),e}var f="_ckStarsUid",g=0,h={};return e.gc=function(a){for(var b in h)a(h[b])&&delete h[b]},e}),define("moui/ranger",["mo/lang","dollar","eventmaster"],function(a,b,c){function d(a,b){this.init(a,b),this.set(this._config)}function e(a,b){return new e.Ranger(a,b)}var f={max:100,min:0,step:1};return d.prototype={_defaults:f,init:function(d,e){this.event=c();var f=this._node=b(d);return e=a.mix({max:f.attr("max")||void 0,min:f.attr("min")||void 0,step:f.attr("step")||void 0},this.data(),e),this._config=a.config({},e,this._defaults),this.val(f.val()),this},set:function(b){return b?(a.config(this._config,b,this._defaults),this):this},data:function(){return this._node.data()},val:function(a){if(void 0!==a){var b=this._config.step.toString().replace(/.*\./,"").length;a=Math.floor(a*Math.pow(10,b))/Math.pow(10,b),this._value=a,this.event.fire("change",[this.val(),this])}return this._value},progress:function(a){if(void 0!==a){var b=this._config;if(0==a)this.val(b.min);else if(1==a)this.val(b.max);else{var c=(b.max-b.min)*a+parseFloat(b.min);c=Math.round(c/b.step)*b.step,this.val(c)}}return this.val()},changeStart:function(){this._originValue=this._value,this.event.fire("changeStart",[this])},changeEnd:function(){this.event.fire("changeEnd",[this]),this._originValue!=this._value&&this.event.fire("changed",[this])}},e.Ranger=d,e}),define("../cardkit/view/ranger",["dollar","moui/ranger","../cardkit/bus","../cardkit/view/growl"],function(a,b,c,d){function e(e,i){e=a(e);var j=e[0][f];if(j&&h[j])return h[j].set(i);j=e[0][f]=++g,i=i||{};var k=h[j]=b(e,i);return k.notify=d({parent:e.parent(),corner:"stick"}),k.event.bind("change",function(a){k.notify.set({content:a}).open()}).bind("changed",function(){var a=e.trigger("ranger:changed",{component:k}).data("url");c.fire("ranger:changed",[k,a])}).bind("changeEnd",function(){k.notify.close()}),k}var f="_ckRangerUid",g=0,h={};return e}),define("../cardkit/view/picker",["mo/lang","dollar","mo/network","moui/picker"],function(a,b,c,d){function e(a,b){var d=a.jsonUrl||a.url;if(d){var e;d=d.replace(/\?(.+)$/,function(a,b){return e=b.replace(/#.*/,""),""}),c.ajax({url:d,data:e,type:a.method||"post",dataType:a.jsonUrl?"json":"text",success:b})}else b(!1)}function f(c,f){c=b(c);var j=c[0][g];if(j&&i[j])return i[j].set(f);j=c[0][g]=++h,f=a.mix({options:".ck-option"},f||{});var k=i[j]=d(c,f);return k.event.bind("change",function(a,b){var d,f=b.data(),g={component:a};a.showLoading(),d=b.isEnabled?{method:f.enableMethod,url:f.enableUrl,jsonUrl:f.enableJsonUrl}:{method:f.disableMethod,url:f.disableUrl,jsonUrl:f.disableJsonUrl},e(d,function(b){a.hideLoading(),b!==!1&&(a.responseData=b,c.trigger("picker:response",g))}),c.trigger("picker:change",g)}),k}var g="_ckPickerUid",h=0,i={};return f.gc=function(a){for(var b in i)a(i[b])&&delete i[b]},f}),define("../cardkit/view/control",["mo/lang","dollar","mo/network","moui/control"],function(a,b,c,d){function e(a,c){a=b(a);var d=a[0][f];if(d&&h[d])return h[d].set(c);d=a[0][f]=++g;var i=h[d]=new e.Control(a,c);return i.event.bind("enable",function(b){a.trigger("control:enable",{component:b})}).bind("disable",function(b){a.trigger("control:disable",{component:b})}),i}var f="_ckControlUid",g=0,h={},i=a.construct(d.Control);return a.mix(i.prototype,{enable:function(){var a=this.data();return this.request({method:a.enableMethod,url:a.enableUrl,jsonUrl:a.enableJsonUrl},function(){this.superClass.enable.call(this)})},disable:function(){var a=this.data();return this.request({method:a.disableMethod,url:a.disableUrl,jsonUrl:a.disableJsonUrl},function(){this.superClass.disable.call(this)})},request:function(a,b){var d=this,e=a.jsonUrl||a.url;if(e){var f;e=e.replace(/\?(.+)$/,function(a,b){return f=b.replace(/#.*/,""),""}),d.showLoading(),c.ajax({url:e,data:f,type:a.method||"post",dataType:a.jsonUrl?"json":"text",success:function(a){d.hideLoading(),d.responseData=a,b.call(d)}})}else b.call(d);return this}}),e.Control=i,e.gc=function(a){for(var b in h)a(h[b])&&delete h[b]},e}),define("momo/base",["mo/lang/es5","mo/lang/type","mo/lang/mix"],function(a,b,c){function d(a,b,c){(!b||g(b))&&(c=b,b={}),this._listener=c;var d=c&&++h;this.event={},this.EVENTS.forEach(function(a){this[a]=a+(c?"_"+d:"")},this.event),this.node=a,this._config={event:this.EVENTS[0]},this.config(b),this.enable()}function e(){}function f(a,b,c){return new f.Class(a,b,c)}var g=b.isFunction,h=0,i=!1;try{document.createEvent("TouchEvent"),i=!0}catch(j){}return d.prototype={SUPPORT_TOUCH:i,PRESS:i?"touchstart":"mousedown",MOVE:i?"touchmove":"mousemove",RELEASE:i?"touchend":"mouseup",EVENTS:[],DEFAULT_CONFIG:{namespace:""},config:function(a){var b=this._config.namespace;c.merge(c.mix(this._config,a),this.DEFAULT_CONFIG);var d=this._config.namespace||"";return this.EVENTS.forEach(function(a){this[a]=this[a].replace(b||/^/,d)},this.event),this},enable:function(){var a=this;return a.bind(a.PRESS,a._press||(a._press=a.press.bind(a))).bind(a.MOVE,a._move||(a._move=a.move.bind(a))).bind(a.CANCEL,a._cancel||(a._cancel=a.cancel.bind(a))).bind(a.RELEASE,a._release||(a._release=a.release.bind(a))),a._listener&&a.bind(this.event[this._config.event],a._listener),a},disable:function(){var a=this;return a.unbind(a.PRESS,a._press).unbind(a.MOVE,a._move).unbind(a.CANCEL,a._cancel).unbind(a.RELEASE,a._release),a._listener&&a.unbind(this.event[this._config.event],a._listener),a},once:function(a,b,c){function d(){return e.unbind(a,d,c),b.apply(this,arguments)}var e=this;this.bind(a,d,c)},bind:e,unbind:e,trigger:e,press:e,move:e,release:e,cancel:e},f.Class=d,f}),define("momo/scroll",["mo/lang","momo/base"],function(a,b){function c(a,b,d){return new c.Class(a,b,d)}var d=a.construct(b.Class);return a.mix(d.prototype,{EVENTS:["scrolldown","scrollup","scrollstart","scrollend"],DEFAULT_CONFIG:{directThreshold:5,scrollEndGap:5},watchScroll:function(a){this.scrollingNode=a},checkScollDirection:function(a){var b={target:this.node},c=a-this._lastY,d=this._config.directThreshold;0-d>c?(this._scrollDown!==!0&&this.trigger(b,this.event.scrolldown),this._lastY=a,this._scrollDown=!0):c>d&&(this._scrollDown!==!1&&this.trigger(b,this.event.scrollup),this._lastY=a,this._scrollDown=!1)},press:function(a){var b=this,c=this.SUPPORT_TOUCH?a.touches[0]:a;if(b._scrollDown=null,b._lastY=c.clientY,b._scrollY=null,b._ended=!1,b.scrollingNode){var d=b._scrolling;b._scrolling=!1;var e=b._tm=a.timeStamp;b.once(b.MOVE,function(){b.once("scroll",function(){e===b._tm&&(d||(b._started=!0,b.trigger({target:b.node},b.event.scrollstart),b._ended&&(b._ended=!1,b.trigger({target:b.node},b.event.scrollend))))},b.scrollingNode)})}},move:function(a){var b=this.SUPPORT_TOUCH?a.touches[0]:a;this.checkScollDirection(b.clientY),this.scrollingNode&&(this._scrollY=this.scrollingNode.scrollTop)},release:function(a){var b=this,c=this.SUPPORT_TOUCH?a.changedTouches[0]:a,d={target:b.node};if(this.checkScollDirection(c.clientY),null!==b._scrollY){var e=b.scrollingNode,f=Math.abs(e.scrollTop-b._scrollY)||0;if(b._scrollY>=0&&b._scrollY<=e.scrollHeight+e.offsetHeight&&f<b._config.scrollEndGap)b._started?(b.trigger(d,b.event.scrollend),b._started=!1):b._ended=!0;else{var g=b._tm;b._scrolling=!0,b.once("scroll",function(){g===b._tm&&(b._scrolling=!1,b._started=!1,b.trigger(d,b.event.scrollend))},e)}b._scrollY=null}else b._started&&(b._started=!1,b.trigger(d,b.event.scrollend))}}),c.Class=d,c}),define("momo/swipe",["mo/lang","momo/base"],function(a,b){function c(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}function d(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function e(a,b){var c,e,f=d(a,b),g={down:f>=45&&135>f,left:f>=135||-135>=f,up:-45>f&&f>-135,right:f>=-45&&45>=f};for(e in g)if(g[e]){c=e;break}return c}function f(a,b,c){return new f.Class(a,b,c)}var g=a.construct(b.Class);return a.mix(g.prototype,{EVENTS:["swipeup","swipedown","swiperight","swipeleft"],DEFAULT_CONFIG:{timeThreshold:200,distanceThreshold:20},press:function(a){var b=this.SUPPORT_TOUCH?a.touches[0]:a;this._startX=b.clientX,this._startY=b.clientY,this._moveX=0/0,this._moveY=0/0,this._startTime=a.timeStamp},move:function(a){var b=this.SUPPORT_TOUCH?a.touches[0]:a;this._moveX=b.clientX,this._moveY=b.clientY},release:function(a){var b=this,d={x:b._startX,y:b._startY},f={x:b._moveX,y:b._moveY},g=c(d,f),h=e(d,f),i=a.timeStamp-b._startTime;i<b._config.timeThreshold&&g>b._config.distanceThreshold&&b.trigger(a,b.event["swipe"+h])}}),f.Class=g,f}),define("momo/tap",["mo/lang","momo/base"],function(a,b){function c(a){return a._moveTarget&&a._moveTarget!==a._startTarget||Math.abs(a._movePosX-a._startPosX)>a._config.tapRadius||Math.abs(a._movePosY-a._startPosY)>a._config.tapRadius?!0:void 0}function d(){}function e(a,b,c){return new e.Class(a,b,c)}var f=a.construct(b.Class);return a.mix(f.prototype,{EVENTS:["tap","doubletap","hold","tapstart","tapcancel"],DEFAULT_CONFIG:{tapRadius:10,doubleTimeout:300,tapThreshold:0,holdThreshold:500},press:function(a){var b=this,e=b.SUPPORT_TOUCH?a.touches[0]:a;b._startTime=a.timeStamp,b._startTarget=e.target,b._startPosX=e.clientX,b._startPosY=e.clientY,b._movePosX=b._movePosY=b._moveTarget=0/0,b._started=!1,b._pressTrigger=function(){b._started=!0,b.trigger(a,b.event.tapstart),b._pressTrigger=d},b._activeTimer=setTimeout(function(){c(b)||b._pressTrigger()},b._config.tapThreshold)},move:function(a){var b=this.SUPPORT_TOUCH?a.touches[0]:a;this._moveTarget=b.target,this._movePosX=b.clientX,this._movePosY=b.clientY},release:function(a){var b=this,d=a.timeStamp,e=c(b);return clearTimeout(b._activeTimer),e||d-b._startTime<b._config.tapThreshold?(e||(b._firstTap=d),b._started&&b.trigger(a,b.event.tapcancel),void 0):(b._started||b._pressTrigger(),d-b._startTime>b._config.holdThreshold+b._config.tapThreshold?b.trigger(a,b.event.hold):b._firstTap&&d-b._firstTap<b._config.doubleTimeout?(a.preventDefault(),b.trigger(a,b.event.doubletap),b._firstTap=0):(b.trigger(a,b.event.tap),b._firstTap=d),void 0)},cancel:function(a){clearTimeout(this._activeTimer),this._started&&this.trigger(a,this.event.tapcancel)}}),e.Class=f,e}),define("mo/easing/base",[],function(){return{def:"ease",positions:{linear:[.25,.25,.75,.75],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},values:{linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out"},functions:{linear:function(a,b,c,d){return c+d*a},ease:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c},easeIn:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOut:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOut:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c}}}}),define("choreo",["mo/lang/es5","mo/lang/mix","mo/easing/base","mo/mainloop","eventmaster"],function(a,b,c,d,e){function f(a,b,c,d){for(var e in a)c=b?"-"+b+"-"+e:e,w(c)in L.style&&(a[e]=c,C||"transition"!==e||(C=F[b]),d=!0);return d}function g(a){if(a||(a="_oz_choreo_"+R++),T[a])return T[a];var b=this;T[a]=this,this.name=a,this._promise=new e.Promise,this._reset_promise=new e.Promise,this._count=0,this._optCache=[],P?this._runningActors=[]:d.addStage(a),this._reset_promise.bind(function(){b._promise.reset()})}function h(a,b){Array.isArray(a)&&(this.members=a,a={_promise:e.when.apply(e,this.members.map(function(a){return a.follow()}))},a._promise.bind(a._promise.pipe.disable)),this._opt=a,this.stage=b}function i(a,b){if(P){var c=a._runningActors;a.isPlaying()&&(c.forEach(function(c){b&&b(a.name,c)}),c.state=0,c.length=0)}else b&&b(a.name)}function j(a){var b=a.target,c=parseFloat(a._current_from||a.from),d=parseFloat(a.to),e=d-c,f=a._startTime?+new Date-a._startTime:0;0>f&&(f=0);var g=f/(a.duration||1),h=p(b),i=U[h];if(i&&i[a.prop]===a?(clearTimeout((i[a.prop]||{})._runtimer),delete i[a.prop]):g=0,g){var j=u(h);if(b.style[bb]=j,1>g){X[a.easing]&&(g=X[a.easing](g,f,0,1,a.duration));var k=v(a.from,a.to);c=c+e*g+k}else c=a.to;s(b,a.prop,c)}}function k(a){var b=a.target,c=p(b),d=U[c];d&&delete d[a.prop];var e=u(c);b.style[bb]=e,s(b,a.prop,a.to)}function l(a){var b=a.target,c=a.prop,d=p(b),e=U[d],f=a.from||r(b,c);if(f==a.to){var g=!0;if(e&&delete e[c],G[c])for(var h in e)if(G[h]){g=!1;break}return g&&a._promise.resolve([{target:a.target,succ:!0}]).disable(),void 0}a._current_from=f,a._startTime=+new Date+(a.delay||0),e[c]=a,s(b,c,f);var i=u(d);a._runtimer=setTimeout(function(){delete a._runtimer,b.style[bb]=i,s(b,c,a.to)},0)}function m(a,b){var c=b.target,e=parseFloat(b.to),f=b.from||r(b.target,b.prop),g=v(f,b.to);g&&f.toString().indexOf(g)<0&&(f=0),b._current_from=f;var h=parseFloat(f),i=b.delay&&"_oz_anim_"+S++;d.addTween(a,h,e,b.duration,{easing:b.easing,delay:b.delay,step:function(a){s(c,b.prop,a+g)},renderId:i,callback:function(){b._promise.resolve([{target:c,succ:!0}]).disable()}}),b._render=d.getRender(i)}function n(a,b){var c=o(a);return Object.keys(c).map(function(a){return b({prop:a,to:this[a]})},c)}function o(a){var b={};return a.split(J).forEach(function(a){var b=a.match(/([^\(\)]+)/g),c=b[1].split(/\,\s*/),d=G[b[0]],e=3===d,f=0>d||c.length<=1,g=f?[""]:["X","Y","Z"];
d&&c.forEach(function(a,c){if(a&&c<=g.length&&e||f&&1>c||!f&&2>c){var d=b[0].replace("3d","")+g[c];this[d]=a}},this)},b),b}function p(a){var b=a._oz_fx;return b||(b=++Q,a._oz_fx=b,a.removeEventListener(C,q),a.addEventListener(C,q)),U[b]||(U[b]={}),b}function q(a){if(a.target===this){var b=this,c=this._oz_fx,d=U[c];if(d)if(a.propertyName===$){for(var e in G)delete d[e];var f=V[c]||[];this.style[bb]=u(c),f.forEach(function(a){a.resolve([{target:b,succ:!0}]).disable()})}else{var g=d[a.propertyName];g&&(delete d[g.prop],this.style[bb]=u(c),g._promise&&g._promise.resolve([{target:this,succ:!0}]).disable())}}}function r(a,b){if(G[b])return t(a,b)||0;if(b===$)return a&&a.style[ab||b]||H;var c=w(b),d=a&&(a.style[c]||(N?N(a,"").getPropertyValue(b):a.currentStyle[b]));return d&&/\d/.test(d)&&d||0}function s(a,b,c){G[b]?$&&t(a,b,c):a.style[w(b)]=c}function t(a,c,d){var e=o(r(a,$));if(!d)return e[c]||"rotate"===c&&"0deg";var f=o(c+"("+d+")");b.mix(e,f),a.style[ab]=Object.keys(e).map(function(a){return a+"("+this[a]+")"},e).join(" ")}function u(a){var b=U[a];if(b){var c,d=[];for(var e in b)c=b[e],c&&c.prop&&d.push([G[c.prop]&&$||c.prop,(c.duration||0)+"ms",W[c.easing]||"linear",(c.delay||0)+"ms"].join(" "));return d.join(",")}return""}function v(a,b){var c=(a||"").toString().replace(K,""),d=(b||"").toString().replace(K,"");return 0===parseFloat(a)&&d||0===parseFloat(b)&&c||d||c}function w(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function x(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function y(a){var b;if(P){b=new e.Promise;var c=p(a);V[c]||(V[c]=[]),V[c].push(b)}return b}function z(a){if(a.members){var c=a.members[0]._opt;if(!G[c.prop])return a.members.map(function(a){return z(a)});var d=a._opt=b.copy(c);d.prop=$,d.to=a.members.map(function(a){return a._opt.prop+"("+a._opt.to+")"}).join(" "),delete d._parent}return a._opt}function A(a,b,c){var d=a._opt,e=a.stage;if(e&&!e.isCompleted()&&e.cancel(),a.members){if("string"==typeof b&&G[a.members[0]._opt.prop]){var f={};n(b,function(a){f[a.prop]=a.to}),b=f}a.members.forEach(function(a){var b=a._opt;b.to=c(b,this[b.prop])},b)}else d.to=c(a._opt,b);return a}function B(a){return new g(a)}for(var C,D=this,E=["Moz","webkit","ms","O",""],F={"":"transitionend",Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},G={rotate:-2,rotateX:-1,rotateY:-1,rotateZ:-1,scale:2,scale3d:3,scaleX:-1,scaleY:-1,scaleZ:-1,skew:2,skewX:-1,skewY:-1,translate:2,translate3d:3,translateX:-1,translateY:-1,translateZ:-1},H="rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateX(0px) translateY(0px) translateZ(0px) scaleX(1) scaleY(1) scaleZ(1) skewX(0deg) skewY(0deg)",I=["target","prop","duration","easing","delay","to"],J=/\)\s+/,K=/^[\-\d\.]+/,L=D.document.body,M=Array.prototype.slice,N=(document.defaultView||{}).getComputedStyle,O={transform:"",transition:""},P=!1,Q=0,R=0,S=0,T={},U={},V={},W=c.values,X=c.functions,Y=0,Z=E.length;Z>Y&&!f(O,E[Y]);Y++);var $=O.transform,_=O.transition,ab=w($),bb=w(_);return ab&&bb&&(P=!0),g.prototype={isPlaying:function(){return P?!!this._runningActors.state:d.isRunning(this.name)},isCompleted:function(){return this._count<=0},play:function(){return this.isCompleted()&&(clearTimeout(this._end_timer),this._reset_promise.fire(),this._optCache.forEach(function(a){this.actor(a)},this)),P?this.isPlaying()||(this._runningActors.state=1,this._runningActors.forEach(l)):d.run(this.name),this},pause:function(){return P?(this._runningActors.state=0,this._runningActors.forEach(j)):d.pause(this.name),this},clear:function(){return this.cancel(),this._optCache.forEach(function(a){a._cached=!1}),this._optCache.length=0,this},cancel:function(){return i(this,function(a,b){P?j(b):d.remove(a)}),this._optCache.forEach(function(a){a._promise.reject([{target:a.target,succ:!1}]).disable()}),this},complete:function(){return i(this,function(a,b){P?(k(b),b._promise.resolve([{target:b.target,succ:!0}]).disable()):d.complete(a)}),this},actor:function(a,c){function d(a){(a||j.follow()).reset().enable()}function f(a){return a.follow().bind(g),a._opt._watcher=g,delete a._opt._parent,a}function g(a){--o._count>0||(o._end_timer=setTimeout(function(){i(o),o._promise[a.succ?"resolve":"reject"]([{succ:a.succ}])},0))}var j,k,o=this,p=this.name;if(clearTimeout(this._end_timer),c){if(a.nodeType){var q,r={};if(I.forEach(function(a,b){"prop"===a?q=this[b]:"to"!==a&&(r[a]=this[b])},arguments),k=Object.keys(q).map(function(a){return o.actor(b.mix({_parent:!0,prop:a,to:q[a]},this))},r),1===k.length)return k[0]}else k=M.call(arguments),k=k.map(function(a){return a._parent=!0,o.actor(a)});return this._reset_promise.bind(d),j=new h(k,o)}if(a.prop=O[a.prop]||a.prop,a._promise&&d(a._promise),a.prop===$){var s=y(a.target);return k=n(a.to,function(c){return b.merge(c,a),c._parent=!0,c._promise=s,o.actor(c)}),this._reset_promise.bind(d),j=new h(k,o)}return o._count++,a._promise||(a._promise=new e.Promise),P?(this._runningActors.push(a),this.isPlaying()&&l(a)):m(p,a),j=new h(a,o),a._cached||(a._cached=!0,this._optCache.push(a),f(j)),j},group:function(){var a,b=this,c=M.call(arguments).filter(function(a){return a.stage===b});return this._reset_promise.bind(function(){a.follow().reset().enable()}),a=new h(c,b)},follow:function(){return this._promise}},h.prototype={enter:function(a){this.stage&&this.exit();var c=a.actor.apply(a,[].concat(z(this)));return c.follow().merge(this.follow()),b.mix(this,c)},exit:function(){var a=this.stage,c=this._opt;if(!a)return this;this.members?this.members=this.members.map(function(a){return a.exit()}):(P?(x(a._runningActors,c),a.isPlaying()&&j(c)):d.remove(a.name,c._render),x(a._optCache,c),c._promise.reject([{target:c.target,succ:!1}]).disable());var e=this.fork();return c._parent||e.follow().merge(c._promise),b.occupy(c,e._opt),delete this.stage,this},fork:function(){if(this.members)return new h(this.members.map(function(a){return a.fork()}));var a={};return I.forEach(function(b){a[b]=this[b]},this._opt),a._promise=new e.Promise,new h(a)},setto:function(a){return A(this,a,function(a,b){return b||0===b?b:a.to})},extendto:function(a){return A(this,a,function(a,b){if(!b)return a.to;var c=v(a.to,b);return parseFloat(a.to)+parseFloat(b)+c})},reverse:function(){return A(this,{},function(a){return void 0!==a.from?a.from:a._current_from})},follow:function(){return this._opt._promise}},b.mix(B,{VERSION:"1.0.5",renderMode:P?"css":"js",Stage:g,Actor:h,config:function(a){a.easing&&(b.mix(W,a.easing.values),b.mix(X,a.easing.functions),d&&d.config({easing:X})),/(js|css)/.test(a.renderMode)&&(P="css"===a.renderMode,this.renderMode=a.renderMode)},transform:t}),B}),define("soviet",["mo/lang/es5","mo/lang/mix","mo/lang/type","mo/lang/struct","dollar"],function(a,b,c,d,e){function f(a,c){b.config(this,c||{},p),this.target=e(a),this.events={},this.locks={},this.traceStack||(this.traceStack=[])}function g(a,b,c){var d;return a&&(this.trace&&(this.traceStack.unshift("<"+b.nodeName+"#"+(b.id||"")+">."+(b.className||"").split(/\s+/).join(".")),this.traceStack.length>this.trace&&this.traceStack.pop()),d=a.call(b,c),this.preventDefault&&!d&&c.preventDefault()),d}function h(a,b,c,d){var e=a[b];d?a[b]=c:c&&(e||(e=a[b]=m()),e.push(c))}function i(a,b,c,d){var e=a[b];!c||d?delete a[b]:e&&e.clear(c)}function j(a,b){return a[b]}function k(a){return this.locks[a]=this.matchesSelector?{}:{".":{},"#":{},"&":{}}}function l(a,b,c,d,e){if(void 0===e&&(e=this.autoOverride),b){if(!this.matchesSelector){var f=(/^[\.#]/.exec(b)||["&"])[0];b=b.substr("&"!==f?1:0),a=a[f],"."===f&&(b=b.split(".").join(" "))}}else b="_self_";return d(a,b,c,e)}var m=d.fnQueue,n=c.isFunction,o=e.find.matchesSelector,p={preventDefault:!1,matchesSelector:!1,autoOverride:!1,aliasEvents:{},trace:!1,traceStack:null};f.prototype={on:function(a,b,c){if(n(b)&&(c=b,b=void 0),"object"==typeof b)for(var d in b)this.on(a,d,b[d]);else{a=this.aliasEvents[a]||a;var e=this.events[a];e||(this.target.bind(a,this.trigger.bind(this)),this.reset(a),e=this.events[a]),l.call(this,e,b,c,h)}return this},off:function(a,b,c){n(b)&&(c=b,b=void 0),a=this.aliasEvents[a]||a;var d=this.events[a];return d&&l.call(this,d,b,c,i),this},matches:function(a,b){a=this.aliasEvents[a]||a;var c=this.events[a];return l.call(this,c,b,null,j)},reset:function(a){return a?(a=this.aliasEvents[a]||a,this.events[a]=this.matchesSelector?{}:{".":{},"#":{},"&":{}},k.call(this,a)):(this.events={},this.locks={}),this},disable:function(a,b){var c=this.locks;if(a){a=this.aliasEvents[a]||a;var d=c[a];d||(d=k.call(this,a)),b?l.call(this,d,b,!0,h,!0):d._disable=!0}else this._global_lock=!0;return this},enable:function(a,b){var c=this.locks;if(a){a=this.aliasEvents[a]||a;var d=c[a];d&&(b?l.call(this,d,b,null,i,!0):delete d._disable)}else delete this._global_lock;return this},trigger:function(a){var b=this.aliasEvents[a.type];b&&(a.type=b);var c,d=this,e=a.target,f=this.locks[a.type]||{},h=this.events[a.type];if(!h||this._global_lock||f._disable)return c;if(this.matchesSelector)Object.keys(h).forEach(function(b){!f[b]&&o(this,b)&&(c=g.call(d,h[b],this,a))},e);else{var i,j,k=(i="#")&&(j=e.id)&&h[i][j]||(i=".")&&(j=e.className)&&h[i][j]||(i="&")&&(j=e.nodeName.toLowerCase())&&h[i][j]||null;if(k){var l=f[i][j];l||(c=g.call(this,k,e,a))}}return h._self_&&(c=g.call(this,h._self_,e,a)),c}};var q=function(a,b){return new q.Soviet(a,b)};return q.Soviet=f,q}),define("mo/easing/timing",["mo/lang/mix","mo/easing/base"],function(a,b){function c(a,b){b=b||{};for(var c in a)b[c]="cubic-bezier("+a[c].join(",")+")";return b}var d={easeInQuad:[.55,.085,.68,.53],easeInCubic:[.55,.055,.675,.19],easeInQuart:[.895,.03,.685,.22],easeInQuint:[.755,.05,.855,.06],easeInSine:[.47,0,.745,.715],easeInExpo:[.95,.05,.795,.035],easeInCirc:[.6,.04,.98,.335],easeInBack:[.6,-.28,.735,.045],easeOutQuad:[.25,.46,.45,.94],easeOutCubic:[.215,.61,.355,1],easeOutQuart:[.165,.84,.44,1],easeOutQuint:[.23,1,.32,1],easeOutSine:[.39,.575,.565,1],easeOutExpo:[.19,1,.22,1],easeOutCirc:[.075,.82,.165,1],easeOutBack:[.175,.885,.32,1.275],easeInOutQuad:[.455,.03,.515,.955],easeInOutCubic:[.645,.045,.355,1],easeInOutQuart:[.77,0,.175,1],easeInOutQuint:[.86,0,.07,1],easeInOutSine:[.445,.05,.55,.95],easeInOutExpo:[1,0,0,1],easeInOutCirc:[.785,.135,.15,.86],easeInOutBack:[.68,-.55,.265,1.55]};return d.swing=d.jswing=b.positions.ease,{positions:a.mix(d,b.positions),values:a.mix(c(d),b.values),stringify:c}}),define("mo/cookie",[],function(){return function(a,b,c,d){if("string"==typeof a&&(d=c,c=b,b=a,a=window),void 0===c)return c=a.document.cookie.match(new RegExp("(?:\\s|^)"+b+"\\=([^;]*)")),c?decodeURIComponent(c[1]):null;d=d||{};var e,f="";d.expires&&(d.expires.constructor==Date?e=d.expires:(e=new Date,e.setTime(e.getTime()+1e3*60*60*24*d.expires)),f="; expires="+e.toGMTString());var g=d.path?"; path="+d.path:"",h=d.domain?"; domain="+d.domain:"",i=d.secure?"; secure":"";a.document.cookie=[b,"=",encodeURIComponent(c),f,g,h,i].join("")}}),define("../cardkit/app",["dollar","mo/lang","mo/browsers","mo/cookie","mo/template","mo/easing/timing","soviet","choreo","momo/base","momo/tap","momo/swipe","momo/scroll","../cardkit/view/control","../cardkit/view/picker","../cardkit/view/ranger","../cardkit/view/stars","../cardkit/view/modalcard","../cardkit/view/actionview","../cardkit/view/growl","../cardkit/tpl/layout/overflowmenu","../cardkit/tpl/layout/ctlbar","../cardkit/bus","../cardkit/render","../cardkit/supports","cardkit/env","mo/domready"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(){qb.openModal(a(this).data())}function A(){var a=m(this),b=a.data();b.disableUrl||b.disableJsonUrl?a.toggle():a.isEnabled||a.enable()}function B(){var a=m(this).toggle();G(a)}function C(){return a(this).hasClass("ck-post-button")?(A.call(this),void 0):C.call(this.parentNode)}function D(){return a(this).hasClass("ck-switch")?(B.call(this),void 0):D.call(this.parentNode)}function E(c){var d=b.mix({confirmText:"确认",cancelText:"取消",multiselect:!1},c.data());return d.options=a(d.options||".ck-option",c),r(c,d).open()}function F(a,b){var c=p(this),d=c.calc(a);c[b](d)}function G(a){a.parentId||(a.parentId=++db),qb.viewportGarbage[a.parentId]=1}function H(){}function I(b){var c=a(this).closest(".ck-list-wrap"),d=c.data("ckSlideAnime");d||(d=c.data("ckSlideAnime",+new Date));var e=qb.slideItemWidth,f=c[0].scrollLeft,g=f/e,i=g-Math.floor(g),j=a(".ck-list",c)[0],k=a(".ck-item",j).length-1;if(g>0&&k>g&&k-g>.1){g=b?.1>i?Math.floor(g):Math.ceil(g):i>.9?Math.ceil(g):Math.floor(g);var l=f-g*e+(g===k?lb:0);c.addClass("stop-scroll"),h(d).clear().play().actor(j,{transform:"translateX("+l+"px)"},200,"easeOutSine").follow().then(function(){h.transform(j,"translateX","0"),c[0].scrollLeft-=l,c.removeClass("stop-scroll")})}}function J(a){return a.replace(/#.*/,"")===ab.href.replace(/#.*/,"")}function K(b){var c,d,e=b.replace(/#(.*)/,function(a,b){return c=b,""}),f=ab.href.replace(/#(.*)/,function(a,b){return d=b||"",""});if(c&&e===f){if(!(c&&a("#"+c).hasClass("ck-card")&&c!==qb.viewport[0].id||(c=hb,d.split(fb).pop()!==c)))return!1}else c="";return c}function L(b){for(var c=b.target;!c.href;)c=c.parentNode;var d=K(c.href);if(d!==!1){if(a(c).hasClass("ck-link-extern"))return S(c.href,{target:"_blank"}),void 0;if(a(c).hasClass("ck-link-direct"))return d?M(d,null,!0):S(c.href),void 0;if(a(c).hasClass("ck-link")||a(c).hasClass("ck-link-img"));else{if(/(^|\s)ck-\w+/.test(c.className))return;if(c.target)return d&&"_self"===c.target?M(d,null,!0):S(c.href,c),void 0}d?M(d):M(ib,c.href)}}function M(b,c,d){if(qb.disableControl(),q.isOpened)return qb.closeModal().done(function(){M(b,c)}),void 0;if(qb._navDrawerLastView)return qb.closeNavDrawer().then(function(){M(b,c)}),void 0;qb._sessionLocked=!0;var e=b&&a("#"+b);if(!e.hasClass("ck-card")||b===qb.viewport[0].id)return qb.enableControl(),qb._sessionLocked=!1,void 0;qb.hideTopbar();var f=qb.viewport;if(P(b),d)return qb.loadingCard.addClass("moving").show(),setTimeout(function(){qb.changeView(e),f.hide(),qb.loadingCard.hide().removeClass("moving"),qb.enableControl(),qb._sessionLocked=!1,qb.showTopbar()},400),void 0;h.transform(e[0],"translateX",$.innerWidth+"px"),e.addClass("moving"),qb.changeView(e),qb.cardMask.css("opacity",0).addClass("moving");var g=h("card:moving").clear().play();g.actor(qb.cardMask[0],{opacity:"0.8"},400,"ease"),g.actor(e[0],{transform:"translateX(0)"},450,"ease"),g.follow().then(function(){f.hide(),qb.cardMask.removeClass("moving").css("opacity",0),e.removeClass("moving"),c?(qb._unexpectStateWhenGoback=!1,qb._pageCached=!0,$.location=c):(qb.enableControl(),qb._sessionLocked=!1,qb.showTopbar())})}function N(b){if(qb._sessionLocked=!0,qb.disableControl(),qb._navDrawerLastView)return qb.closeNavDrawer().then(function(){N(b)}),void 0;if(r.current)return r.current.close().event.once("close",function(){N(b)}),void 0;qb.hideTopbar();var c=a("#"+b),d=qb.viewport;h.transform(d[0],"translateX","0px"),d.addClass("moving"),qb.changeView(c,{isNotPrev:!0}),qb.cardMask.css("opacity","0.8").addClass("moving");var e=h("card:moving").clear().play();e.actor(qb.cardMask[0],{opacity:"0"},400,"ease"),e.actor(d[0],{transform:"translateX("+$.innerWidth+"px)"},450,"ease"),e.follow().then(function(){qb.cardMask.removeClass("moving"),d.hide().removeClass("moving"),h.transform(d[0],"translateX","0px"),O(b)})}function O(a){if(a===ib){(bb.referrer&&J(bb.referrer)||!/#.+/.test(bb.referrer))&&(qb._backFromSameUrl=!0),_.back();var b=ab.href;setTimeout(function(){ab.href===b&&ab.reload()},700)}else qb.enableControl(),qb._sessionLocked=!1,qb.showTopbar()}function P(a){x.BROWSER_CONTROL&&($.location=ab.href.replace(/#(.*)|$/,"#$1"+fb+a))}function Q(a){qb._preventNextHashEv=!0,ab.replace(ab.href.replace(/#.*/,"")+(a||gb))}function R(){if(!x.WINDOW_SCROLL){var a,b=qb.viewport[0];b.scrollTop<1?b.scrollTop=1:b.scrollTop>(a=b.scrollHeight-b.offsetHeight-1)&&(b.scrollTop=a)}}function S(a,b){if(b=b||{target:"_self"},"_self"!==b.target)T(a,b.target);else{if(qb.disableControl(),q.isOpened)return qb.closeModal().done(function(){S(a,b)}),void 0;if(qb._navDrawerLastView)return qb.closeNavDrawer().then(function(){S(a,b)}),void 0;qb._sessionLocked=!0,qb.hideTopbar();var c=qb.loadingCard,d=qb.viewport;P(ib),c.addClass("moving"),qb.changeView(c),setTimeout(function(){d.hide(),c.removeClass("moving"),qb._unexpectStateWhenGoback=!1,qb._pageCached=!0,$.location=a},10)}}function T(b,c){x.NEW_WIN?$.open(b,c):a('<a href="'+b+'" target="'+c+'"></a>').trigger("click")}function U(b){var c=b&&b.prev()[0];return c&&!c.offsetHeight?U(a(c)):c}function V(b){for(var c in b)a.Event.aliases[c]=eb[c]="ck_"+b[c]}function W(){}function X(){return!1}var Y,Z,$=this,_=$.history,ab=$.location,bb=$.document,cb=bb.body,db=0,eb={},fb="!/",gb="#"+fb+"i",hb="ckDefault",ib="ckLoading",jb="_modal_",kb=10,lb=15,mb='<div class="ck-navdrawer"></div>',nb='<div class="ck-viewmask"></div>',ob='<div class="ck-cardmask"></div>';b.mix(i.Class.prototype,{bind:function(b,c,d){return a(d||this.node).bind(b,c),this},unbind:function(b,c,d){return a(d||this.node).unbind(b,c),this},trigger:function(b,c){return delete b.layerX,delete b.layerY,a(b.target).trigger(c,b),this}});var pb={a:L,"a *":L,".ck-link-img":function(){var b=a(this).attr("src");b&&qb.openImage(b)},".ck-confirm-link":function(){var b=a(this);this.href||(b=b.parent()),qb.confirm("",function(){S(b.attr("href"),b)},b.data())},".ck-post-link":A,".ck-post-button, .ck-post-button span":C,".ck-switch, .ck-switch span":D,".ck-segment .ck-option, .ck-segment .ck-option span":function(){var b=a(this);b.hasClass("ck-option")||(b=b.closest(".ck-option"));var c=n(b.parent());c.select(b)},".ck-tagselector .ck-option":function(){var a=n(this.parentNode);a.select(this)},".ck-actions .ck-option":function(){var b=a(this).closest(".ck-actions"),c=n(b,{ignoreStatus:"false"!==b.data("ignoreStatus")&&!0});c.select(this)},".ck-folder header":function(){m(this.parentNode).toggle()},".ck-select, .ck-select span, .ck-select .enabled":function(){var b=a(this);b.hasClass("ck-select")||(b=b.parent());var c=n(b);E(b),v.bind("actionView:confirmOnThis",function(a){c.select(a.val())})},".ck-actions-button, .ck-actions-button span":function(){var b=a(this);b.hasClass("ck-actions-button")||(b=b.parent()),E(b)},".ck-modal-button":z,".ck-modal-link":z,".ck-growl-button":function(){s(this).open()},".ck-actionview article > .ck-option":function(){r.current.select(this)},".ck-actionview > footer .confirm":function(){r.current.confirm()},".ck-actionview > footer .cancel":function(){r.current.cancel()},".ck-modalview .wrapper > header .confirm":function(){q.confirm()},".ck-modalview .wrapper > header .cancel":function(){q.cancel()},".ck-ctl-backward":function(){qb.viewport[0].id===hb?N(ib):N(qb.viewport.data("prevCard")||hb)},".ck-ctl-reload":function(){$.location.reload()},".ck-top-overflow":function(){var b=".ck-top-overflow-items .ck-item,.ck-top-overflow-items .ck-overflow-item",c=a(b).map(function(b,c){return a(e.convertTpl(this,{i:c,text:a(b).html()},"item"))[0]},t.template);r(this,{options:c}).open(),v.bind("actionView:confirmOnThis",function(c){var d=c.val();v.once("actionView:close",function(){a(b).eq(d).trigger("tap")})})},".ck-top-title":function(){return x.FULLSCREEN_MODE?(a(".ck-top-nav").trigger("tap"),void 0):!0},".ck-top-nav, .ck-top-nav span":function(){this.href||qb.openNavDrawer()}};v.bind("cardkit:updateSize",function(){if(q.isOpened){var a=q._contentWrapper,b=2*$.innerHeight;q._iframeContent&&q._iframeContent.css({minHeight:b+"px",width:a[0].offsetWidth+"px",height:a[0].offsetHeight-qb.headerHeight+"px"}),q._content.css("minHeight",b+"px")}var c=r.current;if(c){var d=$.innerHeight+10,b=c._wrapperContent.children().map(function(a){return a.offsetHeight||0}).reduce(function(a,b){return a+b})+parseFloat(c._wrapperContent.find("article").eq(0).css("bottom"));d>b&&(b=d),c._wrapperContent.css({minHeight:b+"px"}),c._node.css({height:b+"px"})}}),q.event.bind("prepareOpen",function(){qb.disableView=!0,x.CARD_SCROLL?a(cb).addClass("bg").addClass("modal-view"):qb.resetWindowTop()}).bind("cancelOpen",function(){qb.disableView=!1,a(cb).removeClass("bg").removeClass("modal-view")}).bind("open",function(){x.CARD_SCROLL||a(cb).addClass("bg").addClass("modal-view");var b=q._contentWrapper;Y=qb.viewport,qb.changeView(b,{isModal:!0}),q._iframeContent?q.event.done("frameOnload",function(){var b=a(q._iframeWindow[0].document.body);b.bind("touchstart",R),qb.initView(b,{isModal:!0}),setTimeout(function(){qb.enableControl()},400)}):q._content.html()?setTimeout(function(){qb.enableControl()},400):q.event.done("contentchange",function(){qb.initView(b,{isModal:!0}),setTimeout(function(){qb.enableControl()},400)})}).bind("prepareClose",function(){qb.disableView=!1,a(cb).removeClass("modal-view")}).bind("cancelClose",function(){qb.disableView=!0,a(cb).addClass("modal-view")}).bind("close",function(){qb.changeView(Y,{preventRender:qb._navDrawerLastView,isModal:qb._navDrawerLastView,isNotPrev:!0}),a(cb).removeClass("bg")}),v.bind("actionView:prepareOpen",function(b){qb.disableView=!0;var c=b._wrapper;Z=qb.viewport,c[0].scrollTop=0,qb.changeView(c,{preventRender:!0,preventScroll:!0,isActions:!0}),x.CARD_SCROLL||a(cb).addClass("bg")}).bind("actionView:cancelOpen",function(){q.isOpened||(qb.disableView=!1),x.CARD_SCROLL||a(cb).removeClass("bg"),qb.changeView(Z,{isNotPrev:!0,preventRender:q.isOpened||qb._navDrawerLastView,preventScroll:!0,isModal:q.isOpened||qb._navDrawerLastView})}).bind("actionView:close",function(){q.isOpened||(qb.disableView=!1),x.CARD_SCROLL||a(cb).removeClass("bg"),qb.changeView(Z,{isNotPrev:!0,preventRender:q.isOpened||qb._navDrawerLastView,preventScroll:!0,isModal:q.isOpened||qb._navDrawerLastView})}).bind("actionView:jump",function(a,b,c){a.event.once("close",function(){qb.openURL(b,{target:c})})}),v.bind("ranger:changed",function(a,b){b&&S(e.format(b,{value:a.val()}))});var qb={init:function(b){var d=a(bb),e=this.root=b.root;this.mainview=a(".ck-main",e),this.wrapper=a(".ck-wrapper",e),this.header=a(".ck-header",e),x.BROWSER_CONTROL||(this.ctlbar=a(u.template).appendTo(this.wrapper),a(cb).addClass("has_ctlbar")),this.footer=a(".ck-footer",e),this.raw=a(".ck-raw",e),this.loadingCard=a("#"+ib).data("rendered","1"),this.defaultCard=a("#"+hb),this.scrollMask=a(nb).appendTo(cb),y.showScrollMask&&this.scrollMask.css({opacity:"0.2",background:"#f00"}),this.controlMask=a(nb).appendTo(cb),y.showControlMask&&this.controlMask.css({opacity:"0.2",background:"#0f0"}),this.cardMask=a(ob).appendTo(this.mainview),this.navDrawer=a(mb).prependTo(e),this.headerHeight=this.header.height(),this.sizeInited=!1,this.viewportGarbage={},this._sessionLocked=!0,this._unexpectStateWhenGoback=!0,this.initWindow(),y.enableConsole&&(console.info("Features:",x),console.info("Platform:",c)),h.config({easing:f}),this.scrollGesture=l(bb,{}),V(this.scrollGesture.event);var i=j(bb,{tapThreshold:"android"!==c.os||!c.chrome&&20||0});V(i.event);var m=k(this.wrapper,{timeThreshold:1e4,distanceThreshold:10});V(m.event),x.CARD_SCROLL||a(cb).addClass("no-cardscroll"),x.SAFARI_OVERFLOWSCROLL||a(cb).addClass("no-overflowscroll"),x.FOLDABLE_URLBAR&&a(cb).addClass("mobilesafari-bar"),x.FIXED_BOTTOM_BUGGY&&a(cb).addClass("fixed-bottom-buggy"),x.FULLSCREEN_MODE&&a(cb).addClass("fullscreen-mode"),this.initState(),a($).bind("resize",function(){var a=qb.isLandscape();a!==qb.landscapeMode&&(qb.initWindow(),qb.hideAddressbar(),r.current&&!x.CARD_SCROLL&&(qb.viewport[0].innerHTML=qb.viewport[0].innerHTML))}),this.cardMask.bind("touchstart",function(a){a.preventDefault(),qb.closeNavDrawer()}),this.loadingCard.bind("touchstart",function(a){a.preventDefault()}),g(bb,{aliasEvents:eb,matchesSelector:!0,preventDefault:!0}).on("click",{a:H,"a *":H}).on("change",{".ck-ranger":function(a){return o(this).val(a.target.value),!0}}).on("touchstart",{".ck-ranger":function(a){return o(this).val(a.target.value),o(this).changeStart(),!0}}).on("touchend",{".ck-ranger":function(){return o(this).changeEnd(),!0},".ck-stars":function(a){F.call(this,a,"val")},".ck-stars .slider-selected":function(a){F.call(this.parentNode,a,"val")}}).on("touchmove",{".ck-stars":function(a){F.call(this,a,"pretend")},".ck-stars .slider-selected":function(a){F.call(this.parentNode,a,"pretend")}}).on("tap",pb),d.bind("scrolldown",function(){s||setTimeout(function(){qb.hideAddressbar()},0)});var n=g(this.wrapper,{aliasEvents:eb,matchesSelector:!0}).on("swipeleft",{".ck-mini-unit .ck-list-wrap *":function(){I.call(this,!0)}}).on("swiperight",{".ck-mini-unit .ck-list-wrap *":function(){I.call(this,!1)}});if(x.SAFARI_OVERFLOWSCROLL||n.on("touchend",{".ck-mini-unit .ck-list-wrap *":function(a){a.preventDefault()}}),x.CARD_SCROLL&&x.SAFARI_OVERFLOWSCROLL&&(d.bind("scrollstart",function(){qb.scrollMask.show()}).bind("scrollend",function(){qb.scrollMask.hide()}),d.bind("touchstart",R)),x.CARD_SCROLL&&d.bind("scroll",function(){if(q.isOpened){var a=$.scrollY;if(!a&&$.innerHeight>=qb.windowFullHeight)return;qb.resetWindowTop(),cb.scrollTop=0,a>40&&(qb.viewport[0].scrollTop=qb.viewport[0].scrollTop+a-40)}}),x.CARD_SCROLL&&!x.FULLSCREEN_MODE){var p,s,t=function(){s=!1},v=function(a){this===a.target&&(p=a.touches[0].clientY,setTimeout(function(){s=!0,qb.viewport[0].scrollTop=0},0))};this.header.find(".ck-top-title").bind("touchstart",v),this.header.bind("touchstart",v),x.FOLDABLE_URLBAR&&this.header.bind("touchmove",function(a){s&&a.touches[0].clientY<p&&(t(),s=!0,qb.windowFullHeight=1/0,qb.hideAddressbar())}).bind("touchend",t).bind("touchcancel",t)}x.FULLSCREEN_MODE&&a(bb).on("scrollstart",function(){qb.hideAllBars()}).on("scrollend",function(){qb.showAllBars()})},showView:function(){a(cb).addClass("ck-inited"),qb.hideAddressbar(),qb.hideLoadingCard(),qb.enableControl(),v.resolve("inited")},initWindow:function(){this.landscapeMode=this.isLandscape(),this.windowFullHeight=1/0},initStateWatcher:function(){function b(){if(qb._backFromSameUrl){var a=$.location.hash.split(fb).pop();return a?(_.back(),void 0):($.location.reload(),void 0)}c=!1,setTimeout(function(){c||qb._backFromOtherpage||(qb._sessionLocked=!1,qb._backFromOtherpage=!0,x.GOBACK_WHEN_POP&&!qb._unexpectStateWhenGoback?_.back():$.location.reload(!0))},100)}var c,d;a($).bind("hashchange",function(b){if(!qb._backFromSameUrl){if(c=!0,qb._preventNextHashEv||b.newURL.length>=b.oldURL.length)return qb._preventNextHashEv=!1,void 0;if(qb._sessionLocked)return $.location.reload(!0),void 0;if(d)return qb.resetWindowTop(),P(d),q.isOpened?q.close():qb._backFromOtherpage?(qb._backFromOtherpage=!1,qb.changeView(d),qb._sessionLocked=!1,qb.showView()):N(d),d=!1,void 0;var e=ab.hash.split(fb).pop();if(e&&"i"!==e){if(qb._sessionLocked=!1,d=e===jb&&hb||e,!a("#"+d).hasClass("ck-card"))return;_.back()}else N(ib)}}),v.once("inited",function(){a($).bind("popstate",b)})},initState:function(){qb._sessionLocked=!1,x.BROWSER_CONTROL?qb.initStateWatcher():v.once("inited",function(){var b=x.NO_POP_ON_CACHED_PAGE?"resize":"popstate";a($).bind(b,function(){(!x.RESIZE_WHEN_SCROLL||qb._pageCached)&&(qb._pageCached=!1,qb.hideTopbar(),qb.viewport.hide(),qb.changeView(qb.loadingCard),setTimeout(function(){$.location.reload()},20))})});var b,c,d=ab.hash.replace(/^#/,"");if(d&&(d=d.split(fb)),d){var e=[];if(d=d.map(function(b){return b===jb||"i"===b||b&&a("#"+b).hasClass("ck-card")?(e.push(fb+b),b):void 0}).filter(function(a){return a}),b=d.pop(),e=e.join(""),"#"+e!==ab.hash&&(Q(gb+e),!x.REPLACE_HASH))return $.location.reload();x.BROWSER_CONTROL||(b===ib||b===jb)&&(b=null),b===jb?(c=!0,b=hb):"i"===b&&(b=null)}x.BROWSER_CONTROL&&x.REPLACE_HASH&&!J(bb.referrer)&&(Q(gb),b&&(d.forEach(function(a){"i"!==a&&P(a)}),P(b))),b?(qb.changeView(b),b===ib||c?(qb._backFromOtherpage=!0,_.back()):qb.showView()):qb.initNewPage()},initNewPage:function(){qb.changeView(qb.defaultCard),P(hb),qb.showView()},initView:function(a,b){w.openCard(a,b),a.data("rendered")||b.preventRender||(w.initCard(a,this.raw,this.footer,b),b.isModal||b.isActions||a.data("rendered","1")),this.watchScroll(a)},releaseView:function(a){this.viewport&&w.closeCard(this.viewport,a)},changeView:function(b,c){c=c||{},x.CARD_SCROLL||c.preventScroll||qb.resetWindowTop(),this.releaseView(c),"string"==typeof b&&(b=a("#"+b));var d=b===this.loadingCard;this.viewport&&!c.isNotPrev&&b.data("prevCard",this.viewport[0].id),this.initView(b,c),this.viewport=b.show(),this.updateSize(c),c.isModal||c.isActions||this.updateFrame(),d||setTimeout(function(){v.fire("readycardchange",[b])},0)},updateSize:function(b){if(b=b||{},(x.CARD_SCROLL||b.isActions)&&this.viewport[0].id!==ib){this.viewport[0].style.height=(this.sizeInited?$.innerHeight:screen.availHeight+60)+2+"px";var c=this.viewport.find(".ck-footer"),d=U(c);if(d){var e=screen.availHeight-(d.offsetTop+d.offsetHeight+this.viewport[0].scrollTop);e>0?c.css("paddingTop",e+"px"):c.css("paddingTop","0px")}}this.viewport.find(".ck-mini-unit").forEach(function(a){var b=this(".ck-item",a),c=qb.slideItemWidth=$.innerWidth-kb-lb;b.length>1&&(b.css("width",c-kb-2+"px"),this(".ck-list",a).css("width",c*b.length+kb+"px"))},a),v.fire("cardkit:updateSize")},watchScroll:function(a){this.scrollGesture.watchScroll(a[0])},updateFrame:function(){w.setFrame(this.viewport,this.header,this.navDrawer,this.raw)},renderUnit:function(a){w.initUnit(a,this.raw)},hideLoadingCard:function(){qb.loadingCard.hide().css({height:$.innerHeight+60+"px",position:"static"}),qb.showTopbar()},hideAllBars:function(){a(cb).addClass("allbars-disabled")},showAllBars:function(){a(cb).removeClass("allbars-disabled")},hideTopbar:function(){this.topbarEnable&&!this.disableView&&(this.topbarEnable=!1,a(cb).removeClass("ck-topbar-enabled"))},showTopbar:function(){this.topbarEnable||(this.topbarEnable=!0,a(cb).addClass("ck-topbar-enabled"))},hideAddressbar:function(){this.windowFullHeight>$.innerHeight&&(this.loadingCard.find("div")[0].style.visibility="hidden",!x.FOLDABLE_URLBAR||!x.CARD_SCROLL&&this.sizeInited||(qb.resetWindowTop(),cb.scrollTop=0),this.sizeInited||(this.sizeInited=!0),this.windowFullHeight=$.innerHeight,qb.updateSize(),this.loadingCard.find("div")[0].style.visibility="")},resetWindowTop:function(){x.HIDE_ADDRESSBAR&&$.scrollTo(0,-1)},isLandscape:function(){return $.innerWidth/$.innerHeight>1.1},enableControl:function(){this.controlMask.hide(),$.ckControl=W},disableControl:function(){this.controlMask.show(),$.ckControl=X},showLoading:function(a){this.disableControl(),this.loadingTips||(this.loadingTips=s({expires:-1,keepalive:!0,corner:"center"})),this.loadingTips.set({content:a||"正在加载..."}).open(),this._loadingStart=+new Date},hideLoading:function(a){a=b.mix({duration:800},a);var c=+new Date-this._loadingStart;c<a.duration?setTimeout(function(){qb.hideLoading(a)},a.duration-c):(this.loadingTips&&this.loadingTips.close(),this.enableControl())},openNavDrawer:function(){qb._navDrawerLastView||(qb._navDrawerLastView=qb.viewport,qb.navDrawer.show(),qb.changeView(qb.navDrawer.find("article"),{preventRender:!0,isNotPrev:!0,isModal:!0}),a(cb).addClass("nav-view"))},closeNavDrawer:function(){return qb._navDrawerLastView?(qb.changeView(qb._navDrawerLastView,{isNotPrev:!0}),a(cb).removeClass("nav-view"),setTimeout(function(){qb._navDrawerLastView=!1,qb.navDrawer.hide(),setTimeout(function(){v.fire("navdrawer:close")},50)},400),v.promise("navdrawer:close")):void 0},openImage:function(a){M(ib,a)},openModal:function(a){this.hideAddressbar(),this.disableControl(),q.isOpened||P(jb),q.set(a).open()},closeModal:function(){return q.cancel(),q.event.promise("close")},alert:function(a,c){r("ckAlert",b.mix({title:"提示",content:a||"",cancelText:"关闭",multiselect:!1},c)).open()},confirm:function(a,c,d){r("ckAlert",b.mix({title:"提示",content:a||"",confirmText:"确认",cancelText:"取消",multiselect:!0},d)).open(),v.bind("actionView:confirmOnThis",c)},notify:function(a,c){qb.growl(b.mix({content:a},c)).open()},openURL:S,delegate:g(bb,{aliasEvents:eb,autoOverride:!0,matchesSelector:!0,preventDefault:!0}),event:v,control:m,picker:n,ranger:o,modalCard:q,actionView:r,growl:s};
return qb}),require.config({baseUrl:"js/mod/",distUrl:"dist/js/mod/",aliases:{cardkit:"../cardkit/"}}),define("mo/easing/functions",[],function(){}),define("mo/mainloop",[],function(){}),define("cardkit/env",["mo/browsers"],function(){return{}}),define("cardkit/pageready",["finish","cardkit/bus"],function(a,b){b.once("readycardchange",function(){setTimeout(a,500)})}),require(["dollar","cardkit/bus","cardkit/app","cardkit/env"],function(a,b,c,d){function e(){c.init({root:a(".ck-root")})}d.enableConsole?require(["mo/console"],function(a){a.config({record:!0}).enable(),e()}):e()});