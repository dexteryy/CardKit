!function(a,b){function c(a){return"[object Function]"===i.call(a)}function d(a){return"[object Array]"===i.call(a)}function e(a){return"setInterval"in a}function f(a){function b(){}return b.prototype=a,new b}(!b||a.window)&&(b={});var g,h,i=Object.prototype.toString,j=/(.*)!(.+)/,k=/\Wrequire\((['"]).+?\1\)/g,l=/\.(js|json)$/,m=/^\.+?\/.+/,n=/(^|\/)\.\//g,o=/[^/\/\.]+\/\.\.\//,p=/^([\w\-]+)\//,q={require:1,exports:1,module:1,host:1,finish:1},r={mods:{}},s={},t={},u={},v={},w={},x=Array.prototype.forEach||function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)};b.define=function(f,h,i){var j="string"==typeof i;i||(h?d(h)?i=b.filesuffix(b.realname(b.basename(f))):(i=h,h=null):(i=f,f=""),"string"!=typeof f?(h=f,f=""):(j="string"==typeof i,j||h||(h=b.seek(i)))),f=f&&b.realname(f);var k=f&&r.mods[f];if(r.debug||!k||!k.name||!(j&&2==k.loaded||k.exports)){j&&r.enable_ozma&&(h=null);var l=e(this)?this:a;if(k=r.mods[f]={name:f,url:k&&k.url,host:l,deps:h||[]},""===f&&(g=k),"string"!=typeof i)k.block=i,k.loaded=2;else{var m=r.aliases;m&&(i=i.replace(/\{(\w+)\}/g,function(a,b){return m[b]||""})),k.url=i}k.block&&!c(k.block)&&(k.exports=i)}},b.define.amd={},b.require=function(c,d,f){if("string"==typeof c){if(!d)return c=b.realname(b.basename(c,h)),(r.mods[c]||{}).exports;c=[c]}else d||(d=c,c=b.seek(d));var i=e(this)?this:a;f||(f={url:h&&h.url});for(var j,k=0,l=b.scan.call(i,c,f),m=0,n=l.length;n>m;m++)j=l[m],j.is_reset&&(j=r.mods[j.name]),j.url&&2!==j.loaded&&(k++,j.loaded=1,b.fetch(j,function(){this.loaded=2;var a=g;a&&(a.name=this.name,a.url=this.url,r.mods[this.name]=a,g=null),--k<=0&&b.require.call(i,c,d,f)}));k||(f.deps=c,f.host=i,f.block=d,setTimeout(function(){b.tidy(c,f),l.push(f),b.exec(l.reverse())},0))},b.require.config=function(a){for(var c in a)if("aliases"===c){r[c]||(r[c]={});for(var d in a[c])r[c][d]=a[c][d];var e=r.mods;for(var f in e)e[f].name=b.realname(f),e[e[f].name]=e[f]}else r[c]=a[c]},b.exec=function(a){for(var c,d,e,g,i,j,k,l,m,n,o=v;c=a.pop();)if(c.is_reset?(n=f(r.mods[c.name]),n.host=c.host,n.newname=c.newname,c=n,w[c.newname]||(w[c.newname]=[]),w[c.newname].push(c),c.exports=void 0):c.name&&(c=r.mods[c.name]||c),c.block&&(c.running||void 0===c.exports)){k=[],l={},m={id:c.name,filename:c.url,exports:l},j=c.deps.slice(),j[c.block.hiddenDeps?"unshift":"push"]("require","exports","module");for(var p=0,q=j.length;q>p;p++)switch(d=j[p]){case"require":k.push(b.require);break;case"exports":k.push(l);break;case"module":k.push(m);break;case"host":k.push(c.host);break;case"finish":e=c.name,o[e]?o[e].push(a):o[e]=[a],k.push(function(a){setTimeout(function(){void 0!==a&&(c.exports=a),o[e]&&(x.call(o[e],function(a){this(a)},b.exec),delete o[e],c.running=0)},0)}),i=1;break;default:k.push(((w[d]||[]).pop()||r.mods[b.realname(d)]||{}).exports)}if(!c.running){h=c,g=c.block.apply(c.host,k)||null,h=!1,l=m.exports,c.exports=void 0!==g?g:l;for(var s in l){s&&(c.exports=l);break}}if(i)return c.running=1,!1}return!0},b.fetch=function(c,d){var e=c.url,f=s[e];if(f)1===f?d.call(c):f.push([d,c]);else{var g=c.name,h=t;if(c.deps&&c.deps.length&&1!==h[g]){if(h[g]=[c.deps.length,d],x.call(c.deps,function(a){var d=r.mods[b.realname(a)];1!==this[a]&&d.url&&2!==d.loaded?(this[a]||(this[a]=[]),this[a].push(c)):h[g][0]--},u),h[g][0]>0)return;h[g]=1}f=s[e]=[[d,c]];var i=/^\w+:\/\//.test(e)?e:(r.enable_ozma&&r.distUrl||r.baseUrl||"")+(r.enableAutoSuffix?b.namesuffix(e):e);b.load.call(c.host||a,i,function(){x.call(f,function(a){a[0].call(a[1])}),s[e]=1,u[g]&&1!==u[g]&&(x.call(u[g],function(a){var c=this[a.name];--c[0]<=0&&(this[a.name]=1,b.fetch(a,c[1]))},h),u[g]=1)})}},b.load=function(b,d){var f=e(this)?this.document:a.document,g=f.createElement("script");g.type="text/javascript",g.async="async",d?c(d)&&(d={callback:d}):d={},d.charset&&(g.charset=d.charset),g.src=b;var h=f.getElementsByTagName("head")[0];g.onload=g.onreadystatechange=function(a,b){(b||!g.readyState||/loaded|complete/.test(g.readyState))&&(g.onload=g.onreadystatechange=null,h&&g.parentNode&&h.removeChild(g),g=void 0,!b&&d.callback&&d.callback())},h.insertBefore(g,h.firstChild)},b.scan=function(a,c,d){if(d=d||[],!a[0])return d;var e,f=d.history;if(f||(f=d.history={}),a[1])e=a,a=!1;else{var g,h=a[0],i=j.exec(h);i&&(h=i[2],i=i[1]);var k=b.realname(h);if(!r.mods[k]&&!q[k]){var l=b.realname(b.basename(h,c));k!==l&&(r.mods[c.url+":"+k]=l,k=l),r.mods[l]||b.define(l,b.filesuffix(l))}if(a=c=r.mods[k],!a)return d;if("new"===i?a={is_reset:!0,deps:a.deps,name:k,newname:i+"!"+k,host:this}:g=a.name,f[g])return d;f[g]?e=[]:(e=a.deps||[],g&&(f[g]=!0))}for(var m=e.length-1;m>=0;m--)f[e[m]]||b.scan.call(this,[e[m]],c,d);return a&&(b.tidy(e,a),d.push(a)),d},b.seek=function(a){var b=a.hiddenDeps||[];if(!a.hiddenDeps){var c=a.toString(),d=null;for(b=a.hiddenDeps=[];d=k.exec(c);)b.push(d[0].slice(10,-2))}return b.slice()},b.tidy=function(a,c){x.call(a.slice(),function(d,e){var f=this[c.url+":"+b.realname(d)];"string"==typeof f&&(a[e]=f)},r.mods)},b.namesuffix=function(a){return a.replace(/(.+?)(_src.*)?(\.\w+)$/,function(a,b,c,d){return b+(c&&"_combo"||"_pack")+d})},b.filesuffix=function(a){return l.test(a)?a:a+".js"},b.realname=function(a){var b=r.aliases;return b&&(a=a.replace(p,function(a,c){return b[c]||c+"/"})),a},b.basename=function(a,c){var d=m.exec(a);return d&&c&&(a=(c.url||"").replace(/[^\/]+$/,"")+d[0]),b.resolvename(a)},b.resolvename=function(a){for(a=a.replace(n,"$1");o.test(a);)a=a.replace(o,"/").replace(/(^|[^:])\/\/+/g,"$1/");return a};var y={};for(var z in b)y[z]=b[z];b.origin=y,b.cfg=r,a.oz=b,a.define=b.define,a.require=b.require}(this,"undefined"!=typeof exports&&exports),require.config({enable_ozma:!0}),define("mo/lang/es5",[],function(){function a(){}var b=this,c=b.Array,d=b.String,e=b.Object,f=b.Function,g=e.prototype,h=c.prototype,i=f.prototype;i.bind||(i.bind=function(b){var c=this,d=h.slice.call(arguments,1),f=function(){var a=d.concat(h.slice.call(arguments));if(this instanceof f){var g=c.apply(this,a);return e(g)===g?g:this}return c.apply(b,a)};return c.prototype&&(a.prototype=c.prototype,f.prototype=new a,a.prototype=null),f});var j=i.call,k=j.bind(g.hasOwnProperty),l=j.bind(g.toString);h.filter||(h.filter=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)d in this&&a.call(b,this[d],d,this)&&c.push(this[d]);return c}),h.forEach||(h.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)c in this&&a.call(b,this[c],c,this)}),h.map||(h.map=function(a,b){for(var c=0,d=[],e=this.length;e>c;c++)c in this&&(d[c]=a.call(b,this[c],c,this));return d}),h.reduce||(h.reduce=function(a,b){for(var c=1,d=this[0],e=this.length;e>c;c++)c in this&&(d=a.call(b,d,this[c],c,this));return d}),h.some||(h.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1}),h.every||(h.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),h.indexOf||(h.indexOf=function(a,b){var c=this.length;for(b=parseInt(b,10)||0,0>b&&(b+=c);c>b;b++)if(b in this&&this[b]===a)return b;return-1}),h.lastIndexOf||(h.lastIndexOf=function(a,b){var c=this.length;for(b=parseInt(b,10)||c-1,0>b&&(b+=c);b>-1;b--)if(b in this&&this[b]===a)return b;return-1}),c.isArray||(c.isArray=function(a){return"[object Array]"===l(a)});var m=/\S/,n=/^\s+/,o=/\s+$/;m.test("Â ")&&(n=/^[\s\xA0]+/,o=/[\s\xA0]+$/),d.prototype.trim||(d.prototype.trim=function(){return this.replace(n,"").replace(o,"")}),e.keys||(e.keys=function(a){var b=[];for(var c in a)k(a,c)&&b.push(c);return b}),e.create||(e.create=function(a){function b(){}return b.prototype=a,new b}),e.getPrototypeOf||(e.getPrototypeOf=function(a){return a.__proto__||a.constructor.prototype})}),define("mo/lang/type",["mo/lang/es5"],function(a,b,c){function d(a){return null==a?String(a):g[e.call(a)]||"object"}var e=Object.prototype.toString,f=Array.prototype,g={};f.forEach.call("Boolean Number String Function Array Date RegExp Object".split(" "),function(a){this["[object "+a+"]"]=a.toLowerCase()},g),c.type=d,c.isFunction=function(a){return"[object Function]"===e.call(a)},c.isWindow=function(a){return a&&a===a.window},c.isEmptyObject=function(a){for(var b in a)return b=null,!1;return!0},c.isArraylike=function(a){var b=a.length;return!c.isWindow(a)&&("function"!=typeof a||a.constructor!==Function)&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}}),define("mo/lang/mix",["mo/lang/es5","mo/lang/type"],function(a,b,c,d){function e(a){var b,c,d,f,g=arguments,h=g.length,i={number:1,"boolean":2,string:3};"object"!=typeof g[h-1]?(c=g[h-1]||0,h--):c=0;for(var j=1;h>j;j++)if(b=g[j],Array.isArray(b))for(a=!i[typeof a]&&a||[],f=b.length,d=0;f>d;d++)a[d]=c>=1&&b[d]&&"object"==typeof b[d]?e(a[d],b[d],c-1):b[d];else{a=!i[typeof a]&&a||{};for(d in b)a[d]=c>=1&&b[d]&&"object"==typeof b[d]?e(a[d],b[d],c-1):b[d]}return a}function f(a){var b,c,d,e,g,i,j,k=arguments,l=k.length,m={object:1,array:2};"object"!=typeof k[l-1]?(c=k[l-1]||0,l--):c=0;for(var n=1;l>n;n++)if(b=k[n],"object"==typeof b)if(Array.isArray(a)){if(!Array.isArray(b))continue;a=a||[],g={},i=[],j="__oz_uniqmark_"+(+new Date+Math.random()),b=b.concat(a),a.length=0,b.forEach(function(b){b&&"object"==typeof b?b[j]||(a.push(c>=1&&Array.isArray(b)?f(b,[],c-1):b),b[j]=1,i.push(b)):(e=typeof b+"_"+b,this[e]||(a.push(b),this[e]=1))},g),i.forEach(function(a){delete a[j]})}else{a=a||{};for(d in b)a.hasOwnProperty(d)?c>=1&&d&&m[h(a[d])]+0===m[h(b[d])]+0&&(a[d]=f(a[d],b[d],c-1)):a[d]=b[d]}return a}function g(a){var b,c,d,e,f,i,j,k=arguments,l=k.length,m={object:1,array:2};"object"!=typeof k[l-1]?(c=k[l-1]||0,l--):c=0;for(var n=1;l>n;n++)if(b=k[n],"object"==typeof b)if(Array.isArray(a)){if(!Array.isArray(b))continue;a=a||[],f={},i=[],j="__oz_uniqmark_"+(+new Date+Math.random()),a.forEach(function(a){a&&"object"==typeof a&&!a[j]?(a[j]=1,i.push(a)):(e=typeof a+"_"+a,this[e]=1)},f),a.length=0,b.forEach(function(b){b&&"object"==typeof b?1===b[j]&&(a.push(b),b[j]=2):(e=typeof b+"_"+b,1===this[e]&&(a.push(b),this[e]=2))},f),i.forEach(function(a){delete a[j]})}else{a=a||{};for(d in a)b.hasOwnProperty(d)?c>=1&&d&&m[h(a[d])]+0===m[h(b[d])]+0&&(a[d]=g(a[d],b[d],c-1)):delete a[d]}return a}var h=b.type;d.mix=e,d.merge=f,d.interset=g,d.copy=function(a,b){return e(null,a,b)},d.occupy=function(a,b,c){return e(g(a,b,c),b,c)},d.defaults=f,d.config=function(a,b,c,d){return e(f(a,c,d),g(e(null,b,d),c,d),d)},d.unique=function(a,b){return f(a,[],b)},d.each=function(a,c,d){var e,f=0,g=a.length;if(b.isArraylike(a))for(;g>f&&(e=c.call(d,a[f],f),e!==!1);f++);else for(f in a)if(e=c.call(d,a[f],f),e===!1)break;return a}}),define("mo/lang/struct",["mo/lang/es5","mo/lang/mix"],function(a,b,c,d){var e=b.mix;d.index=function(a,b){for(var c,d={},e=0,f=a.length;f>e;e++)c=a[e],b&&"object"==typeof c?d[c[b]]=c:d[c]=!0;return d},d.fnQueue=function(){function a(a){return function(){var b,d;for(c=this.slice().reverse();d=c.pop();)b=d[a].apply(d,arguments);return c=!1,b}}var b=[],c=!1;return e(b,{call:a("call"),apply:a("apply"),clear:function(a){if(a){for(var b=this.length,d=b-c.length,e=this.length-1;e>=0;e--)this[e]===a&&(this.splice(e,1),c&&e>=d&&c.splice(b-e-1,1));if(0>e)return!1}else this.length=0;return!0}}),b}}),define("eventmaster",["mo/lang/es5","mo/lang/mix","mo/lang/struct"],function(a,b,c){function d(a){var b=this;a&&(this.subject=a.subject,this.trace=a.trace,this.traceStack=a.traceStack||[]),this.doneHandlers=j(),this.failHandlers=j(),this.observeHandlers=j(),this._alterQueue=j(),this._lastDoneQueue=[],this._lastFailQueue=[],this.status=0,this._argsCache=[],this.pipe={},l.forEach(function(a){this[a]=function(){return b[a].call(b,k.call(arguments))}},this.pipe)}function e(){var a=[],b=[],c=new d;return c._when=[],c._count=c._total=arguments.length,Array.prototype.forEach.call(arguments,function(c,d){function e(c){b[d]||(b[d]=!0,a[d]=c,0===--f._count&&(b.length=0,f._count=f._total,f.resolve.call(f,a)))}var f=this;f._when.push(c.bind(e))},c),c}function f(a,b){return a&&a.then?a.then(b.pipe.resolve,b.pipe.reject).progress(b.pipe.notify):void 0!==a&&b.resolve([a]),a}function g(a){return function(b){var c=this.lib[b];return c||(c=this.lib[b]=new d({subject:b,trace:this.trace,traceStack:this.traceStack})),c[a].apply(c,k.call(arguments,1)),this}}function h(a){a&&(this.trace=a.trace,this.traceStack=a.traceStack),this.lib={}}function i(a){return new h(a)}var j=c.fnQueue,k=Array.prototype.slice,l=["notify","fire","error","resolve","reject","reset","disable","enable"],m=d.prototype={then:function(a,b){var c=this.status;return b?2===c?this._resultCache=b.apply(this,this._argsCache):c||(this.failHandlers.push(b),this._lastFailQueue=this.failHandlers):this._lastFailQueue=[],a?1===c?this._resultCache=a.apply(this,this._argsCache):c||(this.doneHandlers.push(a),this._lastDoneQueue=this.doneHandlers):this._lastDoneQueue=[],this},done:function(a){return this.then(a)},fail:function(a){return this.then(!1,a)},cancel:function(a,b){return a&&this.doneHandlers.clear(a),b&&this.failHandlers.clear(b),this},bind:function(a){return this.status&&a.apply(this,this._argsCache),this.observeHandlers.push(a),this},unbind:function(a){return this.observeHandlers.clear(a),this},progress:function(a){var b=this;return this.observeHandlers.push(function(){b.status||a.apply(this,arguments)}),this},notify:function(a){return this._disalbed?this:(this.status=0,this.observeHandlers.apply(this,a||[]),this)},fire:function(a){if(this._disalbed)return this;this.trace&&this._trace(),a=a||[];var b=this.doneHandlers;return this.doneHandlers=this._alterQueue,this.failHandlers.length=0,this.observeHandlers.apply(this,a),b.apply(this,a),b.length=0,this._alterQueue=b,this},error:function(a){if(this._disalbed)return this;this.trace&&this._trace(),a=a||[];var b=this.failHandlers;return this.failHandlers=this._alterQueue,this.doneHandlers.length=0,this.observeHandlers.apply(this,a),b.apply(this,a),b.length=0,this._alterQueue=b,this},resolve:function(a){return this.status=1,this._argsCache=a||[],this.fire(a)},reject:function(a){return this.status=2,this._argsCache=a||[],this.error(a)},reset:function(){return this.status=0,this._argsCache=[],this.doneHandlers.length=0,this.failHandlers.length=0,this},disable:function(){this._disalbed=!0},enable:function(){this._disalbed=!1},merge:function(a){b.merge(this.doneHandlers,a.doneHandlers),b.merge(this.failHandlers,a.failHandlers),b.merge(this.observeHandlers,a.observeHandlers);var c=a.subject;b.mix(a,this),a.subject=c},_trace:function(){this.traceStack.unshift(this.subject),this.traceStack.length>this.trace&&this.traceStack.pop()},follow:function(){var a=new d;if(a._prevActor=this,this.status)f(this._resultCache,a);else{var b=this._lastDoneQueue.pop();b&&this._lastDoneQueue.push(function(){return f(b.apply(this,arguments),a)});var c=this._lastFailQueue.pop();c&&this._lastFailQueue.push(function(){return f(c.apply(this,arguments),a)})}return a},end:function(){return this._prevActor},all:function(){var a=e.apply(this,this._when);return a},any:function(){var a=e.apply(this,this._when);return a._count=a._total=1,a},some:function(a){var b=e.apply(this,this._when);return b._count=b._total=a,b}},n=h.prototype=function(a){for(var b in m)a[b]=g(b);return a}({});return n.once=n.wait=n.then,n.on=n.bind,n.off=n.unbind,n.promise=function(a){var b=this.lib[a];return b||(b=this.lib[a]=new d({subject:a,trace:this.trace,traceStack:this.traceStack})),b},n.when=function(){for(var a=[],b=0,c=arguments.length;c>b;b++)a.push(this.promise(arguments[b]));return e.apply(this,a)},i.Promise=d,i.Event=h,i.when=e,i.pipe=f,i.VERSION="2.1.0",i}),define("cardkit/bus",["eventmaster"],function(a){return a()}),define("mo/browsers",[],function(){var a,b,c,d,e,f,g=this.navigator.userAgent.toLowerCase(),h={"360ee":2,"maxthon/3":2,qqbrowser:2,metasr:2,"360se":1,theworld:1,maxthon:1,tencenttraveler:-1};try{var i=/(windows) nt ([\w.]+)/,j=/(mac) os \w+ ([\w.]+)/,k=/(windows phone)[\sos]* ([\w.]+)/,l=/(iphone).*? os ([\w.]+)/,m=/(ipad).*? os ([\w.]+)/,n=/(android)[ ;]([\w.]*)/,o=/(\w+)[ \/]([\w.]+)[ \/]mobile/,p=/(\w+)[ \/]([\w.]+)[ \/]safari/,q=/[ \/]mobile.*safari/,r=/[ \/]mobile/,s=/ touch/,t=/(webkit)[ \/]([\w.]+)/,u=/(opera)(?:.*version)?[ \/]([\w.]+)/,v=/(msie) ([\w.]+)/,w=/(trident).*? rv:([\w.]+)/,x=/(mozilla)(?:.*? rv:([\w.]+))?/,y=/(360se)/,z=/(360ee)/,A=/(360) \w+phone/,B=/(theworld)/,C=/(maxthon\/3)/,D=/(maxthon)/,E=/(tencenttraveler)/,F=/(qqbrowser)/,G=/(baidubrowser)/,H=/(ucbrowser)/,I=/(sogou\w*browser)/,J=/(metasr)/;if(c=l.exec(g)||m.exec(g)||n.exec(g)||j.exec(g)||k.exec(g)||i.exec(g)||[],b=y.exec(g)||z.exec(g)||A.exec(g)||H.exec(g)||B.exec(g)||C.exec(g)||D.exec(g)||E.exec(g)||F.exec(g)||G.exec(g)||I.exec(g)||J.exec(g)||[],a=t.exec(g)||u.exec(g)||v.exec(g)||w.exec(g)||g.indexOf("compatible")<0&&x.exec(g)||[],d=q.exec(g)||(f=r.exec(g)),e=s.exec(g),"trident"===a[1]&&(a[1]="msie"),"webkit"===a[1]){var K=(d?o.exec(g):p.exec(g))||[];a[3]=a[1],a[4]=a[2],a[1]="version"===K[1]&&(("iphone"===c[1]||"ipad"===c[1])&&"mobilesafari"||"android"===c[1]&&"aosp"||"safari")||b[1]||f&&"webview"||K[1],a[2]=K[2]}}catch(L){a=[],b=[]}var M={browser:a[1]||b[1]||"",version:a[2]||"0",engine:a[3],engineversion:a[4]||"0",os:c[1],osversion:c[2]||"0",isMobile:"iphone"===c[1]||"windows phone"===c[1]||"android"===c[1]&&!!d,isTouch:"iphone"===c[1]||"windows phone"===c[1]||"android"===c[1]||"windows"===c[1]&&e,skin:b[1]||"",ua:g};return a[1]&&(M[a[1]]=parseInt(M.version,10)||!0),b[1]&&(M.rank=h[M.skin]||0),M.shell=M.skin,M}),define("cardkit/supports",["mo/browsers"],function(a){var b=document.createElement("div"),c={touch:a.isTouch,overflowScroll:"webkitOverflowScrolling"in document.body.style,JSON:!!window.JSON,dataset:"dataset"in b};return c}),define("mo/template/string",[],function(a,b){b.format=function(a,b){return a.replace(/\{\{(\w+)\}\}/g,function(a,c){return null!=b[c]?b[c]:""})},b.escapeHTML=function(a){a=a||"";var b={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return a.replace(/[<>'"\{\}@]/g,function(a){return b[a]})},b.substr=function(a,b,c){if(!a||"string"!=typeof a)return"";var d=a.substr(0,b).replace(/([^\x00-\xff])/g,"$1 ").substr(0,b).replace(/([^\x00-\xff])\s/g,"$1");return c?c.call(d,d):a.length>d.length?d+"...":d},b.strsize=function(a){return a.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length}}),define("dollar/origin",["mo/lang/es5","mo/lang/mix","mo/lang/type"],function(a,b,c){function d(a,b){if(a){if(a.constructor===d)return a;if("string"!=typeof a){var e=new d;return c.isArraylike(a)&&1!==a.nodeType?M.apply(e,N.call(a)):M.call(e,a),e}return a=a.trim(),I.test(a)?d.createNodes(a):b?d(b).find(a):Q.find(a)}return K(this)?new d:void 0}function e(a){return a}function f(a,b){return function(c){return b&&(c=c[b]),d.matches(c,a)&&this.push(c),c}}function g(a){return function(c){return d(b.unique([void 0,z,null].concat(this._map(c?function(b){var e=b[a];return e&&d.matches(e,c)?e:void 0}:function(b){return b[a]}))).slice(3))}}function h(a,c,e){return function(f,g){e||(g=f);var h=new d;return this.forEach(function(b){var h,i=c?b.parentNode[c]:b;e&&(h=d(f,b.parentNode));do{if(h&&h.indexOf(i)>-1)break;b===i||g&&!d.matches(i,g)||this.push(i)}while(i=i[a])},h),b.unique(h)}}function i(a,b,c,d){if(null===a||void 0===a)return this;var e=J(a);return this.forEach(function(f,g){if(f){var h=e?a.call(this,g,c&&c.call(this,f,d)):a;b.call(this,f,d||h,h)}},this),this}function j(a,b){return function(c){return arguments.length>0?i.call(this,c,a,b):this[0]?b.call(this,this[0]):void 0}}function k(a,b,c){return function(d,e){if("object"!=typeof d)return arguments.length>1?i.call(this,e,a,b,d):this[0]?b.call(this,this[0],d):void 0;if(c)c.call(this,d);else for(var f in d)this.forEach(function(b){b&&a.call(this,b,f,d[f])},this);return this}}function l(a){function b(c,e){if("object"==typeof c)for(var f in c)b.call(this,[f,c[f]]);else e&&(c=d.Event.aliases[c]||c,this.forEach(function(b){b[a+"EventListener"](c,this,!1)},e));return this}return b}function m(a,c,e){return this===d?a=d(a):(e=c,c=a,a=this),"string"==typeof c&&(c=d.Event(c)),b.mix(c,e),a.forEach(G[c.type]&&!c.defaultPrevented?function(a){a[c.type]()}:function(a){"dispatchEvent"in a&&a.dispatchEvent(this)},c),this}function n(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function o(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function p(a,b){return"number"==typeof b&&!H[a]&&b+"px"||b}function q(a){var b=O[a];if(!b){var c=document.createElement(a);z.body.appendChild(c),b=d.getPropertyValue(c,"display"),c.parentNode.removeChild(c),"none"===b&&(b="block"),O[a]=b}return b}function r(a){return function(){var b=this[0];if(b)return K(b)?b["inner"+a]:9===b.nodeType?b.documentElement["offset"+a]:(this.offset()||{})[a.toLowerCase()]}}function s(a){var b="Top",c="page"+(a?"Y":"X")+"Offset";return function(){var a=this[0];if(a)return K(a)?a[c]:a[b]}}function t(a,b,c){switch("SCRIPT"!==b.nodeName.toUpperCase()||b.type&&"text/javascript"!==b.type||y.eval.call(y,b.innerHTML),c){case 1:a.appendChild(b);break;case 2:a.parentNode.insertBefore(b,a);break;case 3:a.insertBefore(b,a.firstChild);break;case 4:a.parentNode.insertBefore(b,a.nextSibling)}}function u(a,b){var c=b?function(b){t(b,this,a)}:function(b){t(this,b,a)};return function(a){return this.forEach(function(a){this.forEach(c,a)},b||"string"!=typeof a||I.test(a)?d(a):d.createNodes(a)),this}}function v(a){return u(a,!0)}function w(a){return u(a)}function x(a){return L.call(a,function(a){return"object"==typeof a?a._slice():a})}var y=this,z=y.document,A="nextElementSibling",B="previousElementSibling",C="firstElementChild",D=["webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","matchesSelector"].map(function(a){return this[a]&&a},z.body).filter(e)[0],E={click:1,mousedown:1,mouseup:1,mousemove:1},F={touchstart:1,touchmove:1,touchend:1,touchcancel:1},G={submit:1,focus:1,blur:1},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=c.isFunction,K=c.isWindow,L=Array.prototype.map,M=Array.prototype.push,N=Array.prototype.slice,O={},P={},Q=d.fn=d.prototype=[];["map","filter","slice","reverse","sort"].forEach(function(a){var b=this["_"+a]=this[a];this[a]=function(){return d(b.apply(this,arguments))}},Q);var R=Q._concat=Q.concat;Q.concat=function(){return d(R.apply(this._slice(),x(arguments)))};var S=Q._splice=Q.splice;return Q.splice=function(){return d(S.apply(this,x(arguments)))},b.mix(Q,{constructor:d,toString:function(){return this.join(",")},find:function(a){var b,c=new d;if(this===Q?b=[z]:c.prevObject=b=this,/^#[\w_]+$/.test(a)){var e=((b[0]||z).getElementById||z.getElementById).call(z,a.substr(1));e&&c.push(e)}else b[1]?b.forEach(function(b){M.apply(this,d._querySelector(b,a))},c):b[0]&&M.apply(c,d._querySelector(b[0],a));return c},eq:function(a){return a=parseInt(a,10),-1===a?this.slice(-1):this.slice(a,a+1)},not:function(a){return this.filter(function(b){return b&&!this(b,a)},d.matches)},matches:function(a){return this.filter(function(b){return b&&this(b,a)},d.matches)},has:function(a){return this.filter(function(b){return b?"string"==typeof a?d(a,b).length:d.contains(b,d(a)[0]):!1})},parent:g("parentNode"),parents:function(a){for(var b=new d,c=this,e=a?f(a,"parentNode"):function(a){return this[this.push(a.parentNode)-1]};c.length;)c=c.map(e,b);return b},closest:function(a){for(var b=new d,c=this,e=f(a,"parentNode");c.length&&!b.length;)c=c.map(e,b);return b.length&&b||this},siblings:h(A,C),next:g(A),nextAll:h(A),nextUntil:h(A,!1,!0),prev:g(B),prevAll:h(B),prevUntil:h(B,!1,!0),children:function(){var a=new d;return this.forEach(function(b){this(a,d(b.children))},b.merge),a},contents:function(){var a=new d;return this.forEach(function(b){this(a,d(b.childNodes))},b.merge),a},is:function(a){return this.some(function(b){return b&&d.matches(b,a)})},hasClass:function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].classList.contains(a))return!0;return!1},addClass:function(a){return i.call(this,a,function(a,b){a.classList.add(b)},function(a){return a.className})},removeClass:function(a){return i.call(this,a,function(a,b){a.classList.remove(b)},function(a){return a.className})},toggleClass:function(a,b){return i.call(this,a,function(a,c){a.classList[void 0===b&&"toggle"||b&&"add"||"remove"](c)},function(a){return a.className})},attr:k(function(a,b,c){a.setAttribute(b,c)},function(a,b){return a.getAttribute(b)}),removeAttr:function(a){return this.forEach(function(a){a.removeAttribute(this)},a),this},prop:k(function(a,b,c){a[b]=c},function(a,b){return a[b]}),removeProp:function(a){return this.forEach(function(a){delete a[this]},a),this},data:k(function(a,b,c){a.dataset[n(b)]=c},function(a,c){var d=a.dataset;if(d)return c?d[n(c)]:b.mix({},d)}),removeData:function(a){return this.forEach(function(a){delete a.dataset[this]},a),this},val:j(function(a,b){a.value=b},function(a){return this.multiple?d("option",this).filter(function(a){return a.selected}).map(function(a){return a.value}):a.value}),empty:function(){return this.forEach(function(a){a.innerHTML=""}),this},html:j(function(a,b){I.test(b)?d(a).empty().append(b):a.innerHTML=b},function(a){return a.innerHTML}),text:j(function(a,b){a.textContent=b},function(a){return a.textContent}),clone:function(){return this.map(function(a){return a.cloneNode(!0)})},css:k(function(a,b,c){var d=o(b);c||0===c?a.style.cssText+=";"+d+":"+p(d,c):a.style.removeProperty(d)},function(a,b){return a.style[n(b)]||d.getPropertyValue(a,b)},function(a){var b,c,d="";for(var e in a)c=a[e],b=o(e),c||0===c?d+=b+":"+p(b,c)+";":this.forEach(function(a){a.style.removeProperty(this)},b);this.forEach(function(a){a.style.cssText+=";"+this},d)}),hide:function(){return this.css("display","none")},show:function(){return this.forEach(function(a){"none"===a.style.display&&(a.style.display=null),"none"===this(a,"display")&&(a.style.display=q(a.nodeName))},d.getPropertyValue),this},offset:function(){if(this[0]){var a=this[0].getBoundingClientRect();return{left:a.left+y.pageXOffset,top:a.top+y.pageYOffset,width:a.width,height:a.height}}},width:r("Width"),height:r("Height"),scrollLeft:s(),scrollTop:s(!0),appendTo:v(1),append:w(1),prependTo:v(3),prepend:w(3),insertBefore:v(2),before:w(2),insertAfter:v(4),after:w(4),replaceAll:function(a){var b=d(a);return this.insertBefore(b),b.remove(),this},replaceWith:function(a){return d(a).replaceAll(this)},wrap:function(a){return i.call(this,a,function(a,b){d(b).insertBefore(a).append(a)})},wrapAll:function(a){return d(a).insertBefore(this.eq(0)).append(this),this},wrapInner:function(a){return i.call(this,a,function(a,b){d(a).contents().wrapAll(b)})},unwrap:function(){return this.parent().forEach(function(a){this(a).children().replaceAll(a)},d),this},remove:function(){return this.forEach(function(a){var b=a.parentNode;b&&b.removeChild(a)}),this},on:l("add"),off:l("remove"),once:function(a,b){var c=function(){return d(this).off(a,c),b.apply(this,arguments)};return d(this).on(a,c)},trigger:m,end:function(){return this.prevObject||new d},each:function(a){for(var b=0,c=this.length;c>b;b++){var d=a.call(this[b],b);if(d===!1)break}return this}}),Q.bind=Q.on,Q.unbind=Q.off,Q.one=Q.once,d.find=d,d._querySelector=function(a,b){try{return N.call(a.querySelectorAll(b))}catch(c){return[]}},d.matches=d.matchesSelector=function(a,b){return a&&1===a.nodeType&&a[D](b)},d.contains=function(a,b){return a!==b&&a.contains(b)},d.createNodes=function(a,b){var c=(I.exec(a)||[])[0]||a,e=P[c];e||(e=P[c]="tr"===c&&document.createElement("tbody")||("tbody"===c||"thead"===c||"tfoot"===c)&&document.createElement("table")||("td"===c||"th"===c)&&document.createElement("tr")||document.createElement("div")),e.innerHTML=a;var f=new d;if(M.apply(f,N.call(e.childNodes)),f.forEach(function(a){this.removeChild(a)},e),b)for(var g in b)f.attr(g,b[g]);return f},d.getStyles=y.getComputedStyle&&function(a){return y.getComputedStyle(a,null)}||document.documentElement.currentStyle&&function(a){return a.currentStyle},d.getPropertyValue=function(a,b){var c=d.getStyles(a);return c.getPropertyValue&&c.getPropertyValue(b)||c[b]},d.Event=function(a,c){var e=d.Event.aliases[a]||a,f=!0,g=F[a],h=document.createEvent(g&&"TouchEvent"||E[a]&&"MouseEvents"||"Events");return c&&("bubbles"in c&&(f=!!c.bubbles,delete c.bubbles),b.mix(h,c)),h[g&&"initTouchEvent"||"initEvent"](e,f,!0),h},d.Event.aliases={},d.trigger=m,d.camelize=n,d.dasherize=o,d._vAccess=j,d._kvAccess=k,d._nodesAccess=i,d}),define("dollar",["dollar/origin"],function(a){return a}),define("mo/lang/oop",["mo/lang/es5","mo/lang/mix"],function(a,b,c,d){function e(a,b,c){a.apply(b,c)}var f=b.mix;d.construct=function(a,b,c){function d(){var b=a.__constructor,c=a.__superMethod;a.__constructor=j,a.__superMethod=j.__superMethod,e.prototype=a.prototype;var f=new e(a,this,arguments);for(var g in f)this[g]||(this[g]=h[g]=f[g]);a.__constructor=b,a.__superMethod=c,this.superConstructor=d}b&&!Array.isArray(b)&&(c=b,b=null),c||(c=function(){this.superConstructor.apply(this,arguments)}),a.__constructor||(a.__constructor=a,a.__supr=a.prototype);var g=Object.create(a.prototype),h=Object.create(a.prototype),i=h;h.__super=a.__supr;var j=function(){return this.superMethod=j.__superMethod,this.superConstructor=d,this.constructor=j.__constructor,this.superClass=h,c.apply(this,arguments)};return j.__supr=h,j.__constructor=j,j.__superMethod=function(a,b){var c=i;i=c.__super;var d=c[a].apply(this,b);return i=c,d},j.prototype=g,b&&(b=f.apply(this,b),f(g,b),f(h,b)),j}}),define("mo/lang",["mo/lang/es5","mo/lang/type","mo/lang/mix","mo/lang/struct","mo/lang/oop"],function(a,b,c,d,e,f,g){var h=this,i=h.window;c.mix(g,b,c,d,e),g.ns=function(a,b,c){for(var d,e=c||i,f=a.split(".").reverse();(d=f.pop())&&f.length>0;){if("undefined"==typeof e[d])e[d]={};else if("object"!=typeof e[d])return!1;e=e[d]}return"undefined"!=typeof b&&(e[d]=b),e[d]}}),define("moui/overlay",["mo/lang","dollar","eventmaster","mo/template/string"],function(a,b,c,d){function e(a){this.init(a),this.set(this._config)}function f(a){return new f.Overlay(a)}var g=b("body"),h="mouiOverlay",i='<div id="{{id}}" class="{{cname}}">                <header><h2></h2></header>                <article></article>            </div>',j='<span class="loading"><i>.</i><i>.</i><i>.</i></span>',k="Loading...",l=0,m={title:"",content:"",className:"moui-overlay",parent:g,openDelay:50,closeDelay:0,event:{}};return e.prototype={_ns:h,_template:i,_defaults:m,init:function(e){return this.id=this._ns+ ++l,this.event=c(),this._config=a.config({},e,this._defaults),g.append(d.format(this._template,{id:this.id,cname:this._config.className})),this._node=b("#"+this.id),this._header=this._node.find("header").eq(0),this._title=this._header.find("h1"),this._content=this._node.find("article").eq(0),this},set:function(b){return b?(a.config(this._config,b,this._defaults),"string"==typeof b.title&&this.setTitle(b.title),void 0!==b.content&&this.setContent(b.content),void 0!==b.className&&(this._node[0].className=b.className),this):this},setTitle:function(a){return this._title.html(a),this},setContent:function(a){return this._content.html(a),this},insertNode:function(a){this._node.appendTo(a||this._config.parent)},showLoading:function(a){return this._node.addClass("loading"),this._title.html((a||k)+j),this},hideLoading:function(){return this._node.removeClass("loading"),this._title.html(this._config.title),this},open:function(){if(clearTimeout(this._actimer),this.isOpened)return this.cancelClose(),this;var a=this,b=arguments;return this.prepareOpen.apply(a,b),this._actimer=setTimeout(function(){a.applyOpen.apply(a,b)},this._config.openDelay),this},close:function(){if(clearTimeout(this._actimer),!this.isOpened)return this.cancelOpen(),this;var a=this,b=arguments;return this.prepareClose.apply(a,b),this._actimer=setTimeout(function(){a.applyClose.apply(a,b)},this._config.closeDelay),this},prepareOpen:function(){this.insertNode(),this._node.addClass("rendered"),this.event.fire("prepareOpen",[this])
},prepareClose:function(){this.event.fire("prepareClose",[this]),this._node.removeClass("active")},cancelOpen:function(){this._node.removeClass("rendered"),this.event.fire("cancelOpen",[this])},cancelClose:function(){this._node.addClass("active"),this.event.fire("cancelClose",[this])},applyOpen:function(){this.isOpened=!0,this._node.addClass("active"),this.event.fire("open",[this])},applyClose:function(){this.isOpened=!1,this.hideLoading(),this.beforeClose(),this._node.removeClass("rendered"),this.event.fire("close",[this])},beforeClose:function(){},destroy:function(){return this._node.remove(),this.event.fire("destroy",[this]),this}},f.Overlay=e,f}),define("mo/template/micro",["mo/lang","mo/template/string"],function(a,b,c,d){function e(b,c,g){var h,i=d.tplSettings,j=g?"#"+g:"";if(/[\t\r\n% ]/.test(b)){var k=new Function(g||"obj","api","var __p=[];"+(g?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(g||"obj")+");__p.push('"+b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.comment,"").replace(i.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(i.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(g?"":"}")+"return __p.join('');");h=function(b,c){return k.call(this,b,a.mix({},d.tplHelpers,c))}}else if(h=i._cache[b+j],!h){var l=f.getElementById(b);l&&(h=i._cache[b+j]=e(l.innerHTML,!1,g))}return h?c?h(c):h:""}var f=this.document;d.tplSettings={_cache:{},comment:/\{\*([\s\S]+?)\*\}/g,evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g},d.tplHelpers={mix:a.mix,escapeHTML:b.escapeHTML,substr:b.substr,include:e,_has:function(b){return function(c){return a.ns(c,void 0,b)}}},d.convertTpl=e,d.reloadTpl=function(a){delete d.tplSettings._cache[a]}}),define("mo/template",["mo/lang","mo/template/string","mo/template/micro"],function(a,b,c,d,e){a.mix(e,b,c),e.str2html=function(a){var b=document.createElement("div");b.innerHTML=a;var c=b.firstChild;if(1==b.childNodes.length)return c;var d=document.createDocumentFragment();do d.appendChild(c);while(c=b.firstChild);return d}}),define("moui/growl",["dollar","mo/lang","mo/template","moui/overlay"],function(a,b,c,d){function e(a){a._exptimer=setTimeout(function(){a.close()},a._config.expires)}function f(a){return new f.Growl(a)}var g="mouiGrowl",h='<div id="{{id}}" class="moui-growl">                <header><h2></h2></header>                <article></article>            </div>',i="corner-",j={className:"moui-growl",closeDelay:300,corner:"center",expires:1400,keepalive:!1},k=b.construct(d.Overlay);return b.mix(k.prototype,{_ns:g,_template:h,_defaults:b.mix({},k.prototype._defaults,j),set:function(a){var b=this;return b.superMethod("set",[a]),a.corner&&a.corner!==b._currentCorner&&(b._currentCorner&&b._node.removeClass(i+b._currentCorner),b._node.addClass(i+a.corner),b._currentCorner=a.corner),void 0!==a.expires&&(clearTimeout(b._exptimer),b.isOpened&&e(b)),b},applyOpen:function(){return clearTimeout(this._exptimer),-1!=this._config.expires&&e(this),this.superMethod("applyOpen",arguments)},applyClose:function(){this.isOpened=!1,this._node.removeClass("rendered"),this.event.fire("close",[this]),this._config.keepalive||this.destroy()}}),f.Growl=k,f}),define("cardkit/ui/growl",["mo/lang","dollar","moui/growl"],function(a,b,c){function d(h,i){var j,k={corner:"bottom"};h.nodeName?(h=b(h),j=h[0][e],j&&g[j]&&g[j].close(),j=h[0][e]=++f,i=a.mix(k,h.data(),i)):i=a.mix(k,h),i.className="ck-growl",a.mix(i,d.forceOptions);var l=c(i);return j&&(g[j]=l),l}var e="_ckGrowlUid",f=0,g={};return d.forceOptions={},d}),define("mo/network/ajax",["mo/browsers"],function(a,b,c){c.params=function(a){var b=[];if(a.constructor==Array)for(var c=0;c<a.length;c++)b.push(a[c].name+"="+encodeURIComponent(a[c].value));else for(var d in a)b.push(d+"="+encodeURIComponent(a[d]));return b.join("&").replace(/%20/g,"+")},c.parseJSON=function(a){a=a.replace(/^[\w(<\/*!\s]*?\{/,"{").replace(/[^\}]*$/,"");try{a=window.JSON&&window.JSON.parse?window.JSON.parse(a):window.eval(a)}catch(b){a=!1}return a},c.ajax=function(b){function d(b){try{return!b.status&&"file:"==location.protocol||b.status>=200&&b.status<300||304==b.status||1223==b.status||a.safari&&!b.status}catch(c){}return!1}function e(a,b){var d=a.getResponseHeader("content-type"),e="xml"==b||!b&&d&&d.indexOf("xml")>=0,f=e?a.responseXML:a.responseText;if(e&&"parsererror"==f.documentElement.tagName)throw"parsererror";return"script"==b&&(window.execScript||function(a){window.eval.call(window,a)})(f),"json"==b&&(f=c.parseJSON(f)),f}var f={type:b.type||"GET",url:b.url||"",data:b.data||null,dataType:b.dataType,contentType:b.contentType===!1?!1:b.contentType||"application/x-www-form-urlencoded",username:b.username||null,password:b.password||null,timeout:b.timeout||0,processData:void 0===b.processData?!0:b.processData,beforeSend:b.beforeSend||function(){},complete:b.complete||function(){},handleError:b.handleError||function(){},success:b.success||function(){},xhrFields:b.xhrFields||{},headers:b.headers||{},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}};f.data&&f.processData&&"string"!=typeof f.data&&(f.data=this.params(f.data)),f.data&&"get"==f.type.toLowerCase()&&(f.url+=(f.url.match(/\?/)?"&":"?")+f.data,f.data=null);var g,h,i=!1,j=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;j.open(f.type,f.url,!0,f.username,f.password);try{var k;if(f.xhrFields)for(k in f.xhrFields)j[k]=f.xhrFields[k];f.data&&f.contentType!==!1&&j.setRequestHeader("Content-Type",f.contentType),j.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.setRequestHeader("Accept",b.dataType&&f.accepts[b.dataType]?f.accepts[b.dataType]+", */*":f.accepts._default);for(k in f.headers)j.setRequestHeader(k,f.headers[k])}catch(l){}f.beforeSend&&f.beforeSend(j);var m=function(a){if(!i&&j&&(4==j.readyState||"timeout"==a)){if(i=!0,n&&(clearInterval(n),n=null),g="timeout"==a&&"timeout"||!d(j)&&"error"||"success","success"==g){try{h=e(j,f.dataType)}catch(b){g="parsererror"}f.success(h,g)}else f.handleError(j,g);f.complete(j,g),j=null}},n=setInterval(m,13);return f.timeout>0&&setTimeout(function(){j&&(j.abort(),i||m("timeout"))},f.timeout),j.send(f.data),j}}),define("mo/network",["mo/lang","mo/network/ajax"],function(a,b){var c=this,d=1;b.getScript=function(b,c){var d=a.isWindow(this)?this.document:document,e=d.createElement("script");e.type="text/javascript",e.async="async",c?a.isFunction(c)&&(c={callback:c}):c={},c.charset&&(e.charset=c.charset),e.src=b;var f=d.getElementsByTagName("head")[0];e.onload=e.onreadystatechange=function(a,b){(b||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,f&&e.parentNode&&f.removeChild(e),e=void 0,!b&&c.callback&&c.callback())},f.insertBefore(e,f.firstChild)},b.getStyle=function(a){var b=this.document||document,c=b.createElement("link");c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a);var d=b.getElementsByTagName("head")[0];d.appendChild(c)};var e=/https?\:\/\/(.+?)\//;return b.getJSON=function(f,g,h,i){var j=f.match(e);if((!g||a.isFunction(g))&&(i=h,h=g,g={}),h&&!(i&&i.isScript||j&&j[1]!==c.location.host))return b.ajax({url:f,data:g,success:h,error:i&&i.error,dataType:"json"}),!0;i=a.mix({charset:"utf-8",callback:"__oz_jsonp"+ ++d},i||{}),i.random&&(g[i.random]=+new Date);var k=i.callbackName||"jsoncallback";g[k]=i.callback,f=[f,/\?/.test(f)?"&":"?",b.params(g)].join(""),h&&a.ns(i.callback,h),delete i.callback,b.getScript(f,i)},b.getRequest=function(a,c){var d=new Image;d.onload=function(){d=null},d.src=c?[a,/\?/.test(a)?"&":"?","string"==typeof c?c:b.params(c)].join(""):a},b.httpParam=b.params,b}),define("cardkit/ui/util",["mo/lang","dollar","mo/network"],function(a,b,c){var d={flag:"_ckViewUid",forceOptions:{},defaultOptions:{},config:function(){},extend:function(){}},e={singleton:function(c){function e(d,h){var i=d;"object"==typeof d?(d=b(d),i=d[0][c.flag]):d=!1;var j=i&&g[i];return j?h&&c.config(j,h):(d&&(i=d[0][c.flag]=++f),h=a.merge(a.mix(h||{},e.forceOptions,c.forceOptions),c.defaultOptions,e.defaultOptions),j=g[i]=c.factory(d,h),c.extend(j,d)),j}var f=0,g={};return c=a.merge(c,d),e.forceOptions={},e.defaultOptions={},e.gc=function(a){for(var b in g)a(g[b])&&delete g[b]},e},request:function(a){var b=a.config,d=b.jsonUrl||b.url;if(d){var e;d=d.replace(/\?(.+)$/,function(a,b){return e=b.replace(/#.*/,""),""}),c.ajax({url:d,data:e,type:b.method||"post",dataType:b.jsonUrl?"json":"text",beforeSend:a.before,handleError:a.callback,success:a.callback})}else a.callback()}};return e}),define("moui/control",["mo/lang","dollar","eventmaster"],function(a,b,c){function d(a,b){this.init(a,b),this.set(this._config)}function e(a){if(!a.innerHTML){if(a.innerHTML=" ",!a.innerHTML)return!0;a.innerHTML=""}return!1}function f(a,b){return new f.Control(a,b)}var g={field:null,label:null,numField:null,numStep:1,enableVal:1,disableVal:0,enableLabel:"",disableLabel:"",loadingLabel:"Loading..."};return d.prototype={_defaults:g,init:function(d,f){this.event=c();var g=this._node=b(d);g.hasClass("enabled")&&(this.isEnabled=!0),this._numField=[],f=a.mix({field:g,label:g},this.data(),f),this.setNodes(f),this._label[0]&&(this._isLabelClose=e(this._label[0])),this._numField[0]&&(this._isNumFieldClose=e(this._numField[0])),void 0===f.enableVal&&(f.enableVal=this.val()),void 0===f.enableLabel&&(f.enableLabel=this.label()),void 0===f.disableVal&&(f.disableVal=this.val()),void 0===f.disableLabel&&(f.disableLabel=this.label()),this._disableAttrs={},this._enableAttrs={},a.each(f,function(a,b){var c;(c=/^enableAttr([A-Z]\w*)/.exec(b))?(c=c[1].toLowerCase(),this._disableAttrs[c]=g.attr(c),this._enableAttrs[c]||(this._enableAttrs[c]=a)):(c=/^disableAttr([A-Z]\w*)/.exec(b))&&(c=c[1].toLowerCase(),this._enableAttrs[c]=g.attr(c),this._disableAttrs[c]||(this._disableAttrs[c]=a))},this),this._config=a.config({},f,this._defaults)},set:function(b){return b?(a.mix(this._config,b),this.setNodes(b),this):this},setNodes:function(a){return void 0!==a.field&&(this._field=a.field?b(a.field,"string"==typeof a.field&&this._node).eq(0):[]),void 0!==a.label&&(this._label=a.label?b(a.label,"string"==typeof a.label&&this._node).eq(0):[]),void 0!==a.numField&&(this._numField=a.numField?b(a.numField,"string"==typeof a.numField&&this._node).eq(0):[]),this},val:function(){var a=this._field;if(a[0]){var b,c=[].slice.call(arguments);return"A"===a[0].nodeName?(c.unshift("href"),b=a.attr.apply(a,c),b===a?a[0].href:b):(b=a.val.apply(a,c),b===a?a.val():b)}},label:function(){var a=this._label;if(a[0]){var b=[].slice.call(arguments),c=this._isLabelClose?"val":"html",d=a[c].apply(a,b);return d===a?a[c]():d}},num:function(a){var b=this._numField;if(b[0]){var c=[],d=this._isNumFieldClose?"val":"html";null!=a&&c.push(parseFloat(b[d]())+a);var e=b[d].apply(b,c);return e===b?b[d]():e}},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this.label(this._config.loadingLabel),this},hideLoading:function(){return this._node.removeClass("loading"),this},toggle:function(){return this.isEnabled?this.disable():this.enable(),this},enable:function(){return this.isEnabled?this:(this.isEnabled=!0,this._node.addClass("enabled"),this.val(this._config.enableVal),this.num(this._config.numStep),this._config.enableLabel&&this.label(this._config.enableLabel),a.each(this._enableAttrs,function(a,b){this._node.attr(b,a)},this),this.event.reset("disable").resolve("enable",[this]),this)},disable:function(){return this.isEnabled?(this.isEnabled=!1,this._node.removeClass("enabled"),this.val(this._config.disableVal),this.num(0-this._config.numStep),this._config.disableLabel&&this.label(this._config.disableLabel),a.each(this._disableAttrs,function(a,b){this._node.attr(b,a)},this),this.event.reset("enable").resolve("disable",[this]),this):this}},f.Control=d,f}),define("moui/picker",["mo/lang","dollar","eventmaster","moui/control"],function(a,b,c,d){function e(a,b){this.init(a,b),this.set(this._config)}function f(a){h.call(this,"enable",a),this.event.fire("change",[this,a])}function g(a){h.call(this,"disable",a),this.event.fire("change",[this,a])}function h(a,b){if("enable"===a)if(this._config.ignoreStatus||(this._unwatchEnable(b),this._watchDisable(b)),this._config.multiselect)this._allSelected.push(b);else{var c=this._lastSelected;this._lastSelected=b,c&&(this._unwatchDisable(c),c.disable(),this._watchEnable(c))}else if(this._config.ignoreStatus||(this._unwatchDisable(b),this._watchEnable(b)),this._config.multiselect){var d=this._allSelected.indexOf(b);-1!==d&&this._allSelected.splice(d,1)}else{if(b&&this._lastSelected!==b)return;this._lastSelected=null}this._field[0]&&this._field.val(this.val())}function i(a,b){return new i.Picker(a,b)}var j="_moPickerOid",k={field:'input[type="hidden"]',options:".option",ignoreRepeat:!1,ignoreStatus:!1,multiselect:!1};return e.prototype={_defaults:k,init:function(d,e){return this._uoid=0,this.event=c(),this._node=b(d),this._options=[],e=a.mix({},this.data(),e),this._config=a.config({},e,this._defaults),this},set:function(c){return c?(a.mix(this._config,c),void 0!==c.multiselect&&(c.multiselect?this._allSelected||(this._allSelected=[]):(this._allSelected=null,this._lastSelected=null)),void 0!==c.field&&(this._field=c.field?b(c.field,"string"==typeof c.field&&this._node).eq(0):[]),c.options&&(this._options.forEach(this.removeOption,this),b(c.options,this._node).forEach(this.addOption,this)),this):this},_watchEnable:function(a){a._pickerEnableWatcher=f.bind(this),a.event.bind("enable",a._pickerEnableWatcher)},_watchDisable:function(a){a._pickerDisableWatcher=g.bind(this),a.event.bind("disable",a._pickerDisableWatcher)},_unwatchEnable:function(a){a.event.unbind("enable",a._pickerEnableWatcher)},_unwatchDisable:function(a){a.event.unbind("disable",a._pickerDisableWatcher)},addOption:function(a){if(a=b(a)[0],a[j]||1!==a.nodeType)return this;a[j]=++this._uoid;var c=d(a,{enableVal:a.value,label:!1});return this._watchEnable(c),this._options.push(c),c.isEnabled&&h.call(this,"enable",c),this},removeOption:function(a){var b;return a.constructor===d.Control?(b=a,a=a._node[0]):b=this.getOption(a),this.unselect(a),b&&this._options.splice(this._options.indexOf(b),1),this},getOption:function(a){if("number"==typeof a)a=this._options[a];else if("string"==typeof a)a=this._options.filter(function(b){return b.val()===a})[0];else{var c=b(a)[0][j];if(!c)return null;a=this._options.filter(function(a){return a._node[0][j]===c})[0]}return a},getOptions:function(){return this._options},getSelected:function(){return this._config.multiselect?this._allSelected||[]:this._lastSelected?[this._lastSelected]:[]},getSelectedData:function(){var a=this.getSelected().map(function(a){return a.data()});return this._config.multiselect?a:a[0]},val:function(){var a=this.getSelected().map(function(a){return a.val()});return this._config.multiselect?a:a[0]},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this},hideLoading:function(){return this._node.removeClass("loading"),this},undo:function(){return this._lastActionTarget&&this._lastActionTarget.toggle(),this},selectAll:function(){return this._config.multiselect&&(this._options.forEach(function(a){a.isEnabled||(this._unwatchEnable(a),a.enable(),h.call(this,"enable",a))},this),this.event.fire("change",[this,this._options[0]])),this._lastActionTarget=null,this},unselectAll:function(){return this._config.multiselect?(this._options.forEach(function(a){a.isEnabled&&(this._unwatchDisable(a),a.disable(),h.call(this,"disable",a))},this),this._lastActionTarget=null,this.event.fire("change",[this,this._options[0]])):this.undo(),this},selectInvert:function(){return this._config.multiselect&&(this._options.forEach(function(a){a.isEnabled?(this._unwatchDisable(a),a.toggle(),h.call(this,"disable",a)):(this._unwatchEnable(a),a.toggle(),h.call(this,"enable",a))},this),this.event.fire("change",[this,this._options[0]])),this._lastActionTarget=null,this},select:function(a){var b=this.getOption(a);if(b)if(!this._config.multiselect&&this._config.ignoreStatus)h.call(this,"enable",b),this.event.fire("change",[this,b]);else{if((this._config.multiselect&&-1!==this._allSelected.indexOf(b)||!this._config.multiselect&&this._lastSelected===b)&&!this._config.ignoreRepeat)return this.unselect(a);this._lastActionTarget=b.enable()}return this},unselect:function(a){if(a){var b=this.getOption(a);b&&(this._lastActionTarget=b.disable())}else this.unselectAll();return this}},i.Picker=e,i}),define("moui/actionview",["dollar","mo/lang","mo/template/string","moui/overlay","moui/picker"],function(a,b,c,d,e){function f(a){return new f.ActionView(a)}var g=b.mix,h="mouiActionView",i='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <div class="content">                        <header><h1></h1></header>                        <div class="desc"></div>                        <article></article>                    </div>                </div>                <footer>                    <span class="cancel"></span>                    <span class="confirm" data-is-default="true"></span>                </footer>            </div>',j={className:"moui-actionview",closeDelay:500,confirmText:"OK",cancelText:"Cancel",options:null,multiselect:!1},k=b.construct(d.Overlay);return g(k.prototype,{_ns:h,_template:i,_defaults:b.mix({},k.prototype._defaults,j),init:function(a){return this.superMethod("init",[a]),this._wrapper=this._node.find(".wrapper").eq(0),this._actionsWrapper=this._content,this._content=this._wrapper.find(".desc").eq(0),this._footer=this._node.find("footer").eq(-1),this._confirmBtn=this._footer.find(".confirm"),this._cancelBtn=this._footer.find(".cancel"),this},set:function(b){if(!b)return this;if(this.superMethod("set",[b]),void 0!==b.options){this._actionsWrapper.empty();var c=b.options?a(b.options).clone():[];c.length?(this._actionsWrapper.append(c),this._picker=e(this._actionsWrapper,{options:c,multiselect:this._config.multiselect,ignoreStatus:!this._config.multiselect}),this._node.removeClass("confirm-kind")):this._node.addClass("confirm-kind")}return void 0!==b.multiselect&&(b.multiselect?this._footer.addClass("multi"):this._footer.removeClass("multi")),b.confirmText&&this._confirmBtn.html(b.confirmText),b.cancelText&&this._cancelBtn.html(b.cancelText),this},val:function(){return this._picker?this._picker.val():void 0},data:function(){return this._picker?this._picker.getSelectedData():void 0},confirm:function(){return this.event.fire("confirm",[this,this._picker]),this.ok()},cancel:function(){return this.event.fire("cancel",[this,this.picker]),this.ok()},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){if(!this._config.multiselect&&this._picker){var a=this;this._picker.event.once("change",function(){a.confirm()})}return this.superMethod("applyOpen",arguments)},applyClose:function(){return!this._config.multiselect&&this._picker&&this._picker.event.reset(),this.superMethod("applyClose",arguments)}}),k.prototype.done=k.prototype.ok,["select","unselect","undo","selectAll","unselectAll","selectInvert"].forEach(function(a){this[a]=function(){return this._picker[a].apply(this._picker,arguments)}},k.prototype),f.ActionView=k,f}),define("cardkit/ui/actionview",["moui/actionview","cardkit/bus","cardkit/ui/util"],function(a,b,c){var d=c.singleton({flag:"_ckActionViewUid",forceOptions:{className:"ck-actionview"},factory:function(b,c){return a(c)},config:function(a,b){a.set(b)},extend:function(a,c){var e={component:a};a.event.bind("prepareOpen",function(a){d.current=a}).bind("cancelOpen",function(){d.current=null}).bind("open",function(a){b.fire("actionView:open",[a]),c&&c.trigger("actionView:open",e)}).bind("close",function(){d.current=null,b.unbind("actionView:confirmOnThis"),b.fire("actionView:close",[a]),c&&c.trigger("actionView:close",e)}).bind("cancel",function(){b.fire("actionView:cancel",[a]),c&&c.trigger("actionView:cancel",e)}).bind("confirm",function(a,d){if(b.fire("actionView:confirmOnThis",[a]).fire("actionView:confirm",[a]),c&&c.trigger("actionView:confirm",e),d&&d._lastSelected){var f=d._lastSelected._node[0];"A"===f.nodeName&&b.fire("actionView:jump",[a,f.href,f.target])}})}});return d}),define("moui/modalview",["dollar","mo/lang","mo/template/string","moui/overlay"],function(a,b,c,d){function e(a){return new e.ModalView(a)}var f=b.mix,g="mouiModalView",h='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <header>                        <button type="button" class="confirm"                             data-fluid="true" data-is-default="true"></button>                        <button type="button" class="cancel"                             data-fluid="true"></button>                        <h1></h1>                    </header>                    <article><div class="content"></div></article>                </div>            </div>',i={className:"moui-modalview",iframe:!1,hideConfirm:!1,confirmText:"OK",cancelText:"Cancel"},j=b.construct(d.Overlay);return f(j.prototype,{_ns:g,_template:h,_defaults:b.mix({},j.prototype._defaults,i),init:function(a){return this.superMethod("init",[a]),this._wrapper=this._node.find(".wrapper").eq(0),this._contentWrapper=this._wrapper.find("article").eq(0),this._content=this._contentWrapper.find(".content").eq(0),this._confirmBtn=this._header.find(".confirm"),this._cancelBtn=this._header.find(".cancel"),this},set:function(a){if(!a)return this;var b=this;return b.superMethod("set",[a]),void 0!==a.content?b._config.iframe=null:a.iframe&&b._setIframeContent(a),void 0!==a.hideConfirm&&(a.hideConfirm?this._confirmBtn.hide():this._confirmBtn.show()),a.confirmText&&this._confirmBtn.html(a.confirmText),a.cancelText&&this._cancelBtn.html(a.cancelText),b},setContent:function(a){return this.event.fire("willUpdateContent",[this]),this.superMethod("setContent",[a]),this.event.fire("updateContent",[this]),this},_setIframeContent:function(){var b=this;this._clearIframeContent(),b.setContent(""),b.showLoading(),b._iframeContent=a('<iframe class="moui-modalview-iframebd" frameborder="0" scrolling="no" style="visibility:hidden;width:100%;"></iframe>').bind("load",function(){try{if(!this.contentWindow.document.body.innerHTML)return;if(b._iframeWindow=a(this.contentWindow),!b._iframeContent&&b._iframeWindow[0].location.href!==b._config.iframe)return;b._iframeContent[0].style.visibility="",b.event.resolve("frameOnload",[b]),b.hideLoading()}catch(c){}}).appendTo(b._content)},_clearIframeContent:function(){this._iframeContent&&(this._iframeContent.remove(),this._iframeContent=null),this.event.reset("frameOnload")},confirm:function(){return this.event.fire("confirm",[this]),this},cancel:function(){return this.event.fire("cancel",[this]),this.ok(),this},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){var a=this.superMethod("applyOpen",arguments);return this._config.iframe&&this._iframeContent.attr("src",this._config.iframe),a},applyClose:function(){return this._clearIframeContent(),this._contentWrapper[0].scrollTop=0,this.superMethod("applyClose",arguments)},beforeClose:function(){this.setContent("")}}),j.prototype.done=j.prototype.ok,e.ModalView=j,e}),define("cardkit/ui/modalview",["mo/lang","dollar","mo/network","moui/modalview"],function(a,b,c,d){function e(a){return f||(f=new e.ModalView(a)),f}var f,g,h={className:"ck-modalview",openDelay:400,closeDelay:400,oldStylePage:!1,contentFilter:!1},i={"text/darkscript":1,"text/cardscript":1,"text/jscode":1},j=a.construct(d.ModalView);return a.mix(j.prototype,{_defaults:a.mix({},j.prototype._defaults,h),init:function(){return this.superMethod("init",arguments),this.event.bind("confirm",function(a){a.event.fire("confirmOnThis",arguments)}).bind("close",function(a){g=0,a.event.unbind("confirmOnThis")}),this},set:function(a){function d(b){f===g&&(a.jsonUrl&&(b=b.html),e.setContent(b),e.hideLoading())}if(!a)return this;var e=this,f=+new Date,h=a.jsonUrl||a.url;return h&&(a.content="",e.showLoading(),g=f,a.jsonUrl?c.getJSON(h,d):a.url&&c.ajax({url:h,success:d})),a.iframeUrl&&(a.iframe=a.iframeUrl),a.source&&(a.content=b("."+a.source).map(function(a){var c=b(a).attr("type");return i[c]?'<script type="text/darkscript">'+a.innerHTML+"</script>":a.innerHTML}).join("")),this.superMethod("set",[a])},setContent:function(a){if(a){var b=this._config.contentFilter;b&&(a=(new RegExp(b).exec(a)||[])[1]);var c=this._config.oldStylePage,d=c?'<div class="ckd-page-card ck-modal-page" data-cfg-deck="modalview" id="ckPage-'+this.id+'">':'<ck-card type="page" data-cfg-deck="modalview" id="ckPageOld-'+this.id+'">'+this.id+'" class="ck-modal-page">',e=c?"</ck-card>":"</div>";a=d+a+e}return this.superMethod("setContent",[a])},pageNode:function(){return this._content.find(".ck-modal-page")}}),e.ModalView=j,e}),define("moui/ranger",["mo/lang","dollar","eventmaster"],function(a,b,c){function d(a,b){this.init(a,b),this.set(this._config)}function e(a,b){return new e.Ranger(a,b)}var f={max:100,min:0,step:1};return d.prototype={_defaults:f,init:function(d,e){this.event=c();var f=this._node=b(d);return e=a.mix({max:f.attr("max")||void 0,min:f.attr("min")||void 0,step:f.attr("step")||void 0},this.data(),e),this._config=a.config({},e,this._defaults),this.val(f.val()),this},set:function(b){return b?(a.config(this._config,b,this._defaults),this):this},data:function(){return this._node.data()},val:function(a){if(void 0!==a){var b=this._config.step.toString().replace(/.*\./,"").length;a=Math.floor(a*Math.pow(10,b))/Math.pow(10,b),this._value=a,this.event.fire("change",[this.val(),this])}return this._value},progress:function(a){if(void 0!==a){var b=this._config;if(0==a)this.val(b.min);else if(1==a)this.val(b.max);else{var c=(b.max-b.min)*a+parseFloat(b.min);c=Math.round(c/b.step)*b.step,this.val(c)}}return this.val()},changeStart:function(){this._originValue=this._value,this.event.fire("changeStart",[this])},changeEnd:function(){this.event.fire("changeEnd",[this]),this._originValue!=this._value&&this.event.fire("changed",[this])}},e.Ranger=d,e}),define("cardkit/ui/ranger",["moui/ranger","cardkit/bus","cardkit/ui/growl","cardkit/ui/util"],function(a,b,c,d){return d.singleton({flag:"_ckRangerUid",factory:function(b,c){return a(b,c)},config:function(a,b){a.set(b)},extend:function(a,d){a.notify=c({parent:d.parent(),corner:"stick"}),a.event.bind("change",function(b){a.notify.set({content:b}).open()}).bind("changed",function(){var c=d.trigger("ranger:changed",{component:a}).data("url");b.fire("ranger:changed",[a,c])}).bind("changeEnd",function(){a.notify.close()})}})}),define("cardkit/ui/picker",["mo/lang","moui/picker","cardkit/ui/util"],function(a,b,c){return c.singleton({flag:"_ckPickerUid",factory:function(a,c){return b(a,c)},defaultOptions:{options:".ck-option"},config:function(a,b){a.set(b)},extend:function(a,b){a.event.bind("change",function(a,d){var e,f=d.data(),g={component:a};a.showLoading(),e=d.isEnabled?{method:f.enableMethod,url:f.enableUrl,jsonUrl:f.enableJsonUrl}:{method:f.disableMethod,url:f.disableUrl,jsonUrl:f.disableJsonUrl},c.request({config:e,callback:function(c,d){a.hideLoading(),"success"===d&&(a.responseData=c,b.trigger("picker:response",g))}}),b.trigger("picker:change",g)})}})}),define("cardkit/ui/control",["mo/lang","moui/control","cardkit/ui/util"],function(a,b,c){var d={disableRequest:!1,enableUrl:"",enableJsonUrl:"",enableMethod:"post",disableUrl:"",disableJsonUrl:"",disableMethod:"post"},e=a.construct(b.Control);a.mix(e.prototype,{_defaults:a.mix({},e.prototype._defaults,d),enable:function(){var a=this._config;return this.request({method:a.enableMethod,url:a.enableUrl,jsonUrl:a.enableJsonUrl},function(){this.superClass.enable.call(this)})},disable:function(){var a=this._config;return this.request({method:a.disableMethod,url:a.disableUrl,jsonUrl:a.disableJsonUrl},function(){this.superClass.disable.call(this)})},request:function(a,b){var d=this,e=function(a,c){"success"===c&&(d.responseData=a),d.hideLoading(),b.call(d)};return this._config.disableRequest?e():c.request({config:a,before:function(){d.showLoading()},callback:e}),this}});var f=c.singleton({flag:"_ckControlUid",factory:function(a,b){return new f.Control(a,b)},config:function(a,b){a.set(b)},extend:function(a,b){a.event.bind("enable",function(a){b.trigger("control:enable",{component:a})}).bind("disable",function(a){b.trigger("control:disable",{component:a})})}});return f.Control=e,f}),define("momo/base",["mo/lang/es5","mo/lang/type","mo/lang/mix"],function(a,b,c){function d(a,b,c){(!b||g(b))&&(c=b,b={}),this._listener=c;var d=c&&++h;this.event={},this.EVENTS.forEach(function(a){this[a]=a+(c?"_"+d:"")},this.event),this.node=a,this._config={event:this.EVENTS[0]},this.config(b),this.enable()}function e(){return this}function f(a,b,c){return new f.Class(a,b,c)}var g=b.isFunction,h=0,i=!1;try{document.createEvent("TouchEvent"),i=!0}catch(j){}return d.prototype={SUPPORT_TOUCH:i,PRESS:i?"touchstart":"mousedown",MOVE:i?"touchmove":"mousemove",RELEASE:i?"touchend":"mouseup",CANCEL:"touchcancel",EVENTS:[],DEFAULT_CONFIG:{namespace:""},config:function(a){var b=this._config.namespace;c.merge(c.mix(this._config,a),this.DEFAULT_CONFIG);var d=this._config.namespace||"";return this.EVENTS.forEach(function(a){this[a]=this[a].replace(b||/^/,d)},this.event),this},enable:function(){var a=this;return a.bind(a.PRESS,a._press||(a._press=function(b){return a.press.call(a,b.originalEvent||b)})).bind(a.MOVE,a._move||(a._move=function(b){return a.move.call(a,b.originalEvent||b)})).bind(a.CANCEL,a._cancel||(a._cancel=function(b){return a.cancel.call(a,b.originalEvent||b)})).bind(a.RELEASE,a._release||(a._release=function(b){return a.release.call(a,b.originalEvent||b)})),a._listener&&a.bind(this.event[this._config.event],a._handler||(a._handler=function(b){return a._listener.call(a,b.originalEvent||b)})),a},disable:function(){var a=this;return a.unbind(a.PRESS,a._press).unbind(a.MOVE,a._move).unbind(a.CANCEL,a._cancel).unbind(a.RELEASE,a._release),a._listener&&a._handler&&a.unbind(this.event[this._config.event],a._handler),a},once:function(a,b,c){function d(f){return e.unbind(a,d,c),b.call(this,f.originalEvent||f)}var e=this;this.bind(a,d,c)},bind:e,unbind:e,trigger:e,press:e,move:e,release:e,cancel:e},f.Class=d,f}),define("momo/tap",["mo/lang","momo/base"],function(a,b){function c(a){return a._moveTarget&&a._moveTarget!==a._startTarget||Math.abs(a._movePosX-a._startPosX)>a._config.tapRadius||Math.abs(a._movePosY-a._startPosY)>a._config.tapRadius?!0:void 0}function d(){}function e(a,b,c){return new e.Class(a,b,c)}var f=a.construct(b.Class);return a.mix(f.prototype,{EVENTS:["tap","doubletap","hold","tapstart","tapcancel"],DEFAULT_CONFIG:{tapRadius:10,doubleTimeout:300,tapThreshold:0,holdThreshold:500},press:function(a){var b=this,e=b.SUPPORT_TOUCH?a.touches[0]:a;b._startTime=a.timeStamp,b._startTarget=e.target,b._startPosX=e.clientX,b._startPosY=e.clientY,b._movePosX=b._movePosY=b._moveTarget=0/0,b._started=!1,b._pressTrigger=function(){b._started=!0,b.trigger(a,b.event.tapstart),b._pressTrigger=d},b._activeTimer=setTimeout(function(){c(b)||b._pressTrigger()},b._config.tapThreshold)},move:function(a){var b=this.SUPPORT_TOUCH?a.touches[0]:a;this._moveTarget=b.target,this._movePosX=b.clientX,this._movePosY=b.clientY},release:function(a){var b=this,d=a.timeStamp,e=c(b);return clearTimeout(b._activeTimer),e||d-b._startTime<b._config.tapThreshold?(e||(b._firstTap=d),void(b._started&&b.trigger(a,b.event.tapcancel))):(b._started||b._pressTrigger(),void(d-b._startTime>b._config.holdThreshold+b._config.tapThreshold?b.trigger(a,b.event.hold):b._firstTap&&d-b._firstTap<b._config.doubleTimeout?(a.preventDefault(),b.trigger(a,b.event.doubletap),b._firstTap=0):(b.trigger(a,b.event.tap),b._firstTap=d)))
},cancel:function(a){clearTimeout(this._activeTimer),this._started&&this.trigger(a,this.event.tapcancel)}}),e.Class=f,e}),define("soviet",["mo/lang/es5","mo/lang/mix","mo/lang/type","mo/lang/struct","dollar"],function(a,b,c,d,e){function f(a,c){b.config(this,c||{},p),this.target=e(a),this.events={},this.locks={},this.traceStack||(this.traceStack=[])}function g(a,b,c){var d;return a&&(this.trace&&(this.traceStack.unshift("<"+b.nodeName+"#"+(b.id||"")+">."+(b.className||"").split(/\s+/).join(".")),this.traceStack.length>this.trace&&this.traceStack.pop()),d=a.call(b,c),this.preventDefault&&!d&&c.preventDefault()),d}function h(a,b,c,d){var e=a[b];d?a[b]=c:c&&(e||(e=a[b]=m()),e.push(c))}function i(a,b,c,d){var e=a[b];!c||d?delete a[b]:e&&e.clear(c)}function j(a,b){return a[b]}function k(a){return this.locks[a]=this.matchesSelector?{}:{".":{},"#":{},"&":{}}}function l(a,b,c,d,e){if(void 0===e&&(e=this.autoOverride),b){if(!this.matchesSelector){var f=(/^[\.#]/.exec(b)||["&"])[0];b=b.substr("&"!==f?1:0),a=a[f],"."===f&&(b=b.split(".").join(" "))}}else b="_self_";return d(a,b,c,e)}var m=d.fnQueue,n=c.isFunction,o=e.find.matchesSelector,p={preventDefault:!1,matchesSelector:!1,autoOverride:!1,aliasEvents:{},trace:!1,traceStack:null};f.prototype={on:function(a,b,c){if(n(b)&&(c=b,b=void 0),"object"==typeof b)for(var d in b)this.on(a,d,b[d]);else{a=this.aliasEvents[a]||a;var e=this.events[a];e||(this.target.bind(a,this.trigger.bind(this)),this.reset(a),e=this.events[a]),l.call(this,e,b,c,h)}return this},off:function(a,b,c){n(b)&&(c=b,b=void 0),a=this.aliasEvents[a]||a;var d=this.events[a];return d&&l.call(this,d,b,c,i),this},matches:function(a,b){a=this.aliasEvents[a]||a;var c=this.events[a];return l.call(this,c,b,null,j)},reset:function(a){return a?(a=this.aliasEvents[a]||a,this.events[a]=this.matchesSelector?{}:{".":{},"#":{},"&":{}},k.call(this,a)):(this.events={},this.locks={}),this},disable:function(a,b){var c=this.locks;if(a){a=this.aliasEvents[a]||a;var d=c[a];d||(d=k.call(this,a)),b?l.call(this,d,b,!0,h,!0):d._disable=!0}else this._global_lock=!0;return this},enable:function(a,b){var c=this.locks;if(a){a=this.aliasEvents[a]||a;var d=c[a];d&&(b?l.call(this,d,b,null,i,!0):delete d._disable)}else delete this._global_lock;return this},trigger:function(a){var b=this.aliasEvents[a.type];b&&(a.type=b);var c,d=this,e=a.target,f=this.locks[a.type]||{},h=this.events[a.type];if(!h||this._global_lock||f._disable)return c;if(this.matchesSelector)Object.keys(h).forEach(function(b){!f[b]&&o(this,b)&&(c=g.call(d,h[b],this,a))},e);else{var i,j,k=(i="#")&&(j=e.id)&&h[i][j]||(i=".")&&(j=e.className)&&h[i][j]||(i="&")&&(j=e.nodeName.toLowerCase())&&h[i][j]||null;if(k){var l=f[i][j];l||(c=g.call(this,k,e,a))}}return h._self_&&(c=g.call(this,h._self_,e,a)),c}};var q=function(a,b){return new q.Soviet(a,b)};return q.Soviet=f,q}),define("cardkit/ui",["mo/lang","dollar","mo/browsers","mo/template","soviet","momo/base","momo/tap","cardkit/ui/control","cardkit/ui/picker","cardkit/ui/ranger","cardkit/ui/modalview","cardkit/ui/actionview","cardkit/ui/growl","cardkit/supports","cardkit/bus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){var a=h(this,{disableRequest:this.isMountedDarkDOM}),b=a.data();b.disableUrl||b.disableJsonUrl?a.toggle():a.isEnabled||a.enable()}function q(){h(this,{disableRequest:this.isMountedDarkDOM}).toggle()}function r(){return b(this).hasClass("ck-post-button")?void p.call(this):r.call(this.parentNode)}function s(){return b(this).hasClass("ck-switch")?void q.call(this):s.call(this.parentNode)}function t(c){var d=a.mix({confirmText:"ç¡®è®¤",cancelText:"åæ¶",multiselect:!1},c.data());return d.options=b(d.options||".ck-option",c),l(c,d).open()}function u(a){for(var c in a)b.Event.aliases[c]=y[c]="ck_"+a[c]}function v(){}var w=document,x=k(),y={};a.mix(f.Class.prototype,{bind:function(a,c,d){return b(d||this.node).bind(a,c),this},unbind:function(a,c,d){return b(d||this.node).unbind(a,c),this},trigger:function(a,c){return delete a.layerX,delete a.layerY,delete a.returnValue,b(a.target).trigger(c,a),this}});var z={".ck-link, .ck-link *":function(){B.openLink(this)},".ck-link-direct, .ck-link-direct *":function(){B.openLink(this)},".ck-link-extern, ck-link-extern *":function(){B.openLink(this,{target:this.target||"_blank"})},".ck-link-img":function(){B.openImage(this.href)},".ck-post-link":p,".ck-post-button, .ck-post-button span":r,".ck-folder header":function(){h(this.parentNode).toggle()},".ck-switch, .ck-switch span":s,".ck-segment .ck-option, .ck-segment .ck-option span":function(){var a=b(this);a.hasClass("ck-option")||(a=a.closest(".ck-option"));var c=i(a.parent());c.select(a)},".ck-select, .ck-select span, .ck-select .enabled":function(){var a=b(this);a.hasClass("ck-select")||(a=a.parent());var c=i(a);t(a),o.on("actionView:confirmOnThis",function(a){c.select(a.val())})},".ck-tagselector .ck-option":function(){var a=i(this.parentNode);a.select(this)},".ck-actions .ck-option":function(){var a=b(this).closest(".ck-actions"),c=i(a,{ignoreStatus:"false"!==a.data("ignoreStatus")&&!0});c.select(this)},".ck-actions-button, .ck-actions-button span":function(){var a=b(this);a.hasClass("ck-actions-button")||(a=a.parent()),t(a)},".ck-modal-button, .ck-modal-button *":function(){var a=b(this);a.hasClass("ck-modal-button")||(a=a.closest(".ck-modal-button")),B.openModal(a.data())},".ck-modal-link, .ck-modal-link *":function(){var a=b(this);a.hasClass("ck-modal-link")||(a=a.closest(".ck-modal-link")),B.openModal(a.data())},".ck-modalview .wrapper > header .confirm":function(){x.confirm()},".ck-modalview .wrapper > header .cancel":function(){x.cancel()},".ck-actionview .ck-option, .ck-actionview .ck-option > *":function(){var a=b(this);a.hasClass("ck-option")||(a=a.parent()),l.current.select(a)},".ck-actionview > footer .confirm":function(){l.current.confirm()},".ck-actionview > footer .cancel":function(){l.current.cancel()},".ck-top-overflow":function(){t(b(this))},".ck-confirm-link":function(){var a=this;a.href||(a=a.parentNode),B.confirm("",function(){B.openLink(a.href,a.target)},b(a).data())},".ck-growl-button":function(){m(this).open()}};o.on("ranger:changed",function(a,b){b&&B.openLink(d.format(b,{value:a.val()}))}),o.on("actionView:jump",function(a,b,c){B.openLink(b,{target:c})});var A={control:h,picker:i,ranger:j,modalCard:x,modalView:k,actionView:l,growl:m},B={alert:function(b,c){l("ckAlert",a.mix({title:"æç¤º",content:b||"",cancelText:"å³é­",multiselect:!1},c)).open()},confirm:function(b,c,d){l("ckAlert",a.mix({title:"æç¤º",content:b||"",confirmText:"ç¡®è®¤",cancelText:"åæ¶",multiselect:!0},d)).open(),o.on("actionView:confirmOnThis",c)},openModal:function(a){x.set(a).open()},closeModal:function(){return x.cancel(),x.event.promise("close")},openImage:function(a){B.openLink(a,{target:"_blank"})},notify:function(b,c){m(a.mix({content:b},c)).open()},showLoading:function(a){this.loadingTips||(this.loadingTips=m({expires:-1,keepalive:!0,corner:"center"})),this.loadingTips.set({content:a||"æ­£å¨å è½½..."}).open(),this._loadingStart=+new Date},hideLoading:function(b){b=a.mix({duration:800},b);var c=+new Date-this._loadingStart;c<b.duration?setTimeout(function(){B.hideLoading(b)},b.duration-c):this.loadingTips&&this.loadingTips.close()},openLink:function(a,b){if(b=b||{},"string"!=typeof a){var c=a;a=c.href,b.target=b.target||c.target}b.target&&"_self"!==b.target?window.open(a,b.target):location.href=a}},C={init:function(a){a=a||{};var c=b(a.appWrapper);l.forceOptions.parent=c,m.forceOptions.parent=c,x.set({oldStylePage:a.oldStyle,parent:c});var d=g(w,{tapThreshold:20});u(d.event);var e={};Object.keys(z).forEach(function(a){this[a]=v},e),this.delegate.on("tap",z).on("click",e).on("change",{".ck-ranger":function(a){return j(this).val(a.target.value),!0}}).on("touchstart",{".ck-ranger":function(a){return j(this).val(a.target.value),j(this).changeStart(),!0}}).on("touchend",{".ck-ranger":function(){return j(this).changeEnd(),!0}})},delegate:e(w,{aliasEvents:y,autoOverride:!0,matchesSelector:!0,preventDefault:!0}),action:B,component:A};return C}),define("cardkit/helper",["mo/lang","dollar"],function(a,b){var c={readState:function(a,b){return a&&(a.state||{})[b]},readSource:function(a){var b=a.data("source");return b&&"."+b},readLabel:function(a){var c=a.data("label");return c&&(c=a.find(c)[0]),c=b(c||a),c.text()||c.val()},isBlank:function(a){return!a||!/\S/m.test(a)}};return c}),define("cardkit/oldspec/common/item",["cardkit/helper"],function(a){var b={source:a.readSource};return{title:function(a){a.watch(".ckd-title"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-title-link-extern")&&(a.attr("target")||"_blank")},isAlone:function(a){return a.hasClass("ckd-title-link-alone")}})},titleLink:function(a){a.watch(".ckd-title-link"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-title-link-extern")&&(a.attr("target")||"_blank")},isAlone:function(a){return a.hasClass("ckd-title-link-alone")}})},titlePrefix:function(a){a.watch(".ckd-title-prefix"),a.state(b)},titleSuffix:function(a){a.watch(".ckd-title-suffix"),a.state(b)},titleTag:function(a){a.watch(".ckd-title-tag"),a.state(b)},icon:function(a){a.watch(".ckd-icon"),a.state(b),a.state({imgUrl:"src"})},info:function(a){a.watch(".ckd-info"),a.state(b)},opt:function(a){a.watch(".ckd-opt"),a.state(b)},desc:function(a){a.watch(".ckd-desc, .ckd-subtitle"),a.state(b)},content:function(a){a.watch(".ckd-content"),a.state(b)},meta:function(a){a.watch(".ckd-meta"),a.state(b)},author:function(a){a.watch(".ckd-author"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-author-link-extern")&&(a.attr("target")||"_blank")}})},authorLink:function(a){a.watch(".ckd-author-link"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-author-link-extern")&&(a.attr("target")||"_blank")}})},authorPrefix:function(a){a.watch(".ckd-author-prefix"),a.state(b)},authorSuffix:function(a){a.watch(".ckd-author-suffix"),a.state(b)},avatar:function(a){a.watch(".ckd-avatar"),a.state(b),a.state({imgUrl:"src"})},authorInfo:function(a){a.watch(".ckd-author-info"),a.state(b)},authorDesc:function(a){a.watch(".ckd-author-desc"),a.state(b)},authorMeta:function(a){a.watch(".ckd-author-meta"),a.state(b)}}}),define("cardkit/oldspec/common/scaffold",["cardkit/helper"],function(a){var b={source:a.readSource};return{hd:function(a){a.watch(".ckd-hd"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-hd-link-extern")&&(a.attr("target")||"_blank")}})},hdLink:function(a){a.watch(".ckd-hd-link:not(.ckd-hd)"),a.state(b),a.state({link:"href",linkTarget:function(a){return a.hasClass("ckd-hd-link-extern")&&(a.attr("target")||"_blank")}})},hdOpt:function(a){a.watch(".ckd-hdopt"),a.state(b)},ft:function(a){a.watch(".ckd-ft")},blank:function(a){a.watch(".ckd-blank")}}}),define("cardkit/spec/common/source_item",["cardkit/oldspec/common/item"],function(a,b){return b("cardkit/oldspec/common/item")}),define("cardkit/spec/common/item",[],function(){return{title:function(a){a.watch('ck-part[type="title"]'),a.state({link:"href",linkTarget:"target",isAlone:"alone-mode"})},titleLink:function(a){a.watch('ck-part[type="titleLink"]'),a.state({link:"href",linkTarget:"target",isAlone:"alone-mode"})},titlePrefix:'ck-part[type="titlePrefix"]',titleSuffix:'ck-part[type="titleSuffix"]',titleTag:'ck-part[type="titleTag"]',icon:function(a){a.watch('ck-part[type="icon"]'),a.state({imgUrl:"src"})},info:'ck-part[type="info"]',opt:function(a){a.watch('ck-part[type="opt"]')},desc:'ck-part[type="desc"]',content:'ck-part[type="content"]',meta:'ck-part[type="meta"]',author:function(a){a.watch('ck-part[type="author"]'),a.state({link:"href",linkTarget:"target"})},authorLink:function(a){a.watch('ck-part[type="authorLink"]'),a.state({link:"href",linkTarget:"target"})},authorPrefix:'ck-part[type="authorPrefix"]',authorSuffix:'ck-part[type="authorSuffix"]',avatar:function(a){a.watch('ck-part[type="avatar"]'),a.state({imgUrl:"src"})},authorInfo:'ck-part[type="authorInfo"]',authorDesc:'ck-part[type="authorDesc"]',authorMeta:'ck-part[type="authorMeta"]'}}),define("cardkit/spec/common/source_scaffold",["cardkit/oldspec/common/scaffold"],function(a,b){return b("cardkit/oldspec/common/scaffold")}),define("cardkit/spec/common/scaffold",[],function(){return{hd:function(a){a.watch('ck-part[type="hd"]'),a.state({link:"href",linkTarget:"target"})},hdLink:function(a){a.watch('ck-part[type="hdLink"]'),a.state({link:"href",linkTarget:"target"})},hdOpt:function(a){a.watch('ck-part[type="hdOpt"]')},ft:function(a){a.watch('ck-part[type="ft"]')},blank:function(a){a.watch('ck-part[type="blank"]')}}}),define("cardkit/spec/list",["dollar","cardkit/spec/common/scaffold","cardkit/spec/common/source_scaffold","cardkit/spec/common/item","cardkit/spec/common/source_item"],function(a,b,c,d,e){function f(a){a.watch(".ckd-item"),a.state(j),a.component(e)}function g(a){a.state({subtype:"subtype",blankText:"blank-text",limit:"limit",col:"col",paperStyle:"paper-style",plainStyle:"plain-style",plainHdStyle:"plain-hd-style"}),a.component(b),a.component("item",function(a){a.watch('ck-part[type="item"]'),a.state({link:"href",linkTarget:"target",isAlone:"alone-mode"}),a.component(d),a.source().component(e)}),a.source().component(c),a.source().component("item",f)}function h(b,c){b.watch(a(i,c)),g(b)}var i='ck-card[type="list"]',j={link:"href",linkTarget:function(a){return a.hasClass("ckd-title-link-extern")&&(a.attr("target")||"_blank")},isAlone:function(a){return a.hasClass("ckd-title-link-alone")}};return h.sourceItemStates=j,h.sourceItemSpec=f,h.initList=g,h}),define("cardkit/oldspec/list",["dollar","cardkit/helper","cardkit/spec/list","cardkit/oldspec/common/scaffold","cardkit/oldspec/common/item"],function(a,b,c,d,e){function f(a){a.state({subtype:"data-style",blankText:"data-cfg-blank",limit:"data-cfg-limit",col:"data-cfg-col",paperStyle:"data-cfg-paper",plainStyle:"data-cfg-plain",plainHdStyle:"data-cfg-plainhd"}),a.state(h),a.component(d),a.component("item",function(a){a.watch(".ckd-item"),a.state(h),a.state(i),a.component(e),a.source().component(e)}),a.source().component(d),a.source().component("item",j)}function g(b,c){b.watch(a(k,c)),b.watch(a(l,c)),f(b)}var h={source:b.readSource},i=c.sourceItemStates,j=c.sourceItemSpec,k=".ckd-list-card",l=".ck-list-unit";return g.initList=f,g}),define("cardkit/oldspec/box",["dollar","cardkit/helper","cardkit/oldspec/common/scaffold"],function(a,b,c){var d={source:b.readSource},e=".ckd-box-card",f=".ck-box-unit";return function(b,g){b.watch(a(e,g)),b.watch(a(f,g)),b.state({subtype:"data-style",paperStyle:"data-cfg-paper",plainStyle:"data-cfg-plain",plainHdStyle:"data-cfg-plainhd"}),b.component(c),b.component("content",function(a){a.watch(".ckd-content"),a.state(d)}),b.source().component(c),b.source().component("content",".ckd-content")}}),define("cardkit/spec/form",["dollar","cardkit/spec/common/scaffold","cardkit/spec/common/source_scaffold"],function(a,b,c){function d(a){a.watch(".ckd-item"),a.component("content",".ckd-content")}function e(e,g){e.watch(a(f,g)),e.state({subtype:"subtype",blankText:"blank-text",plainHdStyle:"plain-hd-style"}),e.component(b),e.component("item",function(a){a.watch('ck-part[type="item"]'),a.component("content",'ck-part[type="content"]'),a.source().component("content",".ckd-content")}),e.source().component(c),e.source().component("item",d)}var f='ck-card[type="form"]';return e.sourceItemSpec=d,e}),define("cardkit/oldspec/form",["dollar","cardkit/helper","cardkit/spec/form","cardkit/oldspec/common/scaffold"],function(a,b,c,d){var e={source:b.readSource},f=c.sourceItemSpec,g=".ckd-form-card",h=".ck-form-unit";return function(b,c){b.watch(a(g,c)),b.watch(a(h,c)),b.state({subtype:"data-style",blankText:"data-cfg-blank",plainHdStyle:"data-cfg-plainhd"}),b.component(d),b.component("item",function(a){a.watch(".ckd-item"),a.component("content",function(a){a.watch(".ckd-content"),a.state(e)}),a.source().component("content",".ckd-content")}),b.source().component(d),b.source().component("item",f)}}),define("cardkit/oldspec/mini",["dollar","cardkit/oldspec/list"],function(a,b){var c=".ckd-mini-card",d=".ck-mini-unit";return function(e,f){e.watch(a(c,f)),e.watch(a(d,f)),b.initList(e)}}),define("cardkit/spec/mini",["dollar","cardkit/spec/list"],function(a,b){var c='ck-card[type="mini"]';return function(d,e){d.watch(a(c,e)),b.initList(d)}}),define("cardkit/spec/box",["dollar","cardkit/spec/common/scaffold","cardkit/spec/common/source_scaffold"],function(a,b,c){var d='ck-card[type="box"]';return function(e,f){e.watch(a(d,f)),e.state({subtype:"subtype",paperStyle:"paper-style",plainStyle:"plain-style",plainHdStyle:"plain-hd-style"}),e.component(b),e.component("content",'ck-part[type="content"]'),e.source().component(c),e.source().component("content",".ckd-content")}}),define("darkdom",["mo/lang/es5","mo/lang/mix","dollar"],function(a,b,c){function d(a){a=a||{},this._config=b.config({},a,F),this._stateGetters=b.copy(G),this._stateSetters=b.copy(G),this._components={},this._contents={},this._updaters={},this._events={},this.set(this._config)}function e(a){this._stateGetters=Object.create(a.stateGetters),this._stateSetters=Object.create(a.stateSetters),this._options=a.options,this._config=b.mix({},a),this._darkRoots=[],this._specs={},this._buffer=[],this._events={},this._sourceGuard=null,this._options.enableSource&&this.createSource(a)}function f(a){b.each(X,function(a,c){this[c]=function(){var c;return b.each(this,function(b){c=a.apply(b,this)},arguments),void 0===c?this:c}},a.fn)}function g(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function h(){var a=+new Date;return a>M&&(M=a,N=0),T+M+"_"+ ++N}function i(a){delete K[a],delete J[a],delete I[a],delete L[a]}function j(a,b){b=b||{};var c={text:"",_index:{},_script:"",_context:b.scriptContext,_hasOuter:b.entireAsContent};return a?(b.data=c,c._hasOuter?k.call(b,a.clone().removeAttr(S)):a.contents().forEach(k,b),c):c}function k(a){var d=this.data;if(a=c(a),1!==a[0].nodeType)return void(3===a[0].nodeType&&(a=a.text(),/\S/.test(a)&&(d.text+=a)));if(d._context&&"SCRIPT"===a[0].nodeName&&"text/darkscript"===a.attr("type"))return void(d._script+=a[0].innerHTML);var e=a[0].isMountedDarkDOM;if(this.noComs&&(!this.scriptContext||!a.find("script").length))return void(e||(d.text+=a[0].outerHTML||""));var f=a.attr(S),g=H[f];if(delete H[f],g)d._index[f]=g,d.text+="{{"+S+"="+f+"}}";else if(!e){var h=j(a);d.text+=a.clone().html(h.text)[0].outerHTML||"",b.mix(d._index,h._index)}}function l(a){if("object"==typeof a){var c=a.contentData||{};c._script&&new Function("",c._script).call(c._context),b.each(c._index||{},l),b.each(a.componentData||[],l)}}function m(a,d){a=c(a);var e=a.attr(S);if(!c.contains(document.body,a[0]))return void(d.onlyStates||r(e,null,{type:"remove"}));var f=K[e],g=J[e];if(f&&g){var h;d.onlyStates?(h=f.scanRoot(a,d),o(g,h),g.state&&b.mix(g.state,h.state)):(h=f.bufferRoot(a).renderBuffer().releaseData(),n(g,P(h)?h[0]:h))}}function n(a,c){if(!c||!c.id)return r(a.id,null,{type:"remove"});if(!a.id)return c=c.context,r(c.id,c,{type:"component"});var d=o(a,c);d!==!1&&(p(a.contentData||(a.contentData=j()),c.contentData)&&(d=r(c.id,c,{type:"content",oldValue:a.content,newValue:c.content}),d===!1)||b.each(c.componentData,function(a,b){var e=q.apply(this,arguments);return e&&(d=r(c.id,c,{type:"component",name:b,oldValue:this[b],newValue:a}),d===!1)?!1:void 0},a.componentData||(a.componentData={})))}function o(a,c){var d;return b.each(c.state,function(a,b){return this[b]!=a&&(d=r(c.id,c,{type:"state",name:b,oldValue:this[b],newValue:a}),d===!1)?!1:void 0},a.state||(a.state={})),d}function p(a,c){if(a.text.length!==c.text.length)return!0;var d;return b.each(c._index||{},function(a,b){return this[b]?void n(this[b],a):(d=!0,!1)},a._index),d||a.text!==c.text}function q(a,b){if(!P(a))return void n(this[b]||(this[b]={}),a);for(var c,d=this[b]||(this[b]=[]),e=d.length<a.length?a:d,f=0,g=e.length;g>f;f++){if(!d[f]){c=!0;break}if(a[f]&&d[f].id!==a[f].id){c=!0;break}n(d[f],a[f])}return c}function r(a,d,f){if(a){var g=e.getDarkById(a);g.trigger("darkdom:willUpdate");var h,i=c("#"+a),j=K[a];return j?h=j.triggerUpdate(b.mix(f,{data:d,root:i,rootId:a})):d||(i.remove(),h=!1),d&&"remove"!==f.type?h===!1&&g.trigger("darkdom:rendered"):g.trigger("darkdom:removed"),g.trigger("darkdom:updated"),h}}function s(a,c,d){if(P(c))return c.forEach(function(a){s(this,a,d)},a),a;t(a,c,d);var e=a.contentData||(a.contentData=j()),f=c.contentData;return f&&f.text&&(!e.text||e._hasOuter)&&(e.text=f.text,b.mix(e._index,f._index)),a.componentData||(a.componentData={}),b.each(c.componentData||[],u,a),a}function t(a,c,d){return P(c)?(c.forEach(function(a){t(this,a,d)},a),a):(a.id||(a.id=c.id),a.context=d,b.each(c.state||{},function(a,b){void 0===this[b]&&(this[b]=a)},a.state||(a.state={})),a)}function u(a,b){var c=this,d=this.componentData;P(a)?a.forEach(function(a){this.push(s({},a,c))},d[b]||(d[b]=[])):s(d[b]||(d[b]={}),a,c)}function v(a,c){a.id||(a.id=h(),K[a.id]=c),a.componentData&&b.each(c._config.components,w,a.componentData),a.contentData&&(a.contentData._hasOuter=c._options.sourceAsContent||c._options.entireAsContent)}function w(a,b){var c=this[b];c&&(P(c)||(c=[c]),c.forEach(function(a){v(a,this.createGuard({isSource:!0}))},a))}function x(a){b.each(a.componentData,function(a,b){this[b]=P(a)?a.map(function(a){return y(a)}):y(a)},a.component||(a.component={}));var c=a.contentData;return a.content=c.text.replace(U,function(a,b){var d=c._index[b];return"string"===d?d:y(d)}),J[a.id]=a,a}function y(a){var b=K[a.id];if(!b)return"";a.component||(a=x(a));var c=b.createRoot(a);return"string"==typeof c?c:c[0].outerHTML}function z(a,b){return("string"==typeof b?a.attr(b):b&&b(a))||void 0}function A(a,b,c){"string"==typeof b?a.attr(b,c):b&&b(a,c)}function B(a){return"<span>"+a.content+"</span>"}function C(a){return"[object Function]"===O.call(a)}function D(a,c,d,e){e=e||{};var f=a;"object"!=typeof f&&(f={},f[a]=c);var g={};return b.each(f,function(a,b){e.execFunc&&C(a)&&(a=a(this[b])),this[b]=g[b]=a},d),g}function E(a){return new E.DarkDOM(a)}var F={unique:!1,enableSource:!1,disableScript:!1,entireAsContent:!1,sourceAsContent:!1,render:!1},G={source:"source-selector"},H={},I={},J={},K={},L={},M=0,N=0,O=Object.prototype.toString,P=Array.isArray,Q=c.find.matchesSelector,R="dd-autogen",S="dd-connect",T="_brightRoot_",U=new RegExp("\\{\\{"+S+"=(\\w+)\\}\\}","g"),V=/(\S+)\s*(.*)/,W=/^\s*<(\w+|!)[^>]*>/,X={darkGuard:function(){return K[this.getAttribute(S)]},mountDarkDOM:function(){var a=this.darkGuard();a&&a.mountRoot(this)},unmountDarkDOM:function(){var a=this.darkGuard();a&&a.unmountRoot(this)},resetDarkDOM:function(){var a=this.darkGuard();a&&(a.unmountRoot(this),a.unregisterRoot(this))},getDarkState:function(a){var b=this.darkGuard();return b&&z(c(this),b.stateGetter(a))||null},setDarkState:function(a,b,d){d=d||{};var e=this.darkGuard();if(e){var f=e.stateSetter(a);A(c(this),f,b),d.update&&this.updateDarkStates()}},updateDarkStates:function(){m(this,{onlyStates:!0})},updateDarkDOM:function(){m(this,{}),E.DarkGuard.gc()},feedDarkDOM:function(a){var b=c(this).attr(S),d=K[b];if(d){var e=C(a)?a(I[b]):a;v(e,d),I[b]=e}},responseDarkDOM:function(a,b){var d=c(this),e=d.attr(S),f=L[e];f||(f=L[e]={}),f[a]=b}};return d.prototype={set:function(a){return a?(b.config(this._config,a,this._defaults),this):this},state:function(a,c,d){return"object"==typeof a?(b.each(a,function(a,b){this.state(b,a)},this),this):d||"string"!=typeof c?P(c)?this.state(a,c[0],c[1]):(this._stateGetters[a]=c,this._stateSetters[a]=d,this):this.state(a,c,c)},contain:function(a,c,d){"object"==typeof a&&(d=c),d=d||{};var e=D(a,c,this._components,{execFunc:!0});return d.content&&b.mix(this._contents,e),this},forward:function(a,b){return D(a,b,this._events),this},response:function(a,b){return this._updaters[a]=b,this},component:function(a){return this._components[a]},createGuard:function(a){return new E.DarkGuard(b.mix({stateGetters:this._stateGetters,stateSetters:this._stateSetters,components:this._components,contents:this._contents,updaters:this._updaters,events:this._events,options:this._config},a))}},e.prototype={state:d.prototype.state,component:function(a,b){return D(a,b,this._specs),this},forward:function(a,b){return D(a,b,this._events),this},source:function(){return this._options.enableSource?this._sourceGuard:void 0},stateGetter:function(a){return this._stateGetters[a]},stateSetter:function(a){return this._stateSetters[a]},watch:function(a){return this.selectTargets(a).forEach(this.registerRoot,this),this},unwatch:function(a){return a=a?this.selectTargets(a):this._darkRoots,a.forEach(this.unregisterRoot,this),this},mount:function(){return this._darkRoots.forEach(this.mountRoot,this),this},unmount:function(){return this._darkRoots.forEach(this.unmountRoot,this),this},buffer:function(){return this._darkRoots.forEach(this.bufferRoot,this),this},update:function(){return this._darkRoots.forEach(this.updateRoot,this),this},gc:function(a){b.each(this._darkRoots,function(b){return c(b).attr(S)===a?(this.unregisterRoot(b),!1):void 0},this)},registerRoot:function(a){if(a=c(a),!a.attr(R)){var d=a.attr(S);return d||(d=h(),this._config.isSource||a.attr(S,d)),K[d]=this,b.each(X,function(a,b){this[b]=a},a[0]),this._darkRoots.push(a[0]),d}},unregisterRoot:function(a){a=c(a);var d=a.attr(S);this===K[d]&&(a.removeAttr(S),i(d),b.each(X,function(a,b){delete this[b]},a[0]),g(this._darkRoots,a[0]))},mountRoot:function(a){if(a=c(a),a.attr(R)||a[0].isMountedDarkDOM)return this;a.trigger("darkdom:willMount");var b=x(this.scanRoot(a));return a.hide().before(this.createRoot(b)),this._listen(b),a[0].isMountedDarkDOM=!0,l(b),a.trigger("darkdom:rendered").trigger("darkdom:mounted"),this},unmountRoot:function(a){a=c(a);var b=a.attr(S);a.find("["+S+"]").forEach(function(a){var b=c(a).attr(S),d=K[b];d.unregisterRoot(a)},J),c("#"+b).remove(),delete a[0].isMountedDarkDOM,delete J[b]},bufferRoot:function(a){if(a=c(a),a.attr(R))return this;var b=this.scanRoot(a);return this._bufferData(b),a[0].isMountedDarkDOM=!0,this},updateRoot:function(a){return c(a).updateDarkDOM(),this},scanRoot:function(a,c){c=c||{};var d=this._config.isSource,e=d?this.registerRoot(a):a.attr(S),f={id:e};return d||(f.context=this._config.contextData),f.state={},b.each(this._stateGetters,function(b,c){this[c]=z(a,b)},f.state),c.onlyStates||this._scanComponents(f,a),!d&&(f.state.source||I[e])&&this._sourceGuard&&this._mergeSource(f,c),f},_scanComponents:function(a,c){var d={},e=this._config,f=this._options;b.each(e.components,function(b,f){var g=b.createGuard({contextData:a,contextTarget:c,isSource:e.isSource}),h=this._specs[f];"string"==typeof h?g.watch(h):h&&h(g),g.buffer(),e.contents[f]?g._bufferContent():d[f]=g.releaseData()},this),a.componentData=d,a.contentData=this._scanContents(c,{scriptContext:!f.disableScript&&c[0],entireAsContent:f.entireAsContent,noComs:!Object.keys(e.components).length})},_scanContents:j,renderBuffer:function(){return this._buffer.forEach(function(a){x(a)}),this},releaseData:function(){var a=this._buffer.slice();return this._options.unique&&(a=a[0]||{}),this._resetBuffer(),a},_bufferData:function(a){this._buffer.push(a)},_bufferContent:function(){this._buffer.forEach(function(a){H[a.id]=a},this),this._resetBuffer()},_resetBuffer:function(){return this._buffer.length=0,this},createRoot:function(a){var b=this.render(a);if(!W.test(b))return b;var d=c(b);return d.attr(R,"true"),d.attr("id",a.id),d},render:function(a){return(this._options.render||B)(a)},_listen:function(a){a.id&&this.registerEvents(c("#"+a.id)),b.each(a.componentData||{},function(a){return P(a)?a.forEach(this._listen,this):void this._listen(a)},this);var d=a.contentData;d&&b.each(d._index||{},this._listen,this)},selectTargets:function(a){return a=c(a,this._config.contextTarget),this._options.unique&&(a=a.eq(0)),a},triggerUpdate:function(a){var b,c=a.type,d=L[a.rootId]||this._config.updaters;return a.name&&(c+=":"+a.name,b=d[c]),b||(b=d[a.type]),b||(b=this.defaultUpdater),b.call(this,a)},defaultUpdater:function(a){var b=!1;return a.data?a.root[0]?(this.createRoot(a.data).replaceAll(a.root),this._listen(a.data),b):void 0:(a.root.remove(),b)},registerEvents:function(a){var c=a.attr("id"),d=K[c];if(d){var f=e.getDarkById(c);b.each(d._config.events,function(a,b){b=V.exec(b),this.on(b[1],function(c){return Q(c.target,b[2])&&d.triggerEvent(f,a,c),!1})},a)}},triggerEvent:function(a,b,c){var d=this._events[b];if(d){if("string"!=typeof d)return d(c,a);d=V.exec(d),d[2]&&(a=a.find(d[2])),a.trigger(d[1],{sourceEvent:c})}},isSource:function(){return this._config.isSource},createSource:function(a){return this._sourceGuard=new E.DarkGuard(b.merge({isSource:!0,contextTarget:null,options:b.merge({entireAsContent:a.options.sourceAsContent||a.options.entireAsContent,enableSource:!1},a.options)},a)),this._sourceGuard},scanSource:function(a,b){if(b){var c=this._sourceGuard,d=c.selectTargets(b);c.watch(d),c.buffer();var e=c.releaseData();return c.unwatch(d),I[a]=e,e}},_mergeSource:function(a,b){var c=I[a.id];c||(c=this.scanSource(a.id,a.state.source)),c&&(b.onlyStates?t(a,c,a.context):s(a,c,a.context))}},e.getDarkById=function(a){return c("["+S+'="'+a+'"]')},e.gc=function(){var a={};c("["+S+"]").forEach(function(a){this[c(a).attr(S)]=!0},a),Object.keys(K).forEach(function(a){if(!this[a]&&!c("#"+a)[0]){var b=K[a];if(b){if(b.isSource())return;b.gc(a)}else i(a)}},a)},f(c),E.DarkDOM=d,E.DarkGuard=e,E.getDarkById=e.getDarkById,E.gc=e.gc,E.initPlugins=f,E}),define("cardkit/spec/page",["dollar","darkdom","cardkit/helper","cardkit/spec/box","cardkit/spec/list","cardkit/spec/mini","cardkit/spec/form"],function(a,b,c,d,e,f,g,h){function i(a){a.watch('ck-part[type="blank"]')}function j(a){a.watch('ck-part[type="nav"]'),a.state({link:"href"})}function k(a){a.watch('ck-part[type="banner"]'),a.state({plainStyle:"plain-style"})}function l(a){a.watch('ck-part[type="actionbar"]'),a.state({limit:"limit"}),a.component("action",m),a.source().component("action",n)}function m(a){a.watch("[action-layout]"),a.state({label:t.readLabel,forceOverflow:function(a){return"overflow"===a.attr("action-layout")}}),o(a.source()),q.forwardActionbar(a)}function n(a){a.watch(".ckd-item, .ckd-overflow-item"),o(a)}function o(a){a&&a.state({label:t.readLabel,forceOverflow:function(a){return a.hasClass("ckd-overflow-item")}})}function p(a){var b=s.getDarkById(a.target.parentNode.id);b&&b.trigger("tap").updateDarkDOM()}function q(a,b){a.watch(r(q.SELECTOR+u,b)),a.state({blankText:"blank-text",deck:"deck",isPageActive:"active-page",isDeckActive:"active-deck",currentDeck:"current-deck",cardId:"id"}),a.component(v)}var r=h("dollar"),s=h("darkdom"),t=h("cardkit/helper"),u=".unmount-page",v={title:'ck-part[type="title"]',actionbar:l,nav:j,banner:k,footer:'ck-part[type="footer"]',blank:i,box:h("cardkit/spec/box"),list:h("cardkit/spec/list"),mini:h("cardkit/spec/mini"),form:h("cardkit/spec/form")};return q.SELECTOR='ck-card[type="page"]',q.initOldStyleActionState=o,q.forwardActionbar=function(a){a.forward({"overflows:confirm":function(a){var b=a.component.val(),c=r("#"+b).children();c.trigger("tap")},"control:enable":p,"control:disable":p})},q}),define("cardkit/oldspec/page",["dollar","cardkit/spec/page","cardkit/helper","cardkit/oldspec/box","cardkit/oldspec/list","cardkit/oldspec/mini","cardkit/oldspec/form"],function(a,b,c,d,e,f,g,h){function i(a){a.watch(".ckd-page-blank")}function j(a){a.watch(".ckd-page-nav"),a.state({link:"href"})}function k(a){a.watch(".ckd-page-banner"),a.watch(".ck-banner-unit"),a.state({plainStyle:"data-cfg-plain"})}function l(a){a.watch(".ckd-page-actions"),a.state({limit:"data-cfg-limit",source:r.readSource}),a.component("action",n),a.source().component("action",n),q.forwardActionbar(a)}function m(a){a.watch(".ckd-page-footer"),a.state("source",r.readSource)}function n(a){a.watch(".ckd-item, .ckd-overflow-item"),a.state("source",r.readSource),s(a),s(a.source())}function o(a,b){a.watch(p(o.SELECTOR+t,b)),a.watch(p(o.SELECTOR_OLD+t,b)),a.state({blankText:"data-cfg-blank",deck:"data-cfg-deck",isPageActive:"data-active-page",isDeckActive:"data-active-deck",currentDeck:"data-current-deck",cardId:"id"}),a.component(u)
}var p=h("dollar"),q=h("cardkit/spec/page"),r=h("cardkit/helper"),s=q.initOldStyleActionState,t=".unmount-page",u={title:".ckd-page-title",actionbar:l,nav:j,banner:k,footer:m,blank:i,box:h("cardkit/oldspec/box"),list:h("cardkit/oldspec/list"),mini:h("cardkit/oldspec/mini"),form:h("cardkit/oldspec/form")};return o.SELECTOR=".ckd-page-card",o.SELECTOR_OLD=".ck-card",o}),define("cardkit/oldspec",["cardkit/oldspec/page","cardkit/oldspec/box","cardkit/oldspec/list"],function(a,b,c,d){return{page:[d("cardkit/oldspec/page")],box:[d("cardkit/oldspec/box")],list:[d("cardkit/oldspec/list")]}}),define("cardkit/tpl/scaffold/ft",[],function(){return{template:"<footer>{%= content %}</footer>\n"}}),define("cardkit/tpl/scaffold/hd_opt",[],function(){return{template:'<span class="ck-hdopt">{%= content %}</span>\n'}}),define("cardkit/tpl/scaffold/hd",[],function(){return{template:'<span class="ck-hd {%= (hdLink && \'clickable\' || \'\') %}">\n    {% if (hdLink) { %}\n    <a href="{%= hdLink %}" \n        target="{%= (hdLinkTarget || \'_self\') %}" \n        class="ck-link-mask ck-link"></a>\n    {% } %}\n    <span>{%= content %}</span>\n</span>\n'}}),define("cardkit/card/common/scaffold",["darkdom","mo/template/micro","cardkit/helper","cardkit/tpl/scaffold/hd","cardkit/tpl/scaffold/hd_opt","cardkit/tpl/scaffold/ft"],function(a,b,c,d,e,f,g){var h=g("darkdom"),i=g("mo/template/micro").convertTpl,j=g("cardkit/helper"),k=i(g("cardkit/tpl/scaffold/hd").template),l=i(g("cardkit/tpl/scaffold/hd_opt").template),m=i(g("cardkit/tpl/scaffold/ft").template),n={hd:function(){return h({unique:!0,enableSource:!0,render:function(a){var b=a.context.componentData.hdLink,c=j.readState(b,"link");return a.hdLink=c||a.state.link,a.hdLinkTarget=c?j.readState(b,"linkTarget"):a.state.linkTarget,k(a)}})},hdLink:function(){return h({unique:!0,enableSource:!0,render:function(a){return a.state.link}})},hdOpt:function(){return h({enableSource:!0,entireAsContent:!0,render:l})},ft:function(){return h({unique:!0,enableSource:!0,render:m})},blank:function(){return h({unique:!0,enableSource:!0,render:function(a){return"<div>"+a.content+"</div>"}})}};return n}),define("cardkit/tpl/item/author_meta",[],function(){return{template:'<span class="ck-author-meta">{%= content %}</span>\n'}}),define("cardkit/tpl/item/author_info",[],function(){return{template:'<span class="ck-author-info">{%= content %}</span>\n'}}),define("cardkit/tpl/item/author_desc",[],function(){return{template:'<span class="ck-author-desc">{%= content %}</span>\n'}}),define("cardkit/tpl/item/avatar",[],function(){return{template:'{% if (state.imgUrl) { %}\n    {% if (context.authorLink) { %}\n    <a href="{%= context.authorLink %}" \n            target="{%= (context.authorLinkTarget || \'_self\') %}" \n            class="ck-avatar ck-link">\n        <img src="{%= state.imgUrl %}"/>\n    </a>\n    {% } else { %}\n    <span class="ck-avatar">\n        <img src="{%= state.imgUrl %}"/>\n    </span>\n    {% } %}\n{% } %}\n'}}),define("cardkit/tpl/item/author_suffix",[],function(){return{template:'<span class="ck-author-suffix">{%= content %}</span>\n'}}),define("cardkit/tpl/item/author_prefix",[],function(){return{template:'<span class="ck-author-prefix">{%= content %}</span>\n'}}),define("cardkit/tpl/item/author",[],function(){return{template:'{% if (context.authorLink) { %}\n<a href="{%= context.authorLink %}" \n    target="{%= (context.authorLinkTarget || \'_self\') %}" \n    class="ck-author ck-link">{%= content %}</a>\n{% } else { %}\n<span class="ck-author">{%= content %}</span>\n{% } %}\n'}}),define("cardkit/tpl/item/meta",[],function(){return{template:'<span class="ck-meta">{%= content %}</span>\n'}}),define("cardkit/tpl/item/content",[],function(){return{template:'<span class="ck-content">{%= content %}</span>\n'}}),define("cardkit/tpl/item/opt",[],function(){return{template:'<span class="ck-opt">{%= content %}</span>\n'}}),define("cardkit/tpl/item/info",[],function(){return{template:'<span class="ck-info">{%= content %}</span>\n'}}),define("cardkit/tpl/item/desc",[],function(){return{template:'<span class="ck-desc">{%= content %}</span>\n'}}),define("cardkit/tpl/item/icon",[],function(){return{template:'{% if (state.imgUrl) { %}\n    {% if (context.isItemLinkAlone) { %}\n    <a href="{%= context.itemLink %}" \n            target="{%= (context.itemLinkTarget || \'_self\') %}" \n            class="ck-icon ck-link">\n        <img src="{%= state.imgUrl %}"/>\n    </a>\n    {% } else { %}\n    <span class="ck-icon">\n        <img src="{%= state.imgUrl %}"/>\n    </span>\n    {% } %}\n{% } %}\n'}}),define("cardkit/tpl/item/title_tag",[],function(){return{template:'<span class="ck-tag">{%= content %}</span>\n'}}),define("cardkit/tpl/item/title_suffix",[],function(){return{template:'<span class="ck-title-suffix">{%= content %}</span>\n'}}),define("cardkit/tpl/item/title_prefix",[],function(){return{template:'<span class="ck-title-prefix">{%= content %}</span>\n'}}),define("cardkit/tpl/item/title",[],function(){return{template:'{% if (context.isItemLinkAlone) { %}\n<a href="{%= context.itemLink %}" \n    class="ck-link"\n    target="{%= (context.itemLinkTarget || \'_self\') %}">{%= content %}</a>\n{% } else { %}\n<span class="ck-title">{%= content %}</span>\n{% } %}\n\n'}}),define("cardkit/tpl/item",[],function(){return{template:'<div class="ck-item {%= (itemLink && \'clickable\' || \'\') %}" \n        style="width:{%= (context.state.col ? Math.floor(1000/context.state.col)/10 + \'%\' : \'\') %};">\n\n    <div class="ck-initem">\n\n        {% if (itemLink && !isItemLinkAlone) { %}\n        <a href="{%= itemLink %}" \n            target="{%= (itemLinkTarget || \'_self\') %}"\n            class="ck-link-mask ck-link"></a>\n        {% } %}\n\n        <div class="ck-title-box">\n\n            {%= component.opt.join(\'\') %}\n            {%= component.icon %}\n\n            <div class="ck-title-set">\n\n                {% if (itemContent) { %}\n                <div class="ck-title-line">\n                    {%= component.titlePrefix.join(\'\') %}\n                    {%= itemContent %}\n                    {%= component.titleSuffix.join(\'\') %}\n                    {%= component.titleTag.join(\'\') %}\n                </div>\n                {% } %}\n\n                {% if (component.info.length) { %}\n                <div class="ck-info-wrap">\n                    {%= component.info.join(\'\') %}\n                </div>\n                {% } %}\n\n                {% if (component.desc.length) { %}\n                <div class="ck-desc-wrap">\n                    {%= component.desc.join(\'\') %}\n                </div>\n                {% } %}\n\n            </div>\n\n            {% if (component.content.length) { %}\n            <div class="ck-content-wrap">\n                {%= component.content.join(\'\') %}\n            </div>\n            {% } %}\n\n            {% if (component.meta.length) { %}\n            <div class="ck-meta-wrap">\n                {%= component.meta.join(\'\') %}\n            </div>\n            {% } %}\n\n        </div>\n\n        {% if (component.author || component.authorDesc.length || component.authorMeta.length) { %}\n        <div class="ck-author-box">\n\n            {%= component.avatar %}\n\n            <div class="ck-author-set">\n\n                <div class="ck-author-line">\n                    {%= component.authorPrefix.join(\'\') %}\n                    {%= component.author %}\n                    {%= component.authorSuffix.join(\'\') %}\n                </div>\n\n                {% if (component.authorInfo.length) { %}\n                <div class="ck-author-info-wrap">\n                    {%= component.authorInfo.join(\'\') %}\n                </div>\n                {% } %}\n\n                {% if (component.authorDesc.length) { %}\n                <div class="ck-author-desc-wrap">\n                    {%= component.authorDesc.join(\'\') %}\n                </div>\n                {% } %}\n\n            </div>\n\n            {% if (component.authorMeta.length) { %}\n            <div class="ck-author-meta-wrap">\n                {%= component.authorMeta.join(\'\') %}\n            </div>\n            {% } %}\n\n        </div>\n        {% } %}\n\n    </div>\n\n</div>\n\n'}}),define("cardkit/card/item",["darkdom","mo/lang/mix","mo/template/micro","cardkit/helper","cardkit/tpl/item","cardkit/tpl/item/title","cardkit/tpl/item/title_prefix","cardkit/tpl/item/title_suffix","cardkit/tpl/item/title_tag","cardkit/tpl/item/icon","cardkit/tpl/item/desc","cardkit/tpl/item/info","cardkit/tpl/item/opt","cardkit/tpl/item/content","cardkit/tpl/item/meta","cardkit/tpl/item/author","cardkit/tpl/item/author_prefix","cardkit/tpl/item/author_suffix","cardkit/tpl/item/avatar","cardkit/tpl/item/author_desc","cardkit/tpl/item/author_info","cardkit/tpl/item/author_meta"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=w("darkdom"),y=w("mo/lang/mix"),z=w("mo/template/micro").convertTpl,A=w("cardkit/helper"),B=z(w("cardkit/tpl/item").template),C=z(w("cardkit/tpl/item/title").template),D=z(w("cardkit/tpl/item/title_prefix").template),E=z(w("cardkit/tpl/item/title_suffix").template),F=z(w("cardkit/tpl/item/title_tag").template),G=z(w("cardkit/tpl/item/icon").template),H=z(w("cardkit/tpl/item/desc").template),I=z(w("cardkit/tpl/item/info").template),J=z(w("cardkit/tpl/item/opt").template),K=z(w("cardkit/tpl/item/content").template),L=z(w("cardkit/tpl/item/meta").template),M=z(w("cardkit/tpl/item/author").template),N=z(w("cardkit/tpl/item/author_prefix").template),O=z(w("cardkit/tpl/item/author_suffix").template),P=z(w("cardkit/tpl/item/avatar").template),Q=z(w("cardkit/tpl/item/author_desc").template),R=z(w("cardkit/tpl/item/author_info").template),S=z(w("cardkit/tpl/item/author_meta").template),T={title:function(){return x({unique:!0,enableSource:!0,render:C})},titleLink:function(){return x({unique:!0,enableSource:!0,render:function(a){return a.state.link}})},titlePrefix:function(){return x({enableSource:!0,sourceAsContent:!0,render:D})},titleSuffix:function(){return x({enableSource:!0,sourceAsContent:!0,render:E})},titleTag:function(){return x({enableSource:!0,render:F})},icon:function(){return x({unique:!0,enableSource:!0,render:G})},desc:function(){return x({enableSource:!0,sourceAsContent:!0,render:H})},info:function(){return x({enableSource:!0,sourceAsContent:!0,render:I})},opt:function(){return x({enableSource:!0,entireAsContent:!0,render:J})},content:function(){return x({enableSource:!0,sourceAsContent:!0,render:K})},meta:function(){return x({enableSource:!0,sourceAsContent:!0,render:L})},author:function(){return x({unique:!0,enableSource:!0,render:M})},authorLink:function(){return x({unique:!0,enableSource:!0,render:function(a){return a.state.link}})},authorPrefix:function(){return x({enableSource:!0,sourceAsContent:!0,render:N})},authorSuffix:function(){return x({enableSource:!0,sourceAsContent:!0,render:O})},avatar:function(){return x({unique:!0,enableSource:!0,render:P})},authorDesc:function(){return x({enableSource:!0,sourceAsContent:!0,render:Q})},authorInfo:function(){return x({enableSource:!0,sourceAsContent:!0,render:R})},authorMeta:function(){return x({enableSource:!0,sourceAsContent:!0,render:S})},item:function(){var a=x({enableSource:!0,render:function(a){var b=A.readState,c=a.state,d=a.component,e=a.componentData,f=d.titleLink?e.titleLink:e.title;a.itemLinkTarget=b(f,"linkTarget")||c.linkTarget,a.isItemLinkAlone=b(f,"isAlone")||c.isAlone,a.itemLink=d.titleLink||b(e.title,"link")||c.link,a.itemContent=d.title||a.content;var g=d.authorLink?e.authorLink:e.author;return a.authorLinkTarget=b(g,"linkTarget"),a.authorLink=d.authorLink||b(e.author,"link"),B(a)}}),b=y.copy(T);return delete b.item,a.contain(b),a}};return T}),define("cardkit/tpl/list",[],function(){return{template:"<div class=\"ck-list-card{%= (state.blankText === 'false' ? ' no-blank' : '') %}\"\n        data-style=\"{%= state.subtype %}\"\n        {%= state.col ? 'data-cfg-col=\"' + state.col + '\" ' : '' %}\n        {%= state.paperStyle ? 'data-cfg-paper=\"true\" ' : '' %}\n        {%= state.plainStyle ? 'data-cfg-plain=\"true\" ' : '' %}\n        {%= state.plainHdStyle ? 'data-cfg-plainhd=\"true\" ' : '' %}>\n\n    {% if (hasSplitHd) { %}\n        {%= hdwrap %}\n    {% } %}\n\n    <article class=\"ck-card-wrap\">\n\n        {% if (!hasSplitHd) { %}\n            {%= hdwrap %}\n        {% } %}\n        \n        <div class=\"ck-list-wrap\">\n\n            {% if (component.item.length) { %}\n\n                <div class=\"ck-list\">\n                {% component.item.forEach(function(item, i){ %}\n\n                    {% if (i && (i % state.col === 0)) { %}\n                    </div><div class=\"ck-list\">\n                    {% } %}\n\n                    {%= item %}\n\n                {% }); %}\n                </div>\n\n            {% } else { %}\n\n                <div class=\"ck-list\">\n                    <div class=\"ck-item blank\">\n                        <div class=\"ck-initem\">\n                        {% if (component.blank) { %}\n                            {%= component.blank %}\n                        {% } else { %}\n                            {%=(state.blankText || 'ç®åè¿æ²¡æåå®¹')%}\n                        {% } %}\n                        </div>\n                    </div>\n                </div>\n\n            {% } %}\n\n        </div>\n\n        {%= component.ft %}\n\n    </article>\n\n</div>\n\n"}}),define("cardkit/tpl/scaffold/hdwrap",[],function(){return{template:'\n{% if (component.hd) { %}\n<header class="ck-hd-wrap">\n\n    {%= component.hd %}\n\n    {% if (component.hdOpt.length) { %}\n        <div class="ck-hdopt-wrap">\n            {%= component.hdOpt.join(\'\') %}\n        </div>\n    {% } %}\n\n</header>\n{% } %}\n'}}),define("cardkit/card/list",["darkdom","mo/template/micro","cardkit/tpl/scaffold/hdwrap","cardkit/tpl/list","cardkit/card/item","cardkit/card/common/scaffold"],function(a,b,c,d,e,f,g){var h=g("darkdom"),i=g("mo/template/micro").convertTpl,j=i(g("cardkit/tpl/scaffold/hdwrap").template),k=i(g("cardkit/tpl/list").template),l=g("cardkit/card/item"),m=g("cardkit/card/common/scaffold"),n={item:l.item,list:function(){var a=h({enableSource:!0,render:function(a){var b=a.state;return a.hasSplitHd="true"===b.plainStyle||"true"===b.plainHdStyle||"split"===b.subtype,a.hdwrap=j(a),k(a)}});return a.contain(m),a.contain("item",n.item),a}};return n}),define("cardkit/tpl/box",[],function(){return{template:"<div class=\"ck-box-card\"\n        data-style=\"{%= state.subtype %}\"\n        {%= state.paperStyle ? 'data-cfg-paper=\"true\" ' : '' %}\n        {%= state.plainStyle ? 'data-cfg-plain=\"true\" ' : '' %}\n        {%= state.plainHdStyle ? 'data-cfg-plainhd=\"true\" ' : '' %}>\n\n    {% if (hasSplitHd) { %}\n        {%= hdwrap %}\n    {% } %}\n\n    <article class=\"ck-card-wrap\">\n\n        {% if (!hasSplitHd) { %}\n            {%= hdwrap %}\n        {% } %}\n\n        {% if (!isBlank) { %}\n            <section>{%= content %}</section>\n        {% } %}\n\n        {%= component.ft %}\n\n    </article>\n\n</div>\n"}}),define("cardkit/tpl/box/content",[],function(){return{template:'<div class="ck-content">{%= content %}</div>\n'}}),define("cardkit/card/box",["darkdom","mo/template/micro","cardkit/helper","cardkit/tpl/box/content","cardkit/tpl/scaffold/hdwrap","cardkit/tpl/box","cardkit/card/common/scaffold"],function(a,b,c,d,e,f,g,h){var i=h("darkdom"),j=h("mo/template/micro").convertTpl,k=h("cardkit/helper"),l=j(h("cardkit/tpl/box/content").template),m=j(h("cardkit/tpl/scaffold/hdwrap").template),n=j(h("cardkit/tpl/box").template),o=h("cardkit/card/common/scaffold"),p={content:function(){return i({enableSource:!0,sourceAsContent:!0,render:l})},box:function(){var a=i({enableSource:!0,render:function(a){return a.isBlank=k.isBlank(a.content),a.hasSplitHd="true"===a.state.plainStyle||"true"===a.state.plainHdStyle,a.hdwrap=m(a),n(a)}});return a.contain(o),a.contain("content",p.content,{content:!0}),a}};return p}),define("cardkit/tpl/form",[],function(){return{template:"<div class=\"ck-form-card{%= (state.blankText === 'false' ? ' no-blank' : '') %}\"\n        data-style=\"{%= state.subtype %}\"\n        {%= state.plainHdStyle ? 'data-cfg-plainhd=\"true\" ' : '' %}>\n\n    {% if (hasSplitHd) { %}\n        {%= hdwrap %}\n    {% } %}\n\n    <article class=\"ck-card-wrap\">\n\n        {% if (!hasSplitHd) { %}\n            {%= hdwrap %}\n        {% } %}\n\n        {% if (component.item.length) { %}\n            {% component.item.forEach(function(item){ %}\n                {%= item %}\n            {% }); %}\n        {% } else { %}\n            <div class=\"ck-item blank\">\n            {% if (component.blank) { %}\n                {%= component.blank %}\n            {% } else { %}\n                {%=(state.blankText || 'ç®åè¿æ²¡æåå®¹')%}\n            {% } %}\n            </div>\n        {% } %}\n\n        {%= component.ft %}\n\n    </article>\n\n</div>\n"}}),define("cardkit/tpl/form/item",[],function(){return{template:'<div class="ck-item">{%= content %}</div>\n'}}),define("cardkit/card/form",["darkdom","mo/template/micro","cardkit/tpl/form/item","cardkit/tpl/box/content","cardkit/tpl/scaffold/hdwrap","cardkit/tpl/form","cardkit/card/common/scaffold"],function(a,b,c,d,e,f,g,h){var i=h("darkdom"),j=h("mo/template/micro").convertTpl,k=j(h("cardkit/tpl/form/item").template),l=j(h("cardkit/tpl/box/content").template),m=j(h("cardkit/tpl/scaffold/hdwrap").template),n=j(h("cardkit/tpl/form").template),o=h("cardkit/card/common/scaffold"),p={content:function(){return i({enableSource:!0,sourceAsContent:!0,render:l})},item:function(){return i({enableSource:!0,render:k}).contain("content",p.content,{content:!0})},form:function(){var a=i({enableSource:!0,render:function(a){return a.hasSplitHd="true"===a.state.plainStyle||"true"===a.state.plainHdStyle,a.hdwrap=m(a),n(a)}});return a.contain(o),a.contain("item",p.item),a}};return p}),define("cardkit/tpl/mini",[],function(){return{template:'<div class="ck-mini-card{%= (state.blankText === \'false\' ? \' no-blank\' : \'\') %}"\n        data-style="{%= state.subtype %}">\n\n    {% if (hasSplitHd) { %}\n        {%= hdwrap %}\n    {% } %}\n\n    <article class="ck-card-wrap {%= (component.item.length > 1 ? \'slide\' : \'\') %}">\n\n        {% if (!hasSplitHd) { %}\n            {%= hdwrap %}\n        {% } %}\n        \n        <div class="ck-list-wrap">\n\n            {% if (component.item.length) { %}\n\n                <div class="ck-list" style="width:{%= listWidth %};">\n                {% component.item.forEach(function(item){ %}\n                    <div class="ck-col" style="width:{%= itemWidth %};">\n                        {%= item %}\n                    </div>\n                {% }); %}\n                </div>\n\n            {% } else { %}\n\n                <div class="ck-list">\n                    <div class="ck-item blank">\n                        <div class="ck-initem">\n                        {% if (component.blank) { %}\n                            {%= component.blank %}\n                        {% } else { %}\n                            {%=(state.blankText || \'ç®åè¿æ²¡æåå®¹\')%}\n                        {% } %}\n                        </div>\n                    </div>\n                </div>\n\n            {% } %}\n\n        </div>\n\n        {%= component.ft %}\n\n    </article>\n\n</div>\n\n'}}),define("cardkit/card/mini",["darkdom","mo/template/micro","cardkit/tpl/scaffold/hdwrap","cardkit/tpl/mini","cardkit/card/item","cardkit/card/common/scaffold"],function(a,b,c,d,e,f,g){var h=g("darkdom"),i=g("mo/template/micro").convertTpl,j=i(g("cardkit/tpl/scaffold/hdwrap").template),k=i(g("cardkit/tpl/mini").template),l=g("cardkit/card/item"),m=g("cardkit/card/common/scaffold"),n={item:l.item,mini:function(){var a=h({enableSource:!0,render:function(a){a.hasSplitHd=!0,a.hdwrap=j(a);var b=a.component.item.length;return a.listWidth=b>1?100*b*.94+"%":"",a.itemWidth=Math.floor(1e3/b)/10+"%",k(a)}});return a.contain(m),a.contain("item",n.item),a}};return n}),define("cardkit/tpl/page",[],function(){return{template:'\n<div class="ck-page-card{%= !hasHeader ? \' no-header\' : \'\' %}{%= !component.banner || componentData.banner.isBlank ? \'\' : \' with-banner\' %}" \n        data-style="{%= state.subtype %}"\n        data-page-active="{%= state.isPageActive || \'false\' %}"\n        data-deck-active="{%= state.isDeckActive || \'false\' %}"\n        data-deck="{%= (state.deck || \'main\') %}"\n        data-curdeck="{%= state.currentDeck %}"\n        data-cardid="{%= state.cardId %}">\n\n    {% if (hasHeader) { %}\n    <div class="ck-header">\n        {%= component.nav %}\n        {%= component.title %}\n        {%= component.actionbar %}\n    </div>\n    {% } %}\n\n    {%= component.banner %}\n\n    <div class="ck-article">\n        {% if (!isBlank) { %}\n            {%= content %}\n        {% } else { %}\n            <div class="ck-blank-card">\n                <article class="ck-card-wrap">\n                    {% if (component.blank) { %}\n                        {%= component.blank %}\n                    {% } else { %}\n                        <div>{%=(state.blankText || \'ç®åè¿æ²¡æåå®¹\')%}</div>\n                    {% } %}\n                </article>\n            </div>\n        {% } %}\n    </div>\n\n    {% if (component.footer) { %}\n    <div class="ck-footer">{%= component.footer %}</div>\n    {% } %}\n\n    <a class="ck-page-link-mask ck-link" href="#{%= state.cardId %}"></a>\n\n</div>\n\n'}}),define("cardkit/tpl/page/actionbar/action",[],function(){return{template:'\n<span class="ck-item">\n    <button type="button" class="ck-option" \n        value="{%= id %}">{%= state.label %}</button>\n    {%= content %}\n</span>\n'}}),define("cardkit/tpl/page/actionbar",[],function(){return{template:'<div class="ck-top-actions">\n\n    {% if (overflowActions.length) { %}\n    <span class="ck-top-overflow"\n            data-title="More actions...">\n        {% overflowActions.forEach(function(action){ %}\n            {%= action %}\n        {% }); %}\n    </span>\n    {% } %}\n\n    {% visibleActions.forEach(function(action){ %}\n        {%= action %}\n    {% }); %}\n\n</div>\n'}}),define("cardkit/tpl/page/banner",[],function(){return{template:'<div class="ck-top-banner"\n        {%= state.plainStyle ? \'data-cfg-plain="true" \' : \'\' %}>\n    <div class="ck-top-banner-inner">{%= content %}</div>\n</div>\n'}}),define("cardkit/tpl/page/nav",[],function(){return{template:'{% if (content) { %}\n<span class="ck-top-nav">{%= content %}</span>\n{% } else { %}\n<a class="ck-top-nav ck-link" href="{%= state.link %}"></a>\n{% } %}\n'}}),define("cardkit/tpl/page/title",[],function(){return{template:'<div class="ck-top-title">{%= content %}</div>\n'}}),define("cardkit/card/page",["darkdom","mo/lang/mix","mo/template/micro","cardkit/helper","cardkit/tpl/page/title","cardkit/tpl/page/nav","cardkit/tpl/page/banner","cardkit/tpl/page/actionbar","cardkit/tpl/page/actionbar/action","cardkit/tpl/page","cardkit/card/box","cardkit/card/list","cardkit/card/mini","cardkit/card/form"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){return"true"===a.newValue?(a.root.css("min-height",window.innerHeight+"px").attr("data-page-active",!0),setTimeout(function(){a.root.addClass("topbar-enabled"),window.scrollTo(0,0)},100)):a.root.attr("data-page-active",!1).removeClass("topbar-enabled"),!1}function q(a){return"true"===a.newValue?a.root.attr("data-deck-active",!0):(a.root.attr("data-deck-active",!1),setTimeout(function(){window.scrollTo(0,0)},300)),!1}function r(a){return a.root.attr("data-curdeck",a.newValue),!1}var s=o("darkdom"),t=o("mo/lang/mix"),u=o("mo/template/micro").convertTpl,v=o("cardkit/helper"),w=u(o("cardkit/tpl/page/title").template),x=u(o("cardkit/tpl/page/nav").template),y=u(o("cardkit/tpl/page/banner").template),z=u(o("cardkit/tpl/page/actionbar").template),A=u(o("cardkit/tpl/page/actionbar/action").template),B=u(o("cardkit/tpl/page").template),C={box:o("cardkit/card/box").box,list:o("cardkit/card/list").list,mini:o("cardkit/card/mini").mini,form:o("cardkit/card/form").form},D={title:function(){return s({unique:!0,enableSource:!0,render:w})},nav:function(){return s({unique:!0,enableSource:!0,render:x})},banner:function(){return s({unique:!0,enableSource:!0,render:function(a){return a.isBlank=v.isBlank(a.content),y(a)}})},action:function(){return s({enableSource:!0,entireAsContent:!0,render:A})},actionbar:function(){return s({unique:!0,enableSource:!0,render:function(a){var b=a.state.limit||1;return a.visibleActions=[],a.overflowActions=[],a.componentData.action.forEach(function(c,d){var e=a.component.action[d];this.length<b&&!c.state.forceOverflow?this.push(e):a.overflowActions.push(e)},a.visibleActions),z(a)}}).contain("action",D.action).forward("control:enable .ck-item > *","control:enable").forward("control:disable .ck-item > *","control:disable").forward("actionView:confirm .ck-top-overflow","overflows:confirm")},blank:function(){return s({unique:!0,enableSource:!0,render:function(a){return"<div>"+a.content+"</div>"}})},footer:function(){return s({unique:!0,enableSource:!0,render:function(a){return"<div>"+a.content+"</div>"}})},page:function(){var a=s({render:function(a){var b=a.component;return a.hasHeader=b.title||b.nav||b.actionbar,a.isBlank=v.isBlank(a.content),B(a)}}),b=t.copy(D);return delete b.page,a.contain(b),a.contain(C,{content:!0}),a.response("state:isPageActive",p),a.response("state:isDeckActive",q),a.response("state:currentDeck",r),a}};return D}),define("cardkit/spec",["cardkit/spec/page","cardkit/card/page","cardkit/spec/box","cardkit/card/box","cardkit/spec/list","cardkit/card/list"],function(a,b,c,d,e,f,g){return{page:[g("cardkit/spec/page"),g("cardkit/card/page")],box:[g("cardkit/spec/box"),g("cardkit/card/box")],list:[g("cardkit/spec/list"),g("cardkit/card/list")]}}),define("cardkit",["mo/lang","dollar","mo/browsers","cardkit/spec","cardkit/oldspec","cardkit/ui","cardkit/supports","cardkit/bus"],function(a,b,c,d,e,f,g,h){function i(a){"true"!==a.getDarkState("isPageActive")&&a.trigger("pageCard:willOpen").setDarkState("isPageActive",!0,{update:!0}).trigger("pageCard:opened")}function j(a){"true"===a.getDarkState("isPageActive")&&a.trigger("pageCard:willClose").setDarkState("isPageActive",!1,{update:!0}).trigger("pageCard:closed")}function k(a){"true"!==a.getDarkState("isDeckActive")&&a.trigger("pageCard:willFocus").setDarkState("isDeckActive",!0,{update:!0}).trigger("pageCard:focused")}function l(a){"true"===a.getDarkState("isDeckActive")&&a.trigger("pageCard:willBlur").setDarkState("isDeckActive",!1,{update:!0}).trigger("pageCard:blured")}function m(a){a.setDarkState("currentDeck",this,{update:!0})}var n,o,p="main",q="unmount-page",r=/#(.+)$/,s=document,t=s.body,u={},v={},w={},x={},y={appWrapper:null,defaultPage:"ckDefault",oldStyle:!1},z={init:function(b){this._config=a.config({},b,y),this.initSpec(),this.initView()},initSpec:function(){a.each(d,function(a,b){var c=this._config.oldStyle?e[b][0]:a[0];this.component(b,a[1][b]()),this.spec(b,c)},this)},initView:function(){this.wrapper=b(this._config.appWrapper||t),c.webview&&this.wrapper.addClass("ck-in-webview"),b(window).on("hashchange",function(){z.openPage()}),f.init(this._config)},component:function(a,b){return b?void(u[a]=b):u[a]},spec:function(a,b){return b?void(v[a]=b):v[a]},guard:function(a){return w[a]||(w[a]=this.component(a).createGuard()),w[a]},render:function(a,b){var c=this.spec(a),d=this.guard(a);c&&d&&(c(d,b),d.mount())},openPage:function(c){if(c=this.findPage(c),o||!c[0]||!this.isPage(c))return!1;window.scrollTo(0,0);var d=x[p];d||(d=b("#"+this._config.defaultPage),c[0]!==d[0]&&(x[p]=d,this.openPage(d))),o=!0,c[0].isMountedDarkDOM||(c.addClass(q),this.render("page"),c.removeClass(q));var e=c.getDarkState("deck")||p,f=x[e];return d=x[n],x[e]=c,a.each(x,m,e),e!==n&&(n=e,d&&b.contains(t,d[0])&&l(d)),f&&f[0]!==c[0]&&b.contains(t,f[0])&&j(f),i(c),k(c),o=!1,!0},resetPage:function(a){a=this.findPage(a),a[0]&&a.resetDarkDOM()},findPage:function(a){if(a&&"string"!=typeof a)a=b(a);else{var c=r.exec(location.href);a=a||c&&c[1]||this._config.defaultPage,a=b("#"+a)}return a},isPage:function(a){var b=(this._config.oldStyle?e:d).page[0];return a.is(b.SELECTOR)||b.SELECTOR_OLD&&a.is(b.SELECTOR_OLD)},isLandscape:function(){return window.innerWidth/window.innerHeight>1.1},delegate:f.delegate,ui:f,event:h};return a.mix(z,f.action),a.mix(z,f.component),z.openURL=z.openLink,z.modalCard.event.on("open",function(a){a.lastDecktop=x[n],z.openPage(a.pageNode())}).on("willUpdateContent",function(a){z.resetPage(a.pageNode())}).on("close",function(a){z.openPage(a.lastDecktop)}),z}),require.config({baseUrl:"vendor/"}),define("mo/easing/functions",[],function(){}),define("mo/mainloop",[],function(){}),require(["cardkit"],function(){});