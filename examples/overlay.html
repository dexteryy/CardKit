<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>CardKit Reference</title>
<meta http-equiv="Cache-control" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="format-detection" content="telephone=no">

<link href="dist/css/main.css" rel="stylesheet">
<link href="css/shCoreDefault.css" rel="stylesheet">
<link href="css/console.css" rel="stylesheet">
<link href="css/common.css" rel="stylesheet">
<style>
</style>
<script>function ckControl(){return false}</script>
</head>
<body ontouchstart="return ckControl()">

<div class="ck-root"><div class="ck-main">
    
<header class="ck-header">
    
<span class="ck-top-title">CardKit Ref</span>
<span class="ck-top-nav"><span class="notice"></span></span>
<span class="ck-top-actions"></span>

<div class="ckcfg-navdrawer">
    <div class="ckd-hd">
        <h2>CardKit Reference</h2>
    </div>
    <div class="ckd-content">
        <div class="search">
            <a class="ck-modal-link" href="#"
                data-url="formcontent.html">search</a>
        </div>
        <ul>
            <li><a class="ck-link" href="index.html">Home</a></li>
        </ul>
        <h6>Cross-platform</h6>
        <ul>
            <li><a class="ck-link" href="grade.html">Graded Browser Support</a></li>
            <li><a class="ck-link" href="browsers.html">Compatibility testing</a></li>
            <li><a class="ck-link" href="#consoleCard">Console</a></li>
        </ul>
        <h6>Component</h6>
        <ul>
            <li><a class="ck-link" href="control.html">Control</a></li>
            <li><a class="ck-link" href="picker.html">Picker</a></li>
            <li><a class="ck-link" href="overlay.html">Overlay</a></li>
        </ul>
        <h6>Unit</h6>
        <ul>
            <li><a class="ck-link" href="box.html">Box</a></li>
            <li><a class="ck-link" href="list.html">List</a></li>
            <li><a class="ck-link" href="mini.html">Mini</a></li>
            <li><a class="ck-link" href="form.html">Form</a></li>
            <li><a class="ck-link" href="extra.html">Extra</a></li>
        </ul>
    </div>
</div>

<div class="ckcfg-card-actions">
    <button type="button" class="ckd-item placeholder"></button>
</div>

<div class="ckcfg-page-actions">
    <button type="button" class="ckd-overflow-item switchstyle">切换界面风格</button>
</div>

</header>

<div class="ck-wrapper">
    
    <div class="ck-card" id="ckDefault">

        <div class="ck-banner-unit topbox">
            <h2>CardKit / Component</h2>
        </div>

        <div class="ck-box-unit" data-cfg-paper="true">
            <header class="ckd-hd">Overlay</header>
        </div>

        <div class="ck-list-unit" data-style="menu">
            <header class="ckd-hd">Source code</header>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/mod/moui/modalview.js" class="ckd-item ckd-link-extern">moui/modalview</a>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/mod/moui/actionview.js" class="ckd-item ckd-link-extern">moui/actionview</a>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/mod/moui/growl.js" class="ckd-item ckd-link-extern">moui/growl</a>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/cardkit/view/modalview.js" class="ckd-item ckd-link-extern">cardkit/view/modalview</a>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/cardkit/view/actionview.js" class="ckd-item ckd-link-extern">cardkit/view/actionview</a>
            <a href="https://github.com/douban-f2e/CardKit/tree/master/js/cardkit/view/growl.js" class="ckd-item ckd-link-extern">cardkit/view/growl</a>
        </div>

        <div class="ck-list-unit" data-style="more" data-cfg-paper="true">
            <a href="#consoleCard" class="ckd-item">Console</a>
            <a href="#demoScriptCard" class="ckd-item">Custom script</a>
            <a href="#optionsCard" class="ckd-item">Configure options</a>
            <a href="#apiCard" class="ckd-item">API</a>
        </div>

        <div class="ck-box-unit" data-cfg-paper="true">
            <header class="ckd-hd">Usages</header>
        </div>

        <div class="ck-box-unit" data-cfg-plain="true">
            <header class="ckd-hd">Modal View</header>
        </div>

        <div class="ckcfg-card-actions">
            <div class="ckd-overflow-item" data-source="ckdActionbarItem1"></div>
            <button type="button" class="ckd-item ck-modal-button" 
                data-title="动作3"
                data-url="formcontent.html">动作3</button>
            <a href="index.html" target="_self" class="ckd-item ck-link-direct">index.html</a>
        </div>

        <div class="ck-form-unit">
            <header class="ckd-hd">Examples</header>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-modal-button demo" 
    data-url="formcontent.html" 
    data-title="ajax">Open</button>
<!--demo end-->
                <label>通过ajax接口加载内容</label>
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-modal-button demo" 
    data-json-url="data/form.json" 
    data-title="json">Open</button>
<!--demo end-->
                <label>通过json接口加载内容</label>
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-modal-button demo" 
    data-iframe-url="formpage.html" 
    data-title="iframe">Open</button>
<!--demo end-->
                <label>通过iframe加载内容</label>
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-modal-button demo" 
    data-source="formBox" 
    data-title="inline html">Open</button>
<!--demo end-->
                <label>用隐藏的html作内容</label>
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
        </div>

        <div class="ck-box-unit" data-cfg-plain="true">
            <header class="ckd-hd">Action View</header>
        </div>

        <div class="ck-form-unit">
            <header class="ckd-hd">Examples</header>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-select demo"
        data-fluid="true"
        data-title="Choose the page">
    <span>Choose the page</span>
    <a href="picker.html" class="ck-option" target="_self">picker.html</a>
    <a href="control.html" class="ck-option" target="_self">control.html</a>
    <a href="index.html" class="ck-option" target="_self">index.html</a>
</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<div class="ck-select actions1 demo"
        data-fluid="true"
        data-title="Choose the order">
    <input type="hidden" value="date">
    <button type="button" value="price" class="ck-option">Order by price</button>
    <button type="button" value="date" class="ck-option enabled">Order by date</button>
    <button type="button" value="alpha" class="ck-option">Order by alphabet</button>
    <button type="button" value="editor" class="ck-option">Order by editor</button>
</div>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-actions-button actions2 demo"
        data-fluid="true"
        data-multiselect="true"
        data-confirm-text="继续"
        data-cancel-text="放弃"
        data-title="Choose members"
        data-content="1. member A<br>2. member B<br>3. member C<br>4. member D">
    <span>Choose members</span>
    <input class="ck-option" type="button" value="A">
    <input class="ck-option enabled" type="button" value="B">
    <input class="ck-option" type="button" value="C">
    <input class="ck-option" type="button" value="D">
</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-actions-button actions3 demo"
        data-fluid="true">
    <span>Jump list</span>
    <a href="picker.html" class="ck-option ck-link-direct">picker.html</a>
    <a href="control.html" class="ck-option" target="_self">control.html</a>
    <a href="index.html" class="ck-option" target="_self">index.html</a>
    <a href="tel:114" class="ck-option" target="_top">tel:114</a>
</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="my-actions-button ckbase-btn demo"
        data-fluid="true">
    <span>Generated Action menu</span>
</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
                <div class="ck-folder"
                        data-enable-label="Hide the JS" 
                        data-label="header">
                    <header>Show the JS</header>
                    <div class="democode content" jssource="jsDemoMyActions"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="my-confirm-button ckbase-btn demo"
        data-fluid="true">
    <span>Confirm/Alert (No Options)</span>
</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
                <div class="ck-folder"
                        data-enable-label="Hide the JS" 
                        data-label="header">
                    <header>Show the JS</header>
                    <div class="democode content" jssource="jsDemoMyConfirm"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<a class="ck-confirm-link demo" 
        href="index.html" 
        target="_blank"
        data-title="确认要跳转吗？">
Confirm link
</a>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
        </div>

        <div class="ck-box-unit" data-cfg-plain="true">
            <header class="ckd-hd">Growl</header>
        </div>

        <div class="ck-form-unit">
            <header class="ckd-hd">Examples</header>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-growl-button demo"
    data-corner="center"
    data-content="测试！">Tips A</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
            <div class="ckd-item">
<!--demo-->
<button type="button" class="ck-growl-button demo"
    data-expires="1000"
    data-content="测试！">Tips B</button>
<!--demo end-->
                <div class="ck-folder"
                        data-enable-label="Hide the HTML" 
                        data-label="header">
                    <header>Show the HTML</header>
                    <div class="democode content"></div>
                </div>
            </div>
        </div>

    </div>

    <div class="ck-card" id="consoleCard">

        <div class="ckcfg-card-actions">
            <div class="ckd-overflow-item" data-source="ckdActionbarItem1"></div>
        </div>

        <div class="ck-box-unit" data-cfg-paper="true">
            <header class="ckd-hd">Console</header>
            <div id="console"></div>
        </div>

        <script type="text/cardscript">
        this.addEventListener('card:ready', function(e){
            require(['mo/console'], function(console){
                console.config({
                    record: false,
                    output: e.card.find('#console')[0]
                });
            });
        });
        </script>

    </div>

    <div class="ck-card" id="demoScriptCard">

        <div class="ckcfg-card-actions">
        </div>

        <div class="ck-box-unit" data-cfg-plainhd="true">
            <header class="ckd-hd">Custom script</header>
            <div class="ck-folder enabled"
                    data-disable-label="Hide the code" 
                    data-label="header">
                <header>Hide the code</header>
                <div class="democode content" jssource="jsdemo1"></div>
            </div>
        </div>

    </div>

    <div class="ck-card" id="optionsCard">

        <div class="ckcfg-card-actions" data-source="ckdActionbar">
        </div>

    </div>

    <div class="ck-card" id="apiCard">

        <div class="ckcfg-card-actions" data-source="ckdNothing">
        </div>

    </div>

    <div class="ck-card ck-loading" id="ckLoading">
        <div>
            <p><span></span><span></span><span></span></p>
            <p>加载中...</p>
        </div>
    </div>

    <footer class="ck-footer">
        <div class="copyright">&copy; 2005－2012 douban.com, all rights reserved</div>
    </footer>

</div>

<div class="ck-raw">

    <div class="ckdActionbar">
        <button type="button" class="ckd-overflow-item ck-modal-button ckdActionbarItem1" data-url="formcontent.html" data-title="动作1">动作1</button>
        <button type="button" class="ckd-item ck-modal-button" data-url="formcontent.html" data-title="动作2">动作2</button>
    </div>

<script type="text/template" class="formBox">
<form action="data/post_result.json" id="inlineForm1">
<div class="ck-form-unit">
    <div class="ckd-item">
        <label class="ck-title">章节名</label>
        <input type="text" value="" name="a" placeholder="章节名">
    </div>
    <div class="ckd-item">
        <label class="ck-title">笔记内容</label>
        <textarea name="b" placeholder="笔记内容"></textarea>
        <label><em>注释</em></label>
    </div>
</div>
</form>
</script>

<script type="text/cardscript" class="formBox">
console.info('execute js for formBox');
require([
    'dollar', 
    'mo/network', 
    'cardkit/app'
], function($, net, ck){
    ck.event.once('readycardchange', function(){
        // access DOM elements in form unit
    });
    ck.modalCard.event.bind('confirmOnThis', function(modal){
        var form = $('#inlineForm1');
        modal.showLoading();
        net.ajax({
            url: form.attr('action'),
            type: 'post',
            data: new FormData(form[0]),
            processData: false,
            contentType: false,
            success: function(maybe_json){
                modal.hideLoading();
                var json = net.parseJSON(maybe_json) || { e: 0 };
                if (!json.e) {

                    location.href = 'redirect.html';

                    /**
                     * other usecase:
                     */

                    //location.href = 'http://www.douban.com/photos/album/46548339/';

                    //ck.openURL('picker.html');

                    //location.reload();

                    //modal.ok().then(function(){
                        //location.reload();
                    //});

                } else {
                    ck.growl({
                        expires: 3000,
                        content: '提交出错！',
                        corner: 'bottom'
                    }).open();
                }
            }
        });
    });
});
</script>

</div>

</div></div>

<script src="js/shCore.js"></script>
<script src="js/shBrushXml.js"></script>
<script src="js/shBrushJScript.js"></script>
<script src="dist/js/main.js"></script>
<!-- COLLECTED JS -->
<script id="jsdemo1">
require([
    'dollar',
    'cardkit/app',
    'cardkit/pageready'
], function($, ck){

    ck.confirm('This is a overlay', function(){
        ck.showLoading();
        setTimeout(function(){
            ck.hideLoading();
            ck.alert('This a overlay too', {
                title: 'Tips',
                cancelText: 'I see...'
            });
        }, 1000);
    }, { 
        title: 'Tips',
        cancelText: 'Cancel',
        confirmText: 'OK'
    });

    var notify = ck.growl({
        corner: 'bottom'
    });

    ck.delegate.on('actionView:confirm', {

        '.actions1': when_confirm,

        '.actions2': when_confirm

    });

    function when_confirm(e){
        var result = e.component.val();
        console.info('value: ', result);
        notify.set({
            content: 'value: ' + result
        }).open();
    }

});
</script>
<script id="jsDemoMyActions">
require([
    'dollar',
    'cardkit/app',
    'cardkit/pageready'
], function($, ck){
    var notify = ck.growl({
        corner: 'bottom'
    });
    $('.my-actions-button').bind('actionView:confirm', function(e){
        var result = e.component.val();
        console.info('value: ', result);
        notify.set({
            content: 'value: ' + result
        }).open();
    });
    $('.my-actions-button').bind('tap', function(){
        ck.actionView(this, {
            title: 'This is title',
            content: 'This is content<br>This is content<br>This is content<br>This is content<br>This is content<br>',
            options: [
                '<a href="index.html" class="ck-option" target="_self">index.html</a>',
                '<a href="control.html" class="ck-option" target="_self">control.html</a>',
                '<a href="picker.html" class="ck-option" target="_self">picker.html</a>',
                '<a href="overlay.html" class="ck-option" target="_self">overlay.html</a>',
                '<a href="box.html" class="ck-option" target="_self">box.html</a>',
                '<a href="mini.html" class="ck-option" target="_self">mini.html</a>',
                '<a href="list.html" class="ck-option" target="_self">list.html</a>',
                '<a href="unit.html" class="ck-option" target="_self">unit.html</a>',
                '<a href="browsers.html" class="ck-option" target="_self">browsers.html</a>',
                '<a href="tel:114" class="ck-option" target="_top">tel:114</a>',
                '<a href="#C" class="ck-option">C</a>',
                '<input class="ck-option" type="button" value="A">',
                '<input class="ck-option" type="button" value="B">'
            ].join('')
        }).open();
    });
});
</script>
<script id="jsDemoMyConfirm">
require([
    'dollar',
    'cardkit/app',
    'cardkit/pageready'
], function($, ck){

    ck.delegate.on('actionView:confirm', {
        '.my-confirm-button': function(){
            location.reload(true);
        }
    }).on('tap', {
        '.my-confirm-button, .my-confirm-button span': function(){
            var me = $(this);
            if (!me.hasClass('my-confirm-button')) {
                me = me.parent();
            }
            ck.actionView(me, {
                title: 'This is title',
                content: 'This is content',
                multiselect: true,
                confirmText: '确定'
            }).open();
        }
    });

});
</script>
<script src="js/common.js"></script>
</body>
</html>
