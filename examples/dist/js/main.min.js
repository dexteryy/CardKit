(function(){function t(t,e,n){var r="string"==typeof n;n||(e?f(e)?n=a(c(l(t))):(n=e,e=null):(n=t,t=""),"string"!=typeof t?(e=t,t=""):(r="string"==typeof n,r||e||(e=i(n)))),t=t&&c(t);var o=t&&E.mods[t];if(E.debug||!o||!o.name||!(r&&2==o.loaded||o.exports)){r&&E.enable_ozma&&(e=null);var s=p(this)?this:_;if(o=E.mods[t]={name:t,url:o&&o.url,host:s,deps:e||[]},""===t&&(v=o),"string"!=typeof n)o.block=n,o.loaded=2;else{var u=E.aliases;u&&(n=n.replace(/\{(\w+)\}/g,function(t,e){return u[e]||""})),o.url=n}o.block&&!d(o.block)&&(o.exports=n)}}function e(t,o,s){if("string"==typeof t){if(!o)return(E.mods[c(l(t,g))]||{}).exports;t=[t]}else o||(o=t,t=i(o));var a=p(this)?this:_;s||(s={url:g&&g.url});for(var u,h=0,d=n.call(a,t,s),f=0,m=d.length;m>f;f++)u=d[f],u.is_reset&&(u=E.mods[u.name]),u.url&&2!==u.loaded&&(h++,u.loaded=1,R(u,function(){this.loaded=2;var n=v;n&&(n.name=this.name,n.url=this.url,E.mods[this.name]=n,v=null),0>=--h&&e.call(a,t,o,s)}));h||(s.deps=t,s.host=a,s.block=o,setTimeout(function(){r(t,s),d.push(s),M(d.reverse())},0))}function n(e,i,o){if(o=o||[],!e[0])return o;var s,u=o.history;if(u||(u=o.history={}),e[1])s=e,e=!1;else{var h,d=e[0],f=k.exec(d);f&&(d=f[2],f=f[1]);var p=c(d);if(!E.mods[p]&&!S[p]){var m=c(l(d,i));p!==m&&(E.mods[i.url+":"+p]=m,p=m),E.mods[m]||t(m,a(m))}if(e=i=E.mods[p],!e)return o;if("new"===f?e={is_reset:!0,deps:e.deps,name:p,newname:f+"!"+p,host:this}:h=e.name,u[h])return o;u[h]?s=[]:(s=e.deps||[],h&&(u[h]=!0))}for(var v=s.length-1;v>=0;v--)u[s[v]]||n.call(this,[s[v]],i,o);return e&&(r(s,e),o.push(e)),o}function i(t){var e=t.hiddenDeps||[];if(!t.hiddenDeps){var n=""+t,i=null;for(e=t.hiddenDeps=[];i=y.exec(n);)e.push(i[0].slice(10,-2))}return e.slice()}function r(t,e){N.call(t.slice(),function(n,i){var r=this[e.url+":"+c(n)];"string"==typeof r&&(t[i]=r)},E.mods)}function o(t){for(var e in t)if("aliases"===e){E[e]||(E[e]={});for(var n in t[e])E[e][n]=t[e][n];var i=E.mods;for(var r in i)i[r].name=c(r),i[i[r].name]=i[r]}else E[e]=t[e]}function s(t){return t.replace(/(.+?)(_src.*)?(\.\w+)$/,function(t,e,n,i){return e+(n&&"_combo"||"_pack")+i})}function a(t){return w.test(t)?t:t+".js"}function c(t){var e=E.aliases;return e&&(t=t.replace(T,function(t,n){return e[n]||n+"/"})),t}function l(t,e){var n=C.exec(t);return n&&e&&(t=(e.url||"").replace(/[^\/]+$/,"")+n[0]),u(t)}function u(t){t=t.replace(x,"$1");for(var e,n,i=t,r=/(\.\.\/)+/g;e=(r.exec(i)||[])[0];)n=e.match(/\.\.\//g).length,t=t.replace(RegExp("([^/\\.]+/){"+n+"}"+e),"");return t.replace(/\/\//g,"/")}function h(t,e){var n=p(this)?this.document:document,i=n.createElement("script");i.type="text/javascript",i.async="async",e?d(e)&&(e={callback:e}):e={},e.charset&&(i.charset=e.charset),i.src=t;var r=n.getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(t,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0,!n&&e.callback&&e.callback())},r.insertBefore(i,r.firstChild)}function d(t){return"[object Function]"===b.call(t)}function f(t){return"[object Array]"===b.call(t)}function p(t){return"setInterval"in t}function m(t){function e(){}return e.prototype=t,new e}var v,g,_=this,b=Object.prototype.toString,k=/(.*)!(.+)/,y=/\Wrequire\((['"]).+?\1\)/g,w=/\.(js|json)$/,C=/^\.+?\/.+/,x=/(^|\/)\.\//g,T=/^([\w\-]+)\//,S={require:1,exports:1,module:1,host:1,finish:1},E={mods:{}},O={},L={},A={},H={},j={},N=Array.prototype.forEach||function(t,e){for(var n=0,i=this.length;i>n;n++)n in this&&t.call(e,this[n],n,this)},M=function(t){for(var n,i,r,o,s,a,l,u,h,d,f=H;n=t.pop();)if(n.is_reset?(d=m(E.mods[n.name]),d.host=n.host,d.newname=n.newname,n=d,j[n.newname]||(j[n.newname]=[]),j[n.newname].push(n),n.exports=void 0):n.name&&(n=E.mods[n.name]||n),n.block&&(n.running||void 0===n.exports)){l=[],u={},h={id:n.name,filename:n.url,exports:u},a=n.deps.slice(),a[n.block.hiddenDeps?"unshift":"push"]("require","exports","module");for(var p=0,v=a.length;v>p;p++)switch(i=a[p]){case"require":l.push(e);break;case"exports":l.push(u);break;case"module":l.push(h);break;case"host":l.push(n.host);break;case"finish":r=n.name,f[r]?f[r].push(t):f[r]=[t],l.push(function(t){setTimeout(function(){void 0!==t&&(n.exports=t),f[r]&&(N.call(f[r],function(t){this(t)},M),delete f[r],n.running=0)},0)}),s=1;break;default:l.push(((j[i]||[]).pop()||E.mods[c(i)]||{}).exports)}if(!n.running){g=n,o=n.block.apply(n.host,l)||null,g=!1,u=h.exports,n.exports=void 0!==o?o:u;for(var _ in u){_&&(n.exports=u);break}}if(s){n.running=1;break}}},R=function(t,e){var n=t.url,i=O[n];if(i)1===i?e.call(t):i.push([e,t]);else{var r=t.name,o=L;if(t.deps&&t.deps.length&&1!==o[r]){if(o[r]=[t.deps.length,e],N.call(t.deps,function(e){var n=E.mods[c(e)];1!==this[e]&&n.url&&2!==n.loaded?(this[e]||(this[e]=[]),this[e].push(t)):o[r][0]--},A),o[r][0]>0)return;o[r]=1}i=O[n]=[[e,t]];var a=/^\w+:\/\//.test(n)?n:(E.enable_ozma&&E.distUrl||E.baseUrl||"")+(E.enableAutoSuffix?s(n):n);h.call(t.host||this,a,function(){N.call(i,function(t){t[0].call(t[1])}),O[n]=1,A[r]&&1!==A[r]&&(N.call(A[r],function(t){var e=this[t.name];0>=--e[0]&&(this[t.name]=1,R(t,e[1]))},o),A[r]=1)})}},I={VERSION:"2.5.2",define:t,require:e,config:o,seek:i,fetch:R,realname:c,basename:l,filesuffix:a,namesuffix:s,_getScript:h,_clone:m,_forEach:N,_isFunction:d,_isWindow:p};if(e.config=o,t.amd={jQuery:!0},_.window)_.oz=I,_.define=t,_.require=e;else{exports.oz=I,exports._config=E;for(var V in I)exports[V]=I[V];var P=function(t){return function(){return exports[t].apply(this,arguments)}};M=P("exec"),R=P("fetch"),e=P("require"),e.config=o}})(),require.config({enable_ozma:!0}),define("mo/domready",["finish"],function(t){var e,n=this,i=n.document,r="addEventListener",o="attachEvent",s="DOMContentLoaded",a="onreadystatechange";if("complete"===i.readyState)setTimeout(t,1);else if(i[r])e=function(){i.removeEventListener("READY",e,!1),t()},i[r](s,e,!1),n[r]("load",t,!1);else if(i[o]){e=function(){"complete"===i.readyState&&(i.detachEvent(a,e),t())},i[o](a,e),n[o]("load",t);var c=!1;try{c=null==n.frameElement}catch(l){}if(i.documentElement.doScroll&&c){var u=function(){try{i.documentElement.doScroll("left")}catch(e){return setTimeout(u,1),void 0}t()};u()}}}),define("mo/browsers",[],function(){var t,e,n,i={"360ee":2,"maxthon/3":2,qqbrowser:2,metasr:2,"360se":1,theworld:1,maxthon:1,tencenttraveler:-1};try{var r=this.navigator.userAgent.toLowerCase(),o=/(windows) nt ([\w.]+)/,s=/(mac) os \w+ ([\w.]+)/,a=/(iphone) os ([\w._]+)/,c=/(ipad) os ([\w.]+)/,l=/(android)[ ;]([\w.]*)/,u=/(\w+)[ \/]([\w.]+)[ \/]mobile.*safari/,h=/(\w+)[ \/]([\w.]+) safari/,d=/(webkit)[ \/]([\w.]+)/,f=/(opera)(?:.*version)?[ \/]([\w.]+)/,p=/(msie) ([\w.]+)/,m=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/(360se)/,g=/(360ee)/,_=/(360) \w+phone/,b=/(theworld)/,k=/(maxthon\/3)/,y=/(maxthon)/,w=/(tencenttraveler)/,C=/(qqbrowser)/,x=/(baidubrowser)/,T=/(ucbrowser)/,S=/(metasr)/;if(n=a.exec(r)||c.exec(r)||l.exec(r)||s.exec(r)||o.exec(r)||[],t=d.exec(r)||f.exec(r)||p.exec(r)||0>r.indexOf("compatible")&&m.exec(r)||[],"webkit"===t[1]){var E=u.exec(r)||h.exec(r);E&&(t[3]=t[1],t[4]=t[2],t[1]="version"===E[1]&&(("iphone"===n[1]||"ipad"===n[1])&&"mobilesafari"||"android"===n[1]&&"aosp"||"safari")||E[1],t[2]=E[2])}e=v.exec(r)||g.exec(r)||_.exec(r)||T.exec(r)||b.exec(r)||k.exec(r)||y.exec(r)||w.exec(r)||C.exec(r)||x.exec(r)||S.exec(r)||[]}catch(O){t=[],e=[]}var L={browser:t[1]||"",version:t[2]||"0",engine:t[3],engineversion:t[4]||"0",os:n[1],osversion:n[2]||"0",skin:e[1]||""};return"android"!==L.os||L.browser||(L.skin="ucbrowser",L.browser="aosp",L.engine="webkit",L.osversion="0"),t[1]&&(L[t[1]]=parseInt(L.version,10)||!0),e[1]&&(L.rank=i[L.skin]||0),L.shell=L.skin,L}),define("../cardkit/supports",["mo/browsers"],function(t){var e=this,n=e.history,i=e.document,r=i.body,o="webkit"===t.engine&&536>parseInt(t.engineversion,10),s="mac"===t.os||"windows"===t.os||"linux"===t.os,a={HISTORY:"pushState"in n&&!t.crios&&!t.aosp&&!o,NEW_WIN:!o&&!t.aosp,SAFARI_OVERFLOWSCROLL:"webkitOverflowScrolling"in r.style,PREVENT_WINDOW_SCROLL:!!t.mobilesafari,HIDE_TOPBAR:!!t.mobilesafari};return a.PREVENT_CACHE=!(a.HISTORY||!t.aosp&&!t.mobilesafari),a.CARD_SCROLL=!t.aosp&&!o&&!s,a.UNIVERSAL_TRANS=a.HISTORY&&a.CARD_SCROLL&&!t.aosp&&!o&&!s,a.WINDOW_SCROLL=!a.CARD_SCROLL||"android"===t.os,a}),define("mo/lang/es5",[],function(){function t(){}var e=this,n=e.Array,i=e.String,r=e.Object,o=e.Function,s=r.prototype,a=n.prototype,c=o.prototype,l=s.toString;c.bind||(c.bind=function(e){var n=this,i=a.slice.call(arguments,1),o=function(){var t=i.concat(a.slice.call(arguments));if(this instanceof o){var s=n.apply(this,t);return r(s)===s?s:this}return n.apply(e,t)};return n.prototype&&(t.prototype=n.prototype,o.prototype=new t,t.prototype=null),o});var u=c.call,h=u.bind(s.hasOwnProperty),l=u.bind(s.toString);a.filter||(a.filter=function(t,e){for(var n=[],i=0,r=this.length;r>i;i++)i in this&&t.call(e,this[i],i,this)&&n.push(this[i]);return n}),a.forEach||(a.forEach=function(t,e){for(var n=0,i=this.length;i>n;n++)n in this&&t.call(e,this[n],n,this)}),a.map||(a.map=function(t,e){for(var n=0,i=[],r=this.length;r>n;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),a.reduce||(a.reduce=function(t,e){for(var n=1,i=this[0],r=this.length;r>n;n++)n in this&&(i=t.call(e,i,this[n],n,this));return i}),a.some||(a.some=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),a.every||(a.every=function(t,e){for(var n=0,i=this.length;i>n;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),a.indexOf||(a.indexOf=function(t,e){var n=this.length;for(e=parseInt(e,10)||0,0>e&&(e+=n);n>e;e++)if(e in this&&this[e]===t)return e;return-1}),a.lastIndexOf||(a.lastIndexOf=function(t,e){var n=this.length;for(e=parseInt(e,10)||n-1,0>e&&(e+=n);e>-1;e--)if(e in this&&this[e]===t)return e;return-1}),n.isArray||(n.isArray=function(t){return"[object Array]"===l.call(t)});var d=/\S/,f=/^\s+/,p=/\s+$/;d.test(" ")&&(f=/^[\s\xA0]+/,p=/[\s\xA0]+$/),i.prototype.trim||(i.prototype.trim=function(t){return null==t?"":(""+t).replace(f,"").replace(p,"")}),r.keys||(r.keys=function(t){var e=[];for(var n in t)h(t,n)&&e.push(n);return e}),r.create||(r.create=function(t){function e(){}return e.prototype=t,new e}),r.getPrototypeOf||(r.getPrototypeOf=function(t){return t.__proto__||t.constructor.prototype})}),define("mo/lang/type",["mo/lang/es5"],function(t,e,n){function i(t){return null==t?t+"":s[r.call(t)]||"object"}var r=Object.prototype.toString,o=Array.prototype,s={};o.forEach.call("Boolean Number String Function Array Date RegExp Object".split(" "),function(t){this["[object "+t+"]"]=t.toLowerCase()},s),n.type=i,n.isFunction=function(t){return"[object Function]"===r.call(t)},n.isWindow=function(t){return"setInterval"in t},n.isEmptyObject=function(t){for(var e in t)return e=null,!1;return!0}}),define("mo/lang/mix",["mo/lang/es5","mo/lang/type"],function(t,e,n,i){function r(t){var e,n,i,o,s=arguments,a=s.length,c={number:1,"boolean":2,string:3};"object"!=typeof s[a-1]?(n=s[a-1]||0,a--):n=0;for(var l=1;a>l;l++)if(e=s[l],Array.isArray(e))for(t=!c[typeof t]&&t||[],o=e.length,i=0;o>i;i++)t[i]=n>=1&&e[i]&&"object"==typeof e[i]?r(t[i],e[i],n-1):e[i];else{t=!c[typeof t]&&t||{};for(i in e)t[i]=n>=1&&e[i]&&"object"==typeof e[i]?r(t[i],e[i],n-1):e[i]}return t}function o(t){var e,n,i,r,s,c,l,u=arguments,h=u.length,d={object:1,array:2};"object"!=typeof u[h-1]?(n=u[h-1]||0,h--):n=0;for(var f=1;h>f;f++)if(e=u[f],Array.isArray(t))t=t||[],s={},c=[],l="__oz_uniqmark_"+(+new Date+Math.random()),e=e.concat(t),t.length=0,e.forEach(function(e){e&&"object"==typeof e?e[l]||(n>=1&&Array.isArray(e)?t.push(o(e,[],n-1)):t.push(e),e[l]=1,c.push(e)):(r=typeof e+"_"+e,this[r]||(t.push(e),this[r]=1))},s),c.forEach(function(t){delete t[l]});else{t=t||{};for(i in e)t.hasOwnProperty(i)?n>=1&&i&&d[a(t[i])]+0===d[a(e[i])]+0&&(t[i]=o(t[i],e[i],n-1)):t[i]=e[i]}return t}function s(t){var e,n,i,r,o,c,l,u=arguments,h=u.length,d={object:1,array:2};"object"!=typeof u[h-1]?(n=u[h-1]||0,h--):n=0;for(var f=1;h>f;f++)if(e=u[f],Array.isArray(t))t=t||[],o={},c=[],l="__oz_uniqmark_"+(+new Date+Math.random()),t.forEach(function(t){t&&"object"==typeof t&&!t[l]?(t[l]=1,c.push(t)):(r=typeof t+"_"+t,this[r]=1)},o),t.length=0,e.forEach(function(e){e&&"object"==typeof e?1===e[l]&&(t.push(e),e[l]=2):(r=typeof e+"_"+e,1===this[r]&&(t.push(e),this[r]=2))},o),c.forEach(function(t){delete t[l]});else{t=t||{};for(i in t)e.hasOwnProperty(i)?n>=1&&i&&d[a(t[i])]+0===d[a(e[i])]+0&&(t[i]=s(t[i],e[i],n-1)):delete t[i]}return t}var a=e.type;i.mix=r,i.merge=o,i.interset=s,i.copy=function(t,e){return r(null,t,e)},i.occupy=function(t,e,n){return r(s(t,e,n),e,n)},i.defaults=o,i.config=function(t,e,n,i){return r(o(t,n,i),s(r(null,e,i),n,i),i)},i.unique=function(t,e){return o(t,[],e)}}),define("mo/lang/oop",["mo/lang/es5","mo/lang/mix"],function(t,e,n,i){function r(t,e,n){return t.apply(e,n)}var o=e.mix;i.construct=function(t,e,n){e&&!Array.isArray(e)&&(n=e),n||(n=function(){this.superConstructor.apply(this,arguments)});var i=Object.create(t.prototype),s=Object.create(t.prototype),a=function(){var e=this;return this.constructor=a,this.superConstructor=function(){r.prototype=t.prototype;var n=new r(t,e,arguments);for(var i in n)e[i]||(e[i]=s[i]=n[i])},this.superClass=s,n.apply(this,arguments)};return a.prototype=i,e&&(e=o.apply(this,e),o(i,e),o(s,e)),a}}),define("mo/lang/struct",["mo/lang/es5","mo/lang/mix"],function(t,e,n,i){var r=e.mix;i.index=function(t,e){for(var n,i={},r=0,o=t.length;o>r;r++)n=t[r],e&&"object"==typeof n?i[n[e]]=n:i[n]=!0;return i},i.fnQueue=function(){function t(t){return function(){var e,i;for(n=this.slice().reverse();i=n.pop();)e=i[t].apply(i,arguments);return n=!1,e}}var e=[],n=!1;return r(e,{call:t("call"),apply:t("apply"),clear:function(t){if(t){for(var e=this.length,i=e-n.length,r=this.length-1;r>=0;r--)this[r]===t&&(this.splice(r,1),n&&r>=i&&n.splice(e-r-1,1));if(0>r)return!1}else this.length=0;return!0}}),e}}),define("mo/lang",["mo/lang/es5","mo/lang/type","mo/lang/mix","mo/lang/struct","mo/lang/oop"],function(t,e,n,i,r,o,s){var a=this,c=a.window;n.mix(s,e,n,i,r),s.ns=function(t,e,n){for(var i,r=n||c,o=t.split(".").reverse();(i=o.pop())&&o.length>0;){if(r[i]===void 0)r[i]={};else if("object"!=typeof r[i])return!1;r=r[i]}return e!==void 0&&(r[i]=e),r[i]}}),define("dollar/origin",["mo/lang/es5","mo/lang/mix","mo/lang/type"],function(t,e,n){function i(t,e){if(t){if(t.constructor===i)return t;if("string"!=typeof t){var n=new i;return t.push===I||t[0]?I.apply(n,V.call(t)):I.call(n,t),n}return t=t.trim(),N.test(t)?b(t):e?i(e).find(t):q.find(t)}return this===x?new i:void 0}function r(t){return t}function o(t,e){return t&&t[L](e)}function s(t,e){return function(n){return e&&(n=n[e]),o(n,t)&&this.push(n),n}}function a(t){return function(n){return i(e.unique([void 0,T,null].concat(this._map(n?function(e){var i=e[t];return i&&o(i,n)?i:void 0}:function(e){return e[t]}))).slice(3))}}function c(t,n,r){return function(s,a){r||(a=s);var c=new i;return this.forEach(function(e){var c,l=n?e.parentNode[n]:e;r&&(c=i(s,e.parentNode));do{if(c&&c.indexOf(l)>-1)break;e===l||a&&!o(l,a)||this.push(l)}while(l=l[t])},c),e.unique(c)}}function l(t,e,n,i,r){var o=M(e);return t.forEach(function(t,s){i.call(r,t,o?e.call(this,s,n&&t[n]):e)},t),t}function u(t,e,n){return function(i,r){if("object"==typeof i)if(n)n(this,i);else for(var o in i)this.forEach(function(e){t(e,this,i[this])},o);else{if(void 0===r)return e(this[0],i);var s=M(r);this.forEach(function(n,o){t(n,i,s?r.call(this,o,e(n,i)):r)},this)}return this}}function h(t){function e(n,i){if("object"==typeof n)for(var r in n)e.call(this,[r,n[r]]);else i&&this.forEach(function(e){e[t+"EventListener"](n,this,!1)},i);return this}return e}function d(t,n){var i=!0,r=H[t],o=document.createEvent(r&&"TouchEvent"||A[t]&&"MouseEvents"||"Events");return n&&("bubbles"in n&&(i=!!n.bubbles,delete n.bubbles),e.mix(o,n)),o[r&&"initTouchEvent"||"initEvent"](t,i,!0),o}function f(t,n,r){return this===i?t=i(t):(r=n,n=t,t=this),"string"==typeof n&&(n=d(n)),e.mix(n,r),t.forEach("submit"!=n.type||n.defaultPrevented?function(t){"dispatchEvent"in t&&t.dispatchEvent(this)}:function(t){t.submit()},n),this}function p(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function m(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function v(t,e){return"number"==typeof e&&!j[t]&&e+"px"||e}function g(t){var e=D[t];if(!e){var n=document.createElement(t);T.body.appendChild(n),e=P(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"===e&&(e="block"),D[t]=e}return e}function _(t){return function(){return this[0]===x?x["inner"+t]:this[0]===T?T.documentElement["offset"+t]:(this.offset()||{})[t.toLowerCase()]}}function b(t,e){var n=(N.exec(t)||[])[0]||t,r=U[n];r||(r=U[n]="tr"===n&&document.createElement("tbody")||("tbody"===n||"thead"===n||"tfoot"===n)&&document.createElement("table")||("td"===n||"th"===n)&&document.createElement("tr")||document.createElement("div")),r.innerHTML=t;var o=new i;if(I.apply(o,V.call(r.childNodes)),o.forEach(function(t){this.removeChild(t)},r),e)for(var s in e)o.attr(s,e[s]);return o}function k(t,e,n){switch("SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||x.eval.call(x,e.innerHTML),n){case 1:t.appendChild(e);break;case 2:t.parentNode.insertBefore(e,t);break;case 3:t.insertBefore(e,t.firstChild);break;case 4:t.parentNode.insertBefore(e,t.nextSibling);break;default:}}function y(t,e){var n=e?function(e){k(e,this,t)}:function(e){k(this,e,t)};return function(t){return this.forEach(function(t){this.forEach(n,t)},i(t)),this}}function w(t){return y(t,!0)}function C(t){return y(t)}var x=this,T=x.document,S="nextElementSibling",E="previousElementSibling",O="firstElementChild",L=["webkitMatchesSelector","mozMatchesSelector","matchesSelector"].map(function(t){return this[t]&&t},T.body).filter(r)[0],A={click:1,mousedown:1,mouseup:1,mousemove:1},H={touchstart:1,touchmove:1,touchend:1,touchcancel:1},j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},N=/^\s*<(\w+|!)[^>]*>/,M=n.isFunction,R=Array.prototype.map,I=Array.prototype.push,V=Array.prototype.slice,P=document.defaultView.getComputedStyle,D={},U={},q=i.fn=i.prototype=[];return["map","filter","slice","reverse","sort"].forEach(function(t){var e=this["_"+t]=this[t];this[t]=function(){return i(e.apply(this,arguments))}},q),["splice","concat"].forEach(function(t){var e=this["_"+t]=this[t];this[t]=function(){return i(e.apply(this._slice(),R.call(arguments,function(t){return t._slice()})))}},q),e.mix(q,{constructor:i,toString:function(){return this.join(",")},find:function(t){var e,n=new i;if(this===q?e=[T]:n.prevObject=e=this,/^#[\w_]+$/.test(t)){var r=(e[0]||T).getElementById(t.substr(1));r&&n.push(r)}else{var o=/\W/.test(t)?"querySelectorAll":"getElementsByTagName";e[1]?e.forEach(function(e){this.push.apply(this,V.call(e[o](t)))},n):e[0]&&n.push.apply(n,V.call(e[0][o](t)))}return n},eq:function(t){return-1===t?this.slice(-1):this.slice(t,t+1)},not:function(t){return this.filter(function(e){return e&&!this(e,t)},o)},has:function(t){return this.filter(function(e){return this(e,t)},o)},parent:a("parentNode"),parents:function(t){for(var e=new i,n=this,r=t?s(t,"parentNode"):function(t){return this[this.push(t.parentNode)-1]};n.length;)n=n.map(r,e);return e},closest:function(t){for(var e=new i,n=this,r=s(t,"parentNode");n.length&&!e.length;)n=n.map(r,e);return e.length&&e||this},siblings:c(S,O),next:a(S),nextAll:c(S),nextUntil:c(S,!1,!0),prev:a(E),prevAll:c(E),prevUntil:c(E,!1,!0),children:function(){var t=new i;return this.forEach(function(e){this(t,i(e.children))},e.merge),t},contents:function(){var t=new i;return this.forEach(function(e){this(t,i(e.childNodes))},e.merge),t},is:function(t){return this.some(function(e){return o(e,t)})},hasClass:function(t){for(var e=0,n=this.length;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},isEmpty:function(){return this.every(function(t){if(!t.innerHTML){if(t.innerHTML=" ",!t.innerHTML)return!0;t.innerHTML=""}return!1})},addClass:function(t){return l(this,t,"className",function(t,e){t.classList.add(e)})},removeClass:function(t){return l(this,t,"className",function(t,e){t.classList.remove(e)})},toggleClass:function(t,e){return l(this,t,"className",function(t,n){t.classList[void 0===e&&"toggle"||this&&"add"||"remove"](n)})},attr:u(function(t,e,n){t.setAttribute(e,n)},function(t,e){return t&&t.getAttribute(e)}),removeAttr:function(t){return this.forEach(function(t){t.removeAttribute(this)},t),this},prop:u(function(t,e,n){t[e]=n},function(t,e){return(t||{})[e]}),removeProp:function(t){return this.forEach(function(t){delete t[this]},t),this},data:u(function(t,e,n){t.dataset[p(e)]=n},function(t,n){var i=(t||{}).dataset;return n?i[p(n)]:e.mix({},i)}),removeData:function(t){return this.forEach(function(t){delete t.dataset[this]},t),this},val:function(t){var e=this[0];return void 0!==t?l(this,t,"value",function(t,e){t.value=e}):e?e.multiple?i("option",this).filter(function(t){return t.selected}).map(function(t){return t.value}):e.value:void 0},empty:function(){return this.forEach(function(t){t.innerHTML=""}),this},html:function(t){return void 0===t?(this[0]||{}).innerHTML:l(this,t,"innerHTML",function(t,e){N.test(e)?this(t).empty().append(e):t.innerHTML=e},i)},text:function(t){return void 0===t?(this[0]||{}).textContent:l(this,t,"textContent",function(t,e){t.textContent=e})},clone:function(){return this.map(function(t){return t.cloneNode(!0)})},css:u(function(t,e,n){var i=m(e);n||0===n?t.style.cssText+=";"+i+":"+v(i,n):t.style.removeProperty(i)},function(t,e){return t&&(t.style[p(e)]||P(t,"").getPropertyValue(e))},function(t,e){var n,i,r="";for(var o in e)i=e[o],n=m(o),i||0===i?r+=n+":"+v(n,i)+";":t.forEach(function(t){t.style.removeProperty(this)},n);t.forEach(function(t){t.style.cssText+=";"+this},r)}),hide:function(){return this.css("display","none")},show:function(){return this.forEach(function(t){"none"===t.style.display&&(t.style.display=null),"none"===this(t,"").getPropertyValue("display")&&(t.style.display=g(t.nodeName))},P),this},offset:function(){var t=this[0].getBoundingClientRect();return{left:t.left+x.pageXOffset,top:t.top+x.pageYOffset,width:t.width,height:t.height}},width:_("Width"),height:_("Height"),appendTo:w(1),append:C(1),prependTo:w(3),prepend:C(3),insertBefore:w(2),before:C(2),insertAfter:w(4),after:C(4),replaceAll:function(t){var e=i(t);return this.insertBefore(e),e.remove(),this},replaceWith:function(t){return i(t).replaceAll(this)},wrap:function(t){return l(this,t,!1,function(t,e){this(e).insertBefore(t).append(t)},i)},wrapAll:function(t){return i(t).insertBefore(this.eq(0)).append(this),this},wrapInner:function(t){return l(this,t,!1,function(t,e){this(t).contents().wrapAll(e)},i)},unwrap:function(){return this.parent().forEach(function(t){this(t).children().replaceAll(t)},i),this},remove:function(){return this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)}),this},bind:h("add"),unbind:h("remove"),trigger:f,end:function(){return this.prevObject||new i},each:function(t){for(var e=0,n=this.length;n>e;e++){var i=t.call(this[e],e);if(i===!1)break}return this}}),i.find=i,i.matchesSelector=o,i.createNodes=b,i.camelize=p,i.dasherize=m,i.Event=d,i.trigger=f,i._kvAccess=u,i._eachNode=l,i.VERSION="1.1.2",i}),define("dollar",["dollar/origin"],function(t){return t}),define("../cardkit/parser/util",["dollar","mo/lang"],function(t){var e={getSource:function(e,n){var i=t(e).data("source");if(i){var r=n.find("."+i);return r[0]&&r}},getCustom:function(t,n,i,r){var o=n.find(t);if(o.length)return o.map(function(n){var o=e.getSource(n,i);if(o){var s=o.find(t);return s[0]||(s=o),r(s,n)}return r(n)})},getHref:function(t){for(var e,n=0,i=t.length;i>n;n++)if(e=t[n].href)return e},getText:function(t){return t.map(function(t){return t.textContent}).join("")},getInnerHTML:function(e){return e.map(function(t){return t.innerHTML},t).join("")},getOuterHTML:function(e){return e.map(function(t){return t.outerHTML},t).join("")}};return e}),define("../cardkit/parser/form",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var a=n.getSource(e,i),c={blank:e.data("cfgBlank"),plainhd:e.data("cfgPlainhd")},l=o(a&&a.find(".ckd-hd")),u=s(a&&a.find(".ckd-hdopt")),h=o(a&&a.find(".ckd-ft")),d=a&&a.find(".ckd-item").map(r),f=(n.getCustom(".ckd-hd",e,i,o)||[{}])[0],p=(n.getCustom(".ckd-hdopt",e,i,s)||[]).join(""),m=(n.getCustom(".ckd-ft",e,i,o)||[{}])[0],v=n.getCustom(".ckd-item",e,i,r)||t(),g={config:c,style:e.data("style"),items:v.concat(d||t()),hd:void 0===f.html?l.html:f.html,hd_url:f.href||null!==f.href&&l.href,hd_opt:p+u,ft:void 0===m.html?h.html:m.html};return g}function r(e,i){e=t(e);var o={content:n.getInnerHTML(e)};if(i&&"object"==typeof i){i=r(i);for(var s in i)i[s]&&(o[s]=i[s])}return o}function o(e,i){e=t(e);var r=e&&{html:n.getInnerHTML(e),href:n.getHref(e)}||{};if(i&&"object"==typeof i){i=o(i);for(var s in i)i[s]&&(r[s]=i[s])}return r}function s(e){e=t(e);var i=n.getOuterHTML(e)||"";return e.remove(),i}return i}),define("../cardkit/parser/mini",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var a=n.getSource(e,i),c={blank:e.data("cfgBlank"),limit:e.data("cfgLimit"),plain:e.data("cfgPlain"),plainhd:e.data("cfgPlainhd")},l=o(a&&a.find(".ckd-hd")),u=s(a&&a.find(".ckd-hdopt")),h=a&&a.find(".ckd-item"),d=(n.getCustom(".ckd-hd",e,i,o)||[{}])[0],f=(n.getCustom(".ckd-hdopt",e,i,s)||[]).join(""),p=n.getCustom(".ckd-item",e,i,r)||t();a&&!h[0]&&(h=a),h=h&&h.map(r);var m={config:c,style:e.data("style"),items:p.concat(h||t()),hd_opt:f+u,hd:void 0===d.html?l.html:d.html,hd_url:d.href||null!==d.href&&l.href};return m}function r(e,i){e=t(e);var o=e.find(".ckd-title"),s=e.find(".ckd-author"),c={title:a(o),href:n.getHref(o),author:a(s),author_url:n.getHref(s),info:a(e.find(".ckd-info")),subtitle:a(e.find(".ckd-subtitle")),meta:e.find(".ckd-meta").map(function(t){return t.innerHTML}),icon:e.find(".ckd-icon").attr("src"),content:n.getOuterHTML(e.find(".ckd-content"))};if(i&&"object"==typeof i){i=r(i);for(var l in i)i[l]&&(c[l]=i[l])}return c}function o(e,i){e=t(e);var r=e&&{html:a(e),href:n.getHref(e)}||{};if(i&&"object"==typeof i){i=o(i);for(var s in i)i[s]&&(r[s]=i[s])}return r}function s(e){e=t(e);var i=n.getOuterHTML(e)||"";return e.remove(),i}var a=n.getInnerHTML;return i}),define("../cardkit/parser/list",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var a=n.getSource(e,i),c={blank:e.data("cfgBlank"),limit:e.data("cfgLimit"),col:e.data("cfgCol"),paper:e.data("cfgPaper"),plain:e.data("cfgPlain"),plainhd:e.data("cfgPlainhd")},l=o(a&&a.find(".ckd-hd")),u=s(a&&a.find(".ckd-hdopt")),h=o(a&&a.find(".ckd-ft")),d=a&&a.find(".ckd-item").map(r),f=(n.getCustom(".ckd-hd",e,i,o)||[{}])[0],p=(n.getCustom(".ckd-hdopt",e,i,s)||[]).join(""),m=(n.getCustom(".ckd-ft",e,i,o)||[{}])[0],v=n.getCustom(".ckd-item",e,i,r)||t(),g={config:c,style:e.data("style"),items:v.concat(d||t()),hd:void 0===f.html?l.html:f.html,hd_url:f.href||null!==f.href&&l.href,hd_opt:p+u,ft:void 0===m.html?h.html:m.html};return g}function r(e,i){e=t(e);var o=e.find(".ckd-title"),s=e.find(".ckd-author");!o[0]&&n.getHref(e)&&(o=e);var c={title:a(o),href:n.getHref(o),author:a(s),author_url:n.getHref(s),info:a(e.find(".ckd-info")),subtitle:n.getInnerHTML(e.find(".ckd-subtitle")),meta:e.find(".ckd-meta").map(function(t){return t.innerHTML}),icon:e.find(".ckd-icon").attr("src"),content:n.getOuterHTML(e.find(".ckd-content"))};if(i&&"object"==typeof i){i=r(i);for(var l in i)i[l]&&(c[l]=i[l])}return c}function o(e,i){e=t(e);var r=e&&{html:a(e),href:n.getHref(e)}||{};if(i&&"object"==typeof i){i=o(i);for(var s in i)i[s]&&(r[s]=i[s])}return r}function s(e){e=t(e);var i=n.getOuterHTML(e)||"";return e.remove(),i}var a=n.getInnerHTML;return i}),define("../cardkit/parser/box",["dollar","mo/lang","../cardkit/parser/util"],function(t,e,n){function i(e,i){e=t(e);var a=n.getSource(e,i),c={paper:e.data("cfgPaper"),plain:e.data("cfgPlain"),plainhd:e.data("cfgPlainhd")},l=o(a&&a.find(".ckd-hd")),u=s(a&&a.find(".ckd-hdopt")),h=o(a&&a.find(".ckd-ft")),d=a&&(n.getOuterHTML(a.find(".ckd-content"))||n.getInnerHTML(a)),f=(n.getCustom(".ckd-hd",e,i,o)||[{}])[0],p=(n.getCustom(".ckd-hdopt",e,i,s)||[]).join(""),m=(n.getCustom(".ckd-ft",e,i,o)||[{}])[0];n.getCustom(".ckd-content",e,i,r);var v={config:c,style:e.data("style"),content:e[0].innerHTML+(d||""),hd:void 0===f.html?l.html:f.html,hd_url:f.href||null!==f.href&&l.href,hd_opt:p+u,ft:void 0===m.html?h.html:m.html||(c.plain||c.paper)&&" "};return v.content&&/\S/.test(v.content)&&(v.hasContent=!0),v}function r(e,n){n&&t(n).replaceWith(e.clone())}function o(e,i){e=t(e);var r=e&&{html:n.getInnerHTML(e),href:n.getHref(e)}||{};if(i&&"object"==typeof i){var s=o(i);for(var a in s)s[a]&&(r[a]=s[a])}return e.remove(),r}function s(e){e=t(e);var i=n.getOuterHTML(e)||"";return e.remove(),i}return i}),define("../cardkit/tpl/unit/blank",[],function(){return{template:"\n<div class=\"ck-blank-unit\">\n    <article>{%=(data.config.blank || '目前还没有内容')%}</article>\n</div>\n"}}),define("../cardkit/tpl/unit/form",[],function(){return{template:'\n<article>\n\n    {% if (data.hd) { %}\n    <header>\n        {% if (data.hd_url) { %}\n        <a href="{%= data.hd_url %}" class="ck-link">{%= data.hd %}</a>\n        {% } else { %}\n        <span>{%= data.hd %}</span>\n        {% } %}\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt">{%=data.hd_opt%}</div>\n        {% } %}\n    </header>\n    {% } %}\n\n    <section>\n    {% if (!data.items.length) { %}\n    <div class="ck-item blank">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n    {% } %}\n    {% data.items.forEach(function(item){ %}\n        <div class="ck-item">\n            {%= item.content %}\n        </div>\n    {% }); %}\n    </section>\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n\n'}}),define("../cardkit/tpl/unit/mini",[],function(){return{template:'\n<article>\n\n    {% if (data.hd) { %}\n    <header>\n        {% if (data.hd_url) { %}\n        <a href="{%= data.hd_url %}" class="ck-link">{%= data.hd %}</a>\n        {% } else { %}\n        <span>{%= data.hd %}</span>\n        {% } %}\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt">{%=data.hd_opt%}</div>\n        {% } %}\n    </header>\n    {% } %}\n\n    {% if (data.style === \'slide\') { %}\n    <div class="ck-slide"><div class="ck-inslide">\n    {% } %}\n\n        {% if (!data.items.length) { %}\n        <div class="ck-item enable blank">\n            <div class="ck-content">{%=(data.config.blank || \'目前还没有内容\')%}</div>\n        </div>\n        {% } %}\n\n        {% data.items.forEach(function(item, i){ %}\n        <div class="ck-item{%=(i === 0 && \' enable\' || \'\')%}">\n            {% if (item.title) { %}\n            <p class="ck-title">{%= item.title %}</p>\n            {% } %}\n            <div class="ck-content">\n                {%= item.content %}\n                {% if (item.info) { %}\n                <span class="ck-info">{%= item.info %}</span>\n                {% } %}\n            </div>\n            {% if (item.author) { %}\n\n            <p class="ck-initem">\n                {% if (item.icon) { %}\n                <img src="{%= item.icon %}" class="ck-icon"/>\n                {% } %}\n                {% if (item.author_url) { %}\n                <a href="{%= item.author_url %}" class="ck-author ck-link">{%= item.author %}</a>\n                {% } else if (item.author) { %}\n                <span class="ck-author">{%= item.author %}</span>\n                {% } %}\n                {% if (item.subtitle) { %}\n                <span class="ck-subtitle">{%= item.subtitle %}</span>\n                {% } %}\n            </p>\n            {% if (item.meta && item.meta.length) { %}\n            <span class="ck-meta">{%= item.meta.join(\'</span><span class="ck-meta">\') %}</span>\n            {% } %}\n\n            {% } %}\n        </div>\n        {% }); %}\n\n    {% if (data.style === \'slide\') { %}\n    </div></div>\n    <footer>\n        {% if (data.items.length > 1) { %}\n        <div class="ck-page">\n        {% data.items.forEach(function(item, i){ %}\n            <span class="{%=(i === 0 && \'enable\' || \'\')%}"></span>\n        {% }); %}\n        </div>\n        {% } %}\n    </footer>\n    {% } %}\n\n</article>\n\n'}
}),define("../cardkit/tpl/unit/list",[],function(){return{template:'\n{% function get_item(item){ %}\n    {% if (item.href) { %}\n        <a href="{%= item.href %}" class="ck-link ck-initem">{% get_content(item); %}</a>\n    {% } else { %}\n        <p class="ck-initem">{% get_content(item); %}</p>\n    {% } %}\n{% } %}\n\n{% function get_content(item){ %}\n\n    {% if (item.info) { %}\n    <span class="ck-info">{%= item.info %}</span>\n    {% } %}\n\n    {% if (item.icon) { %}\n    <img src="{%= item.icon %}" class="ck-icon"/>\n    {% } %}\n\n    {% if (item.title) { %}\n    <span class="ck-title">{%= item.title %}</span>\n    {% } %}\n\n    {% if (data.style === \'post\' || data.style === \'grid\') { %}\n        {% if (!item.href) { %}\n            {% if (item.author_url) { %}\n            <a href="{%= item.author_url %}" class="ck-link">{%= item.author %}</a>\n            {% } else if (item.author) { %}\n            <span class="ck-title">{%= item.author %}</span>\n            {% } %}\n        {% } %}\n        {% if (item.subtitle) { %}\n        <span class="ck-subtitle">{%= item.subtitle %}</span>\n        {% } %}\n    {% } %}\n\n{% } %}\n\n\n<article>\n\n    {% if (data.hd) { %}\n    <header>\n        {% if (data.hd_url) { %}\n        <a href="{%= data.hd_url %}" class="ck-link">{%= data.hd %}</a>\n        {% } else { %}\n        <span>{%= data.hd %}</span>\n        {% } %}\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt">{%=data.hd_opt%}</div>\n        {% } %}\n    </header>\n    {% } %}\n\n    {% if (data.items.length) { %}\n\n        {% if (data.style === \'more\') { %}\n\n        <nav>\n        {% data.items.forEach(function(item){ %}\n            <div class="ck-item">\n                {% get_item(item); %}\n            </div>\n        {% }); %}\n        </nav>\n\n        {% } else { %}\n\n        <ul>\n        {% data.items.forEach(function(item, i){ %}\n            {% if (i && (i % data.config.col === 0)) { %}\n                </ul><ul>\n            {% } %}\n            <li class="ck-item" style="width:{%= (data.config.col ? Math.floor(1000/data.config.col)/10 + \'%\' : \'\') %};">\n                {% get_item(item); %}\n                {% if (item.content) { %}\n                <span class="ck-content">{%= item.content %}</span>\n                {% } %}\n                {% if (item.meta && item.meta.length) { %}\n                <span class="ck-meta">{%= item.meta.join(\'</span><span class="ck-meta">\') %}</span>\n                {% } %}\n            </li>\n        {% }); %}\n        </ul>\n\n        {% } %}\n\n    {% } else { %}\n\n        <ul>\n            <li class="ck-item blank">\n                <p class="ck-initem">{%=(data.config.blank || \'目前还没有内容\')%}</p>\n            </li>\n        </ul>\n\n    {% } %}\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("../cardkit/tpl/unit/box",[],function(){return{template:'\n<article>\n\n    {% if (data.hd) { %}\n    <header>\n        {% if (data.hd_url) { %}\n        <a href="{%= data.hd_url %}" class="ck-link">{%= data.hd %}</a>\n        {% } else { %}\n        <span>{%= data.hd %}</span>\n        {% } %}\n        {% if (data.hd_opt) { %}\n        <div class="ck-hdopt">{%=data.hd_opt%}</div>\n        {% } %}\n    </header>\n    {% } %}\n\n    {% if (data.hasContent) { %}\n    <section>{%= data.content %}</section>\n    {% } %}\n\n    {% if (data.ft) { %}\n    <footer>{%= data.ft %}</footer>\n    {% } %}\n\n</article>\n'}}),define("mo/template/string",[],function(t,e){e.format=function(t,e){return t.replace(/\{\{(\w+)\}\}/g,function(t,n){return null!=e[n]?e[n]:""})},e.escapeHTML=function(t){t=t||"";var e={"<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","{":"&#123;","}":"&#125;","@":"&#64;"};return t.replace(/[<>'"\{\}@]/g,function(t){return e[t]})},e.substr=function(t,e,n){if(!t||"string"!=typeof t)return"";var i=t.substr(0,e).replace(/([^\x00-\xff])/g,"$1 ").substr(0,e).replace(/([^\x00-\xff])\s/g,"$1");return n?n.call(i,i):t.length>i.length?i+"...":i},e.strsize=function(t){return t.replace(/([^\x00-\xff]|[A-Z])/g,"$1 ").length}}),define("mo/template/micro",["mo/lang","mo/template/string"],function(t,e,n,i){function r(t,e,n){var s,a=i.tplSettings,c=n?"#"+n:"";if(/[\t\r\n% ]/.test(t))s=Function(n||"obj","api","var __p=[];"+(n?"":"with(obj){")+"var mix=api.mix,escapeHTML=api.escapeHTML,substr=api.substr,include=api.include,has=api._has("+(n||"obj")+");"+"__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(a.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(a.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');"+(n?"":"}")+"return __p.join('');");else if(s=a._cache[t+c],!s){var l=o.getElementById(t);l&&(s=a._cache[t+c]=r(l.innerHTML,!1,n))}return s?e?s(e,i.tplHelpers):s:""}var o=this.document;i.tplSettings={_cache:{},evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g},i.tplHelpers={mix:t.mix,escapeHTML:e.escapeHTML,substr:e.substr,include:r,_has:function(e){return function(n){return t.ns(n,void 0,e)}}},i.convertTpl=r,i.reloadTpl=function(t){delete i.tplSettings._cache[t]}}),define("mo/template",["mo/lang","mo/template/string","mo/template/micro"],function(t,e,n,i,r){t.mix(r,e,n),r.str2html=function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.firstChild;if(1==e.childNodes.length)return n;var i=document.createDocumentFragment();do i.appendChild(n);while(n=e.firstChild);return i}}),define("../cardkit/render",["dollar","mo/lang","mo/template","../cardkit/tpl/unit/box","../cardkit/tpl/unit/list","../cardkit/tpl/unit/mini","../cardkit/tpl/unit/form","../cardkit/tpl/unit/blank","../cardkit/parser/box","../cardkit/parser/list","../cardkit/parser/mini","../cardkit/parser/form","../cardkit/supports"],function(t,e,n,i,r,o,s,a,c,l,u,h,d){var f='<div class="ck-top-tips">'+(d.HIDE_TOPBAR?"长按顶部导航条，可拖出浏览器地址栏":"")+"</div>",p={initCard:function(e,i,r,o){var s=e.find(".ck-box-unit, .ck-mini-unit, .ck-list-unit, .ck-form-unit"),c={blank:e.data("cfgBlank")},l=p.initUnit(s,i);l||o.isModal||"false"==c.blank||e.append(n.convertTpl(a.template,{config:c},"data")),o.isModal||e.append(r.clone()).prepend(t(".ck-banner-unit",e)).prepend(f)},initUnit:function(e,n){var i;return t(e).forEach(function(t){var e=(/ck-(\w+)-unit/.exec(t.className)||[])[1];e&&p[e](t,n)&&(i=!0)}),i},box:function(e,r){var o=c(e,r);return o.hasContent||o.hd?(e.innerHTML=n.convertTpl(i.template,o,"data"),!0):(t(e).remove(),void 0)},mini:function(e,i){var r=u(e,i);return r.items=r.items.filter(function(t){return t.content&&t.content.length?!0:!1},r),r.items.length||r.hd&&"false"!=r.config.blank?(r.style||(r.config.limit=1),r.config.limit&&(r.items.length=r.config.limit),e.innerHTML=n.convertTpl(o.template,r,"data"),!0):(t(e).remove(),void 0)},list:function(e,i){var o=l(e,i);return o.items=o.items.filter(function(t){var e=this.style;if("more"===e||"menu"===e){if(!t.title)return!1}else if("grid"===e){if(!t.icon)return!1}else if(!t.title&&!t.author)return!1;return!0},o),o.config.limit&&(o.items.length=o.config.limit),o.items.length||o.hd&&"false"!=o.config.blank?(e.innerHTML=n.convertTpl(r.template,o,"data"),!0):(t(e).remove(),void 0)},form:function(e,i){var r=h(e,i);return r.items.length||r.hd&&"false"!=r.config.blank?(e.innerHTML=n.convertTpl(s.template,r,"data"),!0):(t(e).remove(),void 0)}};return p}),define("eventmaster",["mo/lang/es5","mo/lang/mix","mo/lang/struct"],function(t,e,n){function i(t){var e=this;t&&(this.subject=t.subject,this.trace=t.trace,this.traceStack=t.traceStack||[]),this.doneHandlers=l(),this.failHandlers=l(),this.observeHandlers=l(),this._alterQueue=l(),this._lastDoneQueue=[],this._lastFailQueue=[],this.status=0,this._argsCache=[],this.pipe={},h.forEach(function(t){this[t]=function(){return e[t].call(e,u.call(arguments))}},this.pipe)}function r(){var t=[],e=[],n=new i;return n._when=[],n._count=n._total=arguments.length,Array.prototype.forEach.call(arguments,function(n,i){function r(n){e[i]||(e[i]=!0,t[i]=n,0===--o._count&&(e.length=0,o._count=o._total,o.resolve.call(o,t)))}var o=this;o._when.push(n.bind(r))},n),n}function o(t,e){return t&&t.then?t.then(e.pipe.resolve,e.pipe.reject).progress(e.pipe.notify):void 0!==t&&e.resolve([t]),t}function s(t){return function(e){var n=this.lib[e];return n||(n=this.lib[e]=new i({subject:e,trace:this.trace,traceStack:this.traceStack})),n[t].apply(n,u.call(arguments,1)),this}}function a(t){t&&(this.trace=t.trace,this.traceStack=t.traceStack),this.lib={}}function c(t){return new a(t)}var l=n.fnQueue,u=Array.prototype.slice,h=["notify","fire","error","resolve","reject","reset","disable","enable"],d=i.prototype={then:function(t,e){var n=this.status;return e?2===n?this._resultCache=e.apply(this,this._argsCache):n||(this.failHandlers.push(e),this._lastFailQueue=this.failHandlers):this._lastFailQueue=[],t?1===n?this._resultCache=t.apply(this,this._argsCache):n||(this.doneHandlers.push(t),this._lastDoneQueue=this.doneHandlers):this._lastDoneQueue=[],this},done:function(t){return this.then(t)},fail:function(t){return this.then(!1,t)},cancel:function(t,e){return t&&this.doneHandlers.clear(t),e&&this.failHandlers.clear(e),this},bind:function(t){return this.status&&t.apply(this,this._argsCache),this.observeHandlers.push(t),this},unbind:function(t){return this.observeHandlers.clear(t),this},progress:function(t){var e=this;return this.observeHandlers.push(function(){e.status||t.apply(this,arguments)}),this},notify:function(t){return this._disalbed?this:(this.status=0,this.observeHandlers.apply(this,t||[]),this)},fire:function(t){if(this._disalbed)return this;this.trace&&this._trace(),t=t||[];var e=this.doneHandlers;return this.doneHandlers=this._alterQueue,this.failHandlers.length=0,this.observeHandlers.apply(this,t),e.apply(this,t),e.length=0,this._alterQueue=e,this},error:function(t){if(this._disalbed)return this;this.trace&&this._trace(),t=t||[];var e=this.failHandlers;return this.failHandlers=this._alterQueue,this.doneHandlers.length=0,this.observeHandlers.apply(this,t),e.apply(this,t),e.length=0,this._alterQueue=e,this},resolve:function(t){return this.status=1,this._argsCache=t||[],this.fire(t)},reject:function(t){return this.status=2,this._argsCache=t||[],this.error(t)},reset:function(){return this.status=0,this._argsCache=[],this.doneHandlers.length=0,this.failHandlers.length=0,this},disable:function(){this._disalbed=!0},enable:function(){this._disalbed=!1},merge:function(t){e.merge(this.doneHandlers,t.doneHandlers),e.merge(this.failHandlers,t.failHandlers),e.merge(this.observeHandlers,t.observeHandlers);var n=t.subject;e.mix(t,this),t.subject=n},_trace:function(){this.traceStack.unshift(this.subject),this.traceStack.length>this.trace&&this.traceStack.pop()},follow:function(){var t=new i;if(t._prevActor=this,this.status)o(this._resultCache,t);else{var e=this._lastDoneQueue.pop();e&&this._lastDoneQueue.push(function(){return o(e.apply(this,arguments),t)});var n=this._lastFailQueue.pop();n&&this._lastFailQueue.push(function(){return o(n.apply(this,arguments),t)})}return t},end:function(){return this._prevActor},all:function(){var t=r.apply(this,this._when);return t},any:function(){var t=r.apply(this,this._when);return t._count=t._total=1,t},some:function(t){var e=r.apply(this,this._when);return e._count=e._total=t,e}},f=a.prototype=function(t){for(var e in d)t[e]=s(e);return t}({});return f.once=f.wait=f.then,f.on=f.bind,f.off=f.unbind,f.promise=function(t){var e=this.lib[t];return e||(e=this.lib[t]=new i({subject:t,trace:this.trace,traceStack:this.traceStack})),e},f.when=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(this.promise(arguments[e]));return r.apply(this,t)},c.Promise=i,c.Event=a,c.when=r,c.pipe=o,c.VERSION="2.1.0",c}),define("../cardkit/bus",["eventmaster"],function(t){return t()}),define("momo/base",["mo/lang/es5","mo/lang/type","mo/lang/mix"],function(t,e,n){function i(t,e,n){(!e||s(e))&&(n=e,e={}),this._listener=n;var i=n&&++a;this.event={},this.EVENTS.forEach(function(t){this[t]=t+(n?"_"+i:"")},this.event),this.node=t,this._config={event:this.EVENTS[0]},this.config(e),this.enable()}function r(){}function o(t,e,n){return new o.Class(t,e,n)}var s=e.isFunction,a=0,c=!1;try{document.createEvent("TouchEvent"),c=!0}catch(l){}return i.prototype={SUPPORT_TOUCH:c,PRESS:c?"touchstart":"mousedown",MOVE:c?"touchmove":"mousemove",RELEASE:c?"touchend":"mouseup",EVENTS:[],DEFAULT_CONFIG:{},config:function(t){return n.merge(n.mix(this._config,t),this.DEFAULT_CONFIG),this},enable:function(){var t=this;return t.bind(t.PRESS,t._press||(t._press=t.press.bind(t))).bind(t.MOVE,t._move||(t._move=t.move.bind(t))).bind(t.CANCEL,t._cancel||(t._cancel=t.cancel.bind(t))).bind(t.RELEASE,t._release||(t._release=t.release.bind(t))),t._listener&&t.bind(this.event[this._config.event],t._listener),t},disable:function(){var t=this;return t.unbind(t.PRESS,t._press).unbind(t.MOVE,t._move).unbind(t.CANCEL,t._cancel).unbind(t.RELEASE,t._release),t._listener&&t.unbind(this.event[this._config.event],t._listener),t},once:function(t,e,n){var i=this;this.bind(t,function r(){i.unbind(t,r,n),e.apply(this,arguments)},n)},bind:r,unbind:r,trigger:r,press:r,move:r,release:r,cancel:r},o.Class=i,o}),define("momo/swipe",["mo/lang","momo/base"],function(t,e){function n(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function i(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function r(t,e){var n,r,o=i(t,e),s={down:o>=45&&135>o,left:o>=135||-135>=o,up:-45>o&&o>-135,right:o>=-45&&45>=o};for(r in s)if(s[r]){n=r;break}return n}function o(t,e,n){return new o.Class(t,e,n)}var s=t.construct(e.Class);return t.mix(s.prototype,{EVENTS:["swipeup","swipedown","swiperight","swipeleft"],DEFAULT_CONFIG:{timeThreshold:200,distanceThreshold:20},press:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._startX=e.clientX,this._startY=e.clientY,this._moveX=0/0,this._moveY=0/0,this._startTime=t.timeStamp},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._moveX=e.clientX,this._moveY=e.clientY},release:function(t){var e=this,i={x:e._startX,y:e._startY},o={x:e._moveX,y:e._moveY},s=n(i,o),a=r(i,o),c=t.timeStamp-e._startTime;e._config.timeThreshold>c&&s>e._config.distanceThreshold&&e.trigger(t,e.event["swipe"+a])}}),o.Class=s,o}),define("mo/easing/base",[],function(){return{def:"ease",positions:{linear:[.25,.25,.75,.75],ease:[.25,.1,.25,1],easeIn:[.42,0,1,1],easeOut:[0,0,.58,1],easeInOut:[.42,0,.58,1]},values:{linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out"},functions:{linear:function(t,e,n,i){return n+i*t},ease:function(t,e,n,i){return(-Math.cos(t*Math.PI)/2+.5)*i+n},easeIn:function(t,e,n,i,r){return i*(e/=r)*e+n},easeOut:function(t,e,n,i,r){return-i*(e/=r)*(e-2)+n},easeInOut:function(t,e,n,i,r){return 1>(e/=r/2)?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n}}}}),define("choreo",["mo/lang/es5","mo/lang/mix","mo/easing/base","mo/mainloop","eventmaster"],function(t,e,n,i,r){function o(t,e,n,i){for(var r in t)n=e?"-"+e+"-"+r:r,w(n)in V.style&&(t[r]=n,O||"transition"!==r||(O=H[e]),i=!0);return i}function s(t){if(t||(t="_oz_choreo_"+X++),Y[t])return Y[t];var e=this;Y[t]=this,this.name=t,this._promise=new r.Promise,this._reset_promise=new r.Promise,this._count=0,this._optCache=[],q?this._runningActors=[]:i.addStage(t),this._reset_promise.bind(function(){e._promise.reset()})}function a(t,e){Array.isArray(t)&&(this.members=t,t={_promise:r.when.apply(r,this.members.map(function(t){return t.follow()}))},t._promise.bind(t._promise.pipe.disable)),this._opt=t,this.stage=e}function c(t,e){if(q){var n=t._runningActors;t.isPlaying()&&(n.forEach(function(n){e&&e(t.name,n)}),n.state=0,n.length=0)}else e&&e(t.name)}function l(t){var e=t.target,n=parseFloat(t._current_from||t.from),i=parseFloat(t.to),r=i-n,o=t._startTime?+new Date-t._startTime:0;0>o&&(o=0);var s=o/(t.duration||1),a=m(e),c=B[a];if(c&&c[t.prop]===t?(clearTimeout((c[t.prop]||{})._runtimer),delete c[t.prop]):s=0,s){var l=k(a);if(e.style[ee]=l,1>s){G[t.easing]&&(s=G[t.easing](s,o,0,1,t.duration));var u=y(t.from,t.to);n=n+r*s+u}else n=t.to;_(e,t.prop,n)}}function u(t){var e=t.target,n=m(e),i=B[n];i&&delete i[t.prop];var r=k(n);e.style[ee]=r,_(e,t.prop,t.to)}function h(t){var e=t.target,n=t.prop,i=m(e),r=B[i],o=t.from||g(e,n);if(o==t.to){var s=!0;if(r&&delete r[n],j[n])for(var a in r)if(j[a]){s=!1;break}return s&&t._promise.resolve([{target:t.target,succ:!0}]).disable(),void 0}t._current_from=o,t._startTime=+new Date+(t.delay||0),r[n]=t,_(e,n,o);var c=k(i);t._runtimer=setTimeout(function(){delete t._runtimer,e.style[ee]=c,_(e,n,t.to)},0)}function d(t,e){var n=e.target,r=parseFloat(e.to),o=e.from||g(e.target,e.prop),s=y(o,e.to);s&&0>(""+o).indexOf(s)&&(o=0),e._current_from=o;var a=parseFloat(o),c=e.delay&&"_oz_anim_"+F++;i.addTween(t,a,r,e.duration,{easing:e.easing,delay:e.delay,step:function(t){_(n,e.prop,t+s)},renderId:c,callback:function(){e._promise.resolve([{target:n,succ:!0}]).disable()}}),e._render=i.getRender(c)}function f(t,e){var n=p(t);return Object.keys(n).map(function(t){return e({prop:t,to:this[t]})},n)}function p(t){var e={};return t.split(R).forEach(function(t){var e=t.match(/([^\(\)]+)/g),n=e[1].split(/\,\s*/),i=j[e[0]],r=3===i,o=0>i||1>=n.length,s=o?[""]:["X","Y","Z"];i&&n.forEach(function(t,n){if(t&&s.length>=n&&r||o&&1>n||!o&&2>n){var i=e[0].replace("3d","")+s[n];this[i]=t}},this)},e),e}function m(t){var e=t._oz_fx;return e||(e=++W,t._oz_fx=e,t.removeEventListener(O,v),t.addEventListener(O,v)),B[e]||(B[e]={}),e}function v(t){if(t.target===this){var e=this,n=this._oz_fx,i=B[n];if(i)if(t.propertyName===Z){for(var r in j)delete i[r];var o=z[n]||[];this.style[ee]=k(n),o.forEach(function(t){t.resolve([{target:e,succ:!0}]).disable()})}else{var s=i[t.propertyName];s&&(delete i[s.prop],this.style[ee]=k(n),s._promise&&s._promise.resolve([{target:this,succ:!0}]).disable())}}}function g(t,e){if(j[e])return b(t,e)||0;if(e===Z)return t&&t.style[te||e]||N;var n=w(e),i=t&&(t.style[n]||(D?D(t,"").getPropertyValue(e):t.currentStyle[e]));return i&&/\d/.test(i)&&i||0}function _(t,e,n){j[e]?Z&&b(t,e,n):t.style[w(e)]=n}function b(t,n,i){var r=p(g(t,Z));if(!i)return r[n]||"rotate"===n&&"0deg";var o=p(n+"("+i+")");e.mix(r,o),t.style[te]=Object.keys(r).map(function(t){return t+"("+this[t]+")"},r).join(" ")}function k(t){var e=B[t];if(e){var n,i=[];for(var r in e)n=e[r],n&&n.prop&&i.push([j[n.prop]&&Z||n.prop,(n.duration||0)+"ms",Q[n.easing]||"linear",(n.delay||0)+"ms"].join(" "));return i.join(",")}return""}function y(t,e){var n=(""+(t||"")).replace(I,""),i=(""+(e||"")).replace(I,"");return 0===parseFloat(t)&&i||0===parseFloat(e)&&n||i||n}function w(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function C(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function x(t){var e;if(q){e=new r.Promise;var n=m(t);z[n]||(z[n]=[]),z[n].push(e)}return e}function T(t){if(t.members){var n=t.members[0]._opt;if(!j[n.prop])return t.members.map(function(t){return T(t)});var i=t._opt=e.copy(n);i.prop=Z,i.to=t.members.map(function(t){return t._opt.prop+"("+t._opt.to+")"}).join(" "),delete i._parent}return t._opt}function S(t,e,n){var i=t._opt,r=t.stage;if(r&&!r.isCompleted()&&r.cancel(),t.members){if("string"==typeof e&&j[t.members[0]._opt.prop]){var o={};f(e,function(t){o[t.prop]=t.to}),e=o}t.members.forEach(function(t){var e=t._opt;e.to=n(e,this[e.prop])},e)}else i.to=n(t._opt,e);return t}function E(t){return new s(t)}for(var O,L=this,A=["Moz","webkit","ms","O",""],H={"":"transitionend",Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"},j={rotate:-2,rotateX:-1,rotateY:-1,rotateZ:-1,scale:2,scale3d:3,scaleX:-1,scaleY:-1,scaleZ:-1,skew:2,skewX:-1,skewY:-1,translate:2,translate3d:3,translateX:-1,translateY:-1,translateZ:-1},N="rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateX(0px) translateY(0px) translateZ(0px) scaleX(1) scaleY(1) scaleZ(1) skewX(0deg) skewY(0deg)",M=["target","prop","duration","easing","delay","to"],R=/\)\s+/,I=/^[\-\d\.]+/,V=L.document.body,P=Array.prototype.slice,D=(document.defaultView||{}).getComputedStyle,U={transform:"",transition:""},q=!1,W=0,X=0,F=0,Y={},B={},z={},Q=n.values,G=n.functions,$=0,J=A.length;J>$&&!o(U,A[$]);$++);o(U,"");var Z=U.transform,K=U.transition,te=w(Z),ee=w(K);return te&&ee&&(q=!0),s.prototype={isPlaying:function(){return q?!!this._runningActors.state:i.isRunning(this.name)},isCompleted:function(){return 0>=this._count},play:function(){return this.isCompleted()&&(clearTimeout(this._end_timer),this._reset_promise.fire(),this._optCache.forEach(function(t){this.actor(t)},this)),q?this.isPlaying()||(this._runningActors.state=1,this._runningActors.forEach(h)):i.run(this.name),this},pause:function(){return q?(this._runningActors.state=0,this._runningActors.forEach(l)):i.pause(this.name),this},clear:function(){return this.cancel(),this._optCache.forEach(function(t){t._cached=!1}),this._optCache.length=0,this},cancel:function(){return c(this,function(t,e){q?l(e):i.remove(t)}),this._optCache.forEach(function(t){t._promise.reject([{target:t.target,succ:!1}]).disable()}),this},complete:function(){return c(this,function(t,e){q?(u(e),e._promise.resolve([{target:e.target,succ:!0}]).disable()):i.complete(t)}),this},actor:function(t,n){function i(t){(t||l.follow()).reset().enable()}function o(t){return t.follow().bind(s),t._opt._watcher=s,delete t._opt._parent,t}function s(t){--p._count>0||(p._end_timer=setTimeout(function(){c(p),p._promise[t.succ?"resolve":"reject"]([{succ:t.succ}])},0))}var l,u,p=this,m=this.name;if(clearTimeout(this._end_timer),n){if(t.nodeType){var v,g={};if(M.forEach(function(t,e){"prop"===t?v=this[e]:"to"!==t&&(g[t]=this[e])},arguments),u=Object.keys(v).map(function(t){return p.actor(e.mix({_parent:!0,prop:t,to:v[t]},this))},g),1===u.length)return u[0]}else u=P.call(arguments),u=u.map(function(t){return t._parent=!0,p.actor(t)});return this._reset_promise.bind(i),l=new a(u,p)}if(t.prop=U[t.prop]||t.prop,t._promise&&i(t._promise),t.prop===Z){var _=x(t.target);return u=f(t.to,function(n){return e.merge(n,t),n._parent=!0,n._promise=_,p.actor(n)}),this._reset_promise.bind(i),l=new a(u,p)}return p._count++,t._promise||(t._promise=new r.Promise),q?(this._runningActors.push(t),this.isPlaying()&&h(t)):d(m,t),l=new a(t,p),t._cached||(t._cached=!0,this._optCache.push(t),o(l)),l},group:function(){var t,e=this,n=P.call(arguments).filter(function(t){return t.stage===e});return this._reset_promise.bind(function(){t.follow().reset().enable()}),t=new a(n,e)},follow:function(){return this._promise}},a.prototype={enter:function(t){this.stage&&this.exit();var n=t.actor.apply(t,[].concat(T(this)));return n.follow().merge(this.follow()),e.mix(this,n)},exit:function(){var t=this.stage,n=this._opt;if(!t)return this;this.members?this.members=this.members.map(function(t){return t.exit()}):(q?(C(t._runningActors,n),t.isPlaying()&&l(n)):i.remove(t.name,n._render),C(t._optCache,n),n._promise.reject([{target:n.target,succ:!1}]).disable());var r=this.fork();return n._parent||r.follow().merge(n._promise),e.occupy(n,r._opt),delete this.stage,this},fork:function(){if(this.members)return new a(this.members.map(function(t){return t.fork()}));var t={};return M.forEach(function(e){t[e]=this[e]},this._opt),t._promise=new r.Promise,new a(t)},setto:function(t){return S(this,t,function(t,e){return e||0===e?e:t.to})},extendto:function(t){return S(this,t,function(t,e){if(!e)return t.to;var n=y(t.to,e);return parseFloat(t.to)+parseFloat(e)+n})},reverse:function(){return S(this,{},function(t){return void 0!==t.from?t.from:t._current_from})},follow:function(){return this._opt._promise}},e.mix(E,{VERSION:"1.0.3",renderMode:q?"css":"js",Stage:s,Actor:a,config:function(t){t.easing&&(e.mix(Q,t.easing.values),e.mix(G,t.easing.functions),i.config({easing:G})),/(js|css)/.test(t.renderMode)&&(q="css"===t.renderMode,this.renderMode=t.renderMode)},transform:b}),E}),define("../cardkit/view/slidelist",["mo/lang","dollar","choreo","eventmaster","momo/swipe"],function(t,e,n,i,r){function o(t,e){this.init(t,e),this.set(this._config)}function s(t,n){t=e(t);var i=t[0][a];if(i&&l[i])return l[i];i=t[0][a]=++c,n=n||{},n.items=".ck-item";var r=l[i]=new s.Slidelist(t,n);return r}var a="_ckMiniUid",c=0,l={},u={items:".item"};return o.prototype={_defaults:u,init:function(n,r){this.event=i(),this._node=e(n),this._items=[],r=t.mix({},this.data(),r),this._config=t.config({},r,this._defaults)},set:function(n){return n?(t.mix(this._config,n),n.items&&(this._items.forEach(this._removeItem,this),e(n.items,this._node).forEach(this._addItem,this)),this):this},data:function(){return this._node.data()},_addItem:function(t){t=e(t);var i=this,o={order:this._items.length,node:t,swipeLeft:r(t[0],{event:"swipeleft"},function(){var e=o.order+1;if(e>i._items.length-1)return n().play().actor(i._node[0],{transform:"translateX(-20px)"},100,"easeOut").follow().done(function(){return n().play().actor(i._node[0],{transform:"translateX(0px)"},100,"easeIn").follow()}),void 0;var r=i._items[e].node;r.addClass("moving"),n.transform(r[0],"translateX",t[0].offsetWidth+"px"),n().play().actor(i._node[0],{transform:"translateX("+(0-t[0].offsetWidth)+"px)"},300,"easeInOut").follow().done(function(){n.transform(r[0],"translateX","0"),r.addClass("enable").removeClass("moving"),t.removeClass("enable"),n.transform(i._node[0],"translateX","0")}),i.event.fire("change",[e])}),swipeRight:r(t[0],{event:"swiperight"},function(){var e=o.order-1;if(0>e)return n().play().actor(i._node[0],{transform:"translateX(20px)"},100,"easeOut").follow().done(function(){return n().play().actor(i._node[0],{transform:"translateX(0px)"},100,"easeIn").follow()}),void 0;var r=i._items[e].node;r.addClass("moving"),n.transform(r[0],"translateX",0-t[0].offsetWidth+"px"),n().play().actor(i._node[0],{transform:"translateX("+t[0].offsetWidth+"px)"},300,"easeInOut").follow().done(function(){n.transform(r[0],"translateX","0"),r.addClass("enable").removeClass("moving"),t.removeClass("enable"),n.transform(i._node[0],"translateX","0")}),i.event.fire("change",[e])})};this._items.push(o)},_removeItem:function(t){t.swipeLeft.disable(),t.swipeRight.disable(),this._items.splice(this._items.indexOf(t),1)}},s.Slidelist=o,s}),define("moui/overlay",["mo/lang","dollar","eventmaster","mo/template/string"],function(t,e,n,i){function r(t){this.init(t),this.set(this._config)}function o(t){return new o.Overlay(t)}var s=e("body"),a="mouiOverlay",c='<div id="{{id}}" class="{{cname}}">                <header><h2></h2></header>                <article></article>            </div>',l='<span class="loading"><i>.</i><i>.</i><i>.</i></span>',u="加载中",h=0,d={title:"",content:"",className:"moui-overlay",openDelay:50,closeDelay:0,event:{}};return r.prototype={_ns:a,_template:c,_defaults:d,init:function(r){return this.id=this._ns+ ++h,this.event=n(),this._config=t.config({},r,this._defaults),s.append(i.format(this._template,{id:this.id,cname:this._config.className})),this._node=e("#"+this.id),this._header=this._node.find("header").eq(0),this._title=this._header.find("h1"),this._content=this._node.find("article").eq(0),this},set:function(e){return e?(t.config(this._config,e,this._defaults),"string"==typeof e.title&&this.setTitle(e.title),void 0!==e.content&&this.setContent(e.content),void 0!==e.className&&(this._node[0].className=e.className),this):this},setTitle:function(t){return this._title.html(t),this},setContent:function(t){return this._content.html(t),this},showLoading:function(t){return this._node.addClass("loading"),this._title.html((t||u)+l),this},hideLoading:function(){return this._node.removeClass("loading"),this._title.html(this._config.title),this},open:function(){if(clearTimeout(this._actimer),this.isOpened)return this.cancelClose(),this;var t=this,e=arguments;return this.prepareOpen.apply(t,e),this._actimer=setTimeout(function(){t.applyOpen.apply(t,e)},this._config.openDelay),this},close:function(){if(clearTimeout(this._actimer),!this.isOpened)return this.cancelOpen(),this;var t=this,e=arguments;return this.prepareClose.apply(t,e),this._actimer=setTimeout(function(){t.applyClose.apply(t,e)},this._config.closeDelay),this},prepareOpen:function(){this._node.appendTo(s).addClass("rendered"),this.event.fire("prepareOpen",[this])},prepareClose:function(){this.event.fire("prepareClose",[this]),this._node.removeClass("active")},cancelOpen:function(){this._node.removeClass("rendered"),this.event.fire("cancelOpen",[this])},cancelClose:function(){this._node.addClass("active"),this.event.fire("cancelClose",[this])},applyOpen:function(){this.isOpened=!0,this._node.addClass("active"),this.event.fire("open",[this])},applyClose:function(){this.isOpened=!1,this._content.empty(),this._node.removeClass("rendered"),this.event.fire("close",[this])},destroy:function(){return this._node.remove(),this.event.fire("destroy",[this]),this}},o.Overlay=r,o}),define("moui/growl",["dollar","mo/lang","mo/template","moui/overlay"],function(t,e,n,i){function r(t){return new r.Growl(t)}var o="mouiGrowl",s='<div id="{{id}}" class="moui-growl">                <header><h2></h2></header>                <article></article>            </div>',a="corner-",c={className:"moui-growl",closeDelay:300,corner:"center",expires:1400,keepalive:!1},l=e.construct(i.Overlay);return e.mix(l.prototype,{_ns:o,_template:s,_defaults:e.merge({},c,l.prototype._defaults),set:function(t){return this.superClass.set.call(this,t),t.corner&&t.corner!==this._currentCorner&&(this._currentCorner&&this._node.removeClass(a+this._currentCorner),this._node.addClass(a+t.corner),this._currentCorner=t.corner),this},applyOpen:function(){if(clearTimeout(this._exptimer),-1!=this._config.expires){var t=this;this._exptimer=setTimeout(function(){t.close()},this._config.expires)}return this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){this.isOpened=!1,this._node.removeClass("rendered"),this.event.fire("close",[this]),this._config.keepalive||this.destroy()}}),r.Growl=l,r}),define("../cardkit/view/growl",["mo/lang","dollar","moui/growl"],function(t,e,n){function i(i,a){var c;i.nodeName?(i=e(i),c=i[0][r],c&&s[c]&&s[c].close(),c=i[0][r]=++o,a=t.mix({},i.data(),a)):a=i||{},a.className="ck-growl";var l=n(a);return c&&(s[c]=l),l}var r="_ckGrowlUid",o=0,s={};return i}),define("moui/control",["mo/lang","dollar","eventmaster"],function(t,e,n){function i(t,e){this.init(t,e),this.set(this._config)}function r(t,e){return new r.Control(t,e)}var o={field:null,label:null,enableVal:1,disableVal:0,enableLabel:"",disableLabel:"",loadingLabel:"稍等..."};return i.prototype={_defaults:o,init:function(i,r){this.event=n();var o=this._node=e(i);o.hasClass("enabled")&&(this.isEnabled=!0),r=t.mix({field:o,label:o},this.data(),r),this.setNodes(r),this._label[0]&&(this._isLabelClose=this._label.isEmpty()),this.isEnabled?(r.enableVal=this.val(),r.enableLabel=this.label()):(r.disableVal=this.val(),r.disableLabel=this.label()),this._config=t.config({},r,this._defaults)},set:function(e){return e?(t.mix(this._config,e),this.setNodes(e),this):this},setNodes:function(t){return void 0!==t.field&&(this._field=t.field?e(t.field,"string"==typeof t.field&&this._node):[]),void 0!==t.label&&(this._label=t.label?e(t.label,"string"==typeof t.label&&this._node):[]),this},val:function(t){return this._field[0]?"A"===this._field[0].nodeName?this._field.attr("href",t):this._field.val(t):void 0},label:function(t){return this._label[0]?this._isLabelClose?this._label.val(t):this._label.html(t):void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this.label(this._config.loadingLabel),this},hideLoading:function(){return this._node.removeClass("loading"),this},toggle:function(){return this.isEnabled?this.disable():this.enable(),this},enable:function(){return this.isEnabled?this:(this.isEnabled=!0,this._node.addClass("enabled"),this.val(this._config.enableVal),this._config.enableLabel&&this.label(this._config.enableLabel),this.event.reset("disable").resolve("enable",[this]),this)
},disable:function(){return this.isEnabled?(this.isEnabled=!1,this._node.removeClass("enabled"),this.val(this._config.disbleVal),this._config.disableLabel&&this.label(this._config.disableLabel),this.event.reset("enable").resolve("disable",[this]),this):this}},r.Control=i,r}),define("moui/picker",["mo/lang","dollar","eventmaster","moui/control"],function(t,e,n,i){function r(t,e){this.init(t,e),this.set(this._config)}function o(t){a.call(this,"enable",t),this.event.fire("change",[this,t])}function s(t){a.call(this,"disable",t),this.event.fire("change",[this,t])}function a(t,e){if("enable"===t)if(this._config.multiselect)this._allSelected.push(e);else{var n=this._lastSelected;this._lastSelected=e,n&&n.disable()}else if(this._config.multiselect){var i=this._allSelected.indexOf(e);-1!==i&&this._allSelected.splice(i,1)}else{if(e&&this._lastSelected!==e)return;this._lastSelected=null}this._field[0]&&this._field.val(this.val())}function c(t,e){return new c.Picker(t,e)}var l="_moPickerOid",u={field:'input[type="hidden"]',options:".option",ignoreRepeat:!1,ignoreStatus:!1,multiselect:!1};return r.prototype={_defaults:u,init:function(i,r){return this._uoid=0,this.event=n(),this._node=e(i),this._options=[],r=t.mix({},this.data(),r),this._config=t.config({},r,this._defaults),this},set:function(n){return n?(t.mix(this._config,n),void 0!==n.multiselect&&(n.multiselect?this._allSelected||(this._allSelected=[]):(this._allSelected=null,this._lastSelected=null)),void 0!==n.field&&(this._field=n.field?e(n.field,"string"==typeof n.field&&this._node):[]),n.options&&(this._options.forEach(this.removeOption,this),e(n.options,this._node).forEach(this.addOption,this)),this):this},addOption:function(t){if(t=e(t)[0],!t[l]){t[l]=++this._uoid;var n=i(t,{enableVal:t.value,label:!1});return n.event.bind("enable",o.bind(this)).bind("disable",s.bind(this)),this._options.push(n),n.isEnabled&&a.call(this,"enable",n),this}},removeOption:function(t){var e;return t.constructor===i.Control?(e=t,t=t._node[0]):e=this.getOption(t),this.unselect(t),e&&this._options.splice(this._options.indexOf(e),1),this},getOption:function(t){if("number"==typeof t)t=this._options[t];else if("string"==typeof t)t=this._options.filter(function(e){return e.val()===t})[0];else{var n=e(t)[0][l];if(!n)return null;t=this._options.filter(function(t){return t._node[0][l]===n})[0]}return t},val:function(){return this._config?this._config.multiselect?this._allSelected.map(function(t){return t.val()}):this._lastSelected?this._lastSelected.val():void 0:void 0},data:function(){return this._node.data()},showLoading:function(){return this._node.addClass("loading"),this},hideLoading:function(){return this._node.removeClass("loading"),this},undo:function(){return this._lastActionTarget&&this._lastActionTarget.toggle(),this},selectAll:function(){return this._config.multiselect&&this._options.forEach(function(t){t.enable()}),this._lastActionTarget=null,this},unselectAll:function(){return this._config.multiselect?(this._options.forEach(function(t){t.disable()}),this._lastActionTarget=null):this.undo(),this},selectInvert:function(){return this._config.multiselect&&this._options.forEach(function(t){t.toggle()}),this._lastActionTarget=null,this},select:function(t){var e=this.getOption(t);if(e)if(!this._config.multiselect&&this._config.ignoreStatus)a.call(this,"enable",e),this.event.fire("change",[this,e]);else{if((this._config.multiselect&&-1!==this._allSelected.indexOf(e)||!this._config.multiselect&&this._lastSelected===e)&&!this._config.ignoreRepeat)return this.unselect(t);this._lastActionTarget=e.enable()}return this},unselect:function(t){if(t){var e=this.getOption(t);e&&(this._lastActionTarget=e.disable())}else this.unselectAll();return this}},c.Picker=r,c}),define("moui/actionview",["dollar","mo/lang","mo/template/string","moui/overlay","moui/picker"],function(t,e,n,i,r){function o(t){return new o.ActionView(t)}var s=e.mix,a="mouiActionView",c='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <div class="content">                        <header><h1></h1></header>                        <div class="desc"></div>                        <article></article>                    </div>                </div>                <footer>                    <input type="button" class="confirm" data-is-default="true">                    <input type="button" class="cancel">                </footer>            </div>',l={className:"moui-actionview",closeDelay:300,confirmText:"确认",cancelText:"取消",options:null,multiselect:!1},u=e.construct(i.Overlay);return s(u.prototype,{_ns:a,_template:c,_defaults:e.merge({},l,u.prototype._defaults),init:function(t){return this.superClass.init.call(this,t),this._wrapper=this._node.find(".wrapper").eq(0),this._actionsWrapper=this._content,this._wrapperContent=this._wrapper.find(".content").eq(0),this._content=this._wrapper.find(".desc").eq(0),this._footer=this._node.find("footer").eq(-1),this._confirmBtn=this._footer.find(".confirm"),this._cancelBtn=this._footer.find(".cancel"),this},set:function(e){if(!e)return this;if(this.superClass.set.call(this,e),void 0!==e.options){this._actionsWrapper.empty();var n=e.options?t(e.options).clone():[];n.length?(this._actionsWrapper.append(n),this._picker=r(this._actionsWrapper,{options:n,multiselect:this._config.multiselect,ignoreStatus:!this._config.multiselect}),this._node.removeClass("confirm-kind")):this._node.addClass("confirm-kind")}return void 0!==e.multiselect&&(e.multiselect?this._footer.addClass("multi"):this._footer.removeClass("multi")),e.confirmText&&this._confirmBtn.val(e.confirmText),e.cancelText&&this._cancelBtn.val(e.cancelText),this},val:function(){return this._picker?this._picker.val():void 0},confirm:function(){return this.event.fire("confirm",[this,this._picker]),this.ok()},cancel:function(){return this.event.fire("cancel",[this,this.picker]),this.ok()},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){if(!this._config.multiselect&&this._picker){var t=this;this._picker.event.once("change",function(){t.confirm()})}this.superClass.applyOpen.apply(this,arguments)},applyClose:function(){!this._config.multiselect&&this._picker&&this._picker.event.reset(),this.superClass.applyClose.apply(this,arguments)}}),u.prototype.done=u.prototype.ok,["select","unselect","undo","selectAll","unselectAll","selectInvert"].forEach(function(t){this[t]=function(){return this._picker[t].apply(this._picker,arguments)}},u.prototype),o.ActionView=u,o}),define("../cardkit/view/actionview",["mo/lang","dollar","moui/actionview","../cardkit/bus"],function(t,e,n,i){function r(t,c){var l=t;if("object"==typeof t?(t=e(t),l=t[0][o]):t=!1,l&&a[l])return a[l].set(c);t&&(l=t[0][o]=++s),c=c||{},c.className="ck-actionview";var u=a[l]=n(c),h={component:u};return u.event.bind("prepareOpen",function(t){r.current=t,i.fire("actionView:prepareOpen",[t])}).bind("cancelOpen",function(t){r.current=null,i.fire("actionView:cancelOpen",[t])}).bind("open",function(e){i.fire("actionView:open",[e]),t&&t.trigger("actionView:open",h)}).bind("close",function(){r.current=null,i.fire("actionView:close",[u]),t&&t.trigger("actionView:close",h)}).bind("cancel",function(){t&&t.trigger("actionView:cancel",h)}).bind("confirm",function(e,n){if(t&&t.trigger("actionView:confirm",h),n&&n._lastSelected){var r=n._lastSelected._node.attr("target");r&&i.fire("actionView:jump",[e,n.val(),r])}}),u}var o="_ckActionViewUid",s=0,a={};return r}),define("moui/modalview",["dollar","mo/lang","mo/template/string","moui/overlay"],function(t,e,n,i){function r(t){return new r.ModalView(t)}var o=e.mix,s="mouiModalView",a='<div id="{{id}}" class="{{cname}}">                <div class="shd"></div>                <div class="wrapper">                    <header>                        <button type="button" class="confirm" data-is-default="true"></button>                        <button type="button" class="cancel"></button>                        <h1></h1>                    </header>                    <article><div class="content"></div></article>                </div>            </div>',c={className:"moui-modalview",iframe:!1,hideConfirm:!1,confirmText:"确认",cancelText:"取消"},l=e.construct(i.Overlay);return o(l.prototype,{_ns:s,_template:a,_defaults:e.merge({},c,l.prototype._defaults),init:function(t){return this.superClass.init.call(this,t),this._wrapper=this._node.find(".wrapper").eq(0),this._contentWrapper=this._wrapper.find("article").eq(0),this._content=this._contentWrapper.find(".content").eq(0),this._confirmBtn=this._header.find(".confirm"),this._cancelBtn=this._header.find(".cancel"),this},set:function(t){if(!t)return this;var e=this;return e.superClass.set.call(e,t),void 0!==t.content?e._config.iframe=null:t.iframe&&e._setIframeContent(t),void 0!==t.hideConfirm&&(t.hideConfirm?this._confirmBtn.hide():this._confirmBtn.show()),t.confirmText&&this._confirmBtn.html(t.confirmText),t.cancelText&&this._cancelBtn.html(t.cancelText),e},setContent:function(t){return this.superClass.setContent.call(this,t),t&&this.event.fire("contentchange",[this]),this},_setIframeContent:function(){var e=this;this._clearIframeContent(),e.setContent(""),e.showLoading(),e._iframeContent=t('<iframe class="moui-modalview-iframebd" frameborder="0" scrolling="no" style="visibility:hidden;width:100%;"></iframe>').bind("load",function(){try{if(!this.contentWindow.document.body.innerHTML)return;if(e._iframeWindow=t(this.contentWindow),!e._iframeContent&&e._iframeWindow[0].location.href!==e._config.iframe)return;e._iframeContent[0].style.visibility="",e.event.resolve("frameOnload",[e]),e.hideLoading()}catch(n){}}).appendTo(e._content)},_clearIframeContent:function(){this._iframeContent&&(this._iframeContent.remove(),this._iframeContent=null),this.event.reset("frameOnload")},confirm:function(){return this.event.fire("confirm",[this]),this},cancel:function(){return this.event.fire("cancel",[this]),this.ok(),this},ok:function(){return this.close(),this.event.promise("close")},applyOpen:function(){this.superClass.applyOpen.apply(this,arguments),this._config.iframe&&this._iframeContent.attr("src",this._config.iframe)},applyClose:function(){this._clearIframeContent(),this._contentWrapper[0].scrollTop=0,this.superClass.applyClose.apply(this,arguments)}}),l.prototype.done=l.prototype.ok,r.ModalView=l,r}),define("mo/network/ajax",["mo/browsers"],function(browsers,require,exports){var httpParam=function(t){var e=[];if(t.constructor==Array)for(var n=0;t.length>n;n++)e.push(t[n].name+"="+encodeURIComponent(t[n].value));else for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return e.join("&").replace(/%20/g,"+")},ajax=function(s){function httpSuccess(t){try{return!t.status&&"file:"==location.protocol||t.status>=200&&300>t.status||304==t.status||1223==t.status||browsers.safari&&!t.status}catch(e){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),xml="xml"==type||!type&&ct&&ct.indexOf("xml")>=0,data=xml?r.responseXML:r.responseText;if(xml&&"parsererror"==data.documentElement.tagName)throw"parsererror";return"script"==type&&eval.call(window,data),"json"==type&&(data=eval("("+data+")")),data}var options={type:s.type||"GET",url:s.url||"",data:s.data||null,dataType:s.dataType,contentType:s.contentType===!1?!1:s.contentType||"application/x-www-form-urlencoded",username:s.username||null,password:s.password||null,timeout:s.timeout||0,processData:void 0===s.processData?!0:s.processData,beforeSend:s.beforeSend||function(){},complete:s.complete||function(){},handleError:s.handleError||function(){},success:s.success||function(){},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}};options.data&&options.processData&&"string"!=typeof options.data&&(options.data=httpParam(options.data)),options.data&&"get"==options.type.toLowerCase()&&(options.url+=(options.url.match(/\?/)?"&":"?")+options.data,options.data=null);var status,data,requestDone=!1,xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;xhr.open(options.type,options.url,!0,options.username,options.password);try{options.data&&options.contentType!==!1&&xhr.setRequestHeader("Content-Type",options.contentType),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Accept",s.dataType&&options.accepts[s.dataType]?options.accepts[s.dataType]+", */*":options.accepts._default)}catch(e){}options.beforeSend&&options.beforeSend(xhr);var onreadystatechange=function(t){if(!requestDone&&xhr&&(4==xhr.readyState||"timeout"==t)){if(requestDone=!0,ival&&(clearInterval(ival),ival=null),status="timeout"==t&&"timeout"||!httpSuccess(xhr)&&"error"||"success","success"==status){try{data=httpData(xhr,options.dataType)}catch(e){status="parsererror"}options.success(data,status)}else options.handleError(xhr,status);options.complete(xhr,status),xhr=null}},ival=setInterval(onreadystatechange,13);return options.timeout>0&&setTimeout(function(){xhr&&(xhr.abort(),requestDone||onreadystatechange("timeout"))},options.timeout),xhr.send(options.data),xhr};exports.ajax=ajax,exports.params=httpParam}),define("mo/network",["mo/lang","mo/network/ajax"],function(_,net,require,exports){var window=this,uuid4jsonp=1;_.mix(exports,net),exports.getScript=function(t,e){var n=_.isWindow(this)?this.document:document,i=n.createElement("script");i.type="text/javascript",i.async="async",e?_.isFunction(e)&&(e={callback:e}):e={},e.charset&&(i.charset=e.charset),i.src=t;var r=n.getElementsByTagName("head")[0];i.onload=i.onreadystatechange=function(t,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=void 0,!n&&e.callback&&e.callback())},r.insertBefore(i,r.firstChild)},exports.getStyle=function(t){var e=this.document||document,n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",t);var i=e.getElementsByTagName("head")[0];i.appendChild(n)};var RE_DOMAIN=/https?\:\/\/(.+?)\//;exports.getJSON=function(t,e,n,i){var r=t.match(RE_DOMAIN);if((!e||_.isFunction(e))&&(i=n,n=e,e={}),n&&!(i&&i.isScript||r&&r[1]!==window.location.host))return exports.ajax({url:t,data:e,success:n,error:i&&i.error,dataType:"json"}),!0;i=_.mix({charset:"utf-8",callback:"__oz_jsonp"+ ++uuid4jsonp},i||{}),i.random&&(e[i.random]=+new Date);var o=i.callbackName||"jsoncallback";e[o]=i.callback,t=[t,/\?/.test(t)?"&":"?",exports.httpParam(e)].join(""),n&&_.ns(i.callback,n),delete i.callback,exports.getScript(t,i)},exports.getRequest=function(t,e){var n=new Image;n.onload=function(){n=null},n.src=e?[t,/\?/.test(t)?"&":"?","string"==typeof e?e:exports.httpParam(e)].join(""):t},exports.parseJSON=function(json){json=json.replace(/^[\w(<\/*!\s]*?\{/,"{").replace(/[^\}]*$/,"");try{json=window.JSON?window.JSON.parse(json):eval(json)}catch(ex){json=!1}return json}}),define("../cardkit/view/modalcard",["dollar","mo/network","moui/modalview","../cardkit/supports"],function(t,e,n,i){var r=n({className:"ck-modalview",closeDelay:400}),o=r.set;return r.set=function(n){if(!n)return this;var i=this,r=n.jsonUrl||n.url;return r&&(n.content="",i.showLoading(),e.ajax({url:r,dataType:n.jsonUrl?"json":"text",success:function(t){n.jsonUrl&&(t=t.html),i.setContent(t),i.hideLoading()}})),n.iframeUrl&&(n.iframe=n.iframeUrl),n.source&&(n.content=t("."+n.source).map(function(e){return"text/jscode"===t(e).attr("type")?"<script>"+e.innerHTML+"</script>":e.innerHTML}).join("")),o.call(this,n)},r.ok=r.done=i.UNIVERSAL_TRANS?function(){return history.state?history.back():history.go(-2),this.event.promise("close")}:function(){return this.event.fire("needclose"),this.event.promise("close")},r.event.bind("confirm",function(t){t.event.fire("confirmOnThis",arguments)}).bind("close",function(t){t.event.unbind("confirmOnThis")}),r}),define("moui/slider",["mo/lang","dollar","eventmaster"],function(t,e,n){function i(t,e){this.init(t,e)}function r(t,e){return new r.Slider(t,e)}return i.prototype={init:function(t){var i,r=this._node=e(t);this.event=n(),r.data("init")||(r.data("init",!0),this._field=i=r.find(".slider-field"),this._hoverArea=r.find(".slider-hover"),this._selectedArea=r.find(".slider-selected"),this._step=i.attr("step"),this._max=i.attr("max"),this._min=i.attr("min"),this._stepWidth=this._step*r.width()/(this._max-this._min))},calc:function(t){var e=t.changedTouches?t.changedTouches[0].pageX:t.pageX,n=this._node,i=this._stepWidth,r=this._step,o=e-n.offset().left;return o>n.width()?o=n.width():0>o&&(o=0),Math.ceil(o/i)*r},val:function(t){if(this._field[0]){var e=this._field.val(t);return void 0!==t&&this.event.fire("change"),e}},show:function(t){var e=this._stepWidth,n=this._selectedArea,i=this._hoverArea;i.hide(),n.css({width:t*e}).show()},pretend:function(t){var e=this._stepWidth,n=this._selectedArea,i=this._hoverArea,r=t*e;i.data("width")!=r&&(n.hide(),i.css({width:r}).show().data("width",r))}},r.Slider=i,r}),define("../cardkit/view/stars",["mo/lang","dollar","mo/network","moui/slider"],function(t,e,n,i){function r(t){t=e(t);var n=t[0][o];if(n&&a[n])return a[n];n=t[0][o]=++s;var r=a[n]=i(t);return r.event.bind("change",function(){var t=r.val();r.show(t)}),r}var o="_ckStarsUid",s=0,a={};return r.gc=function(t){for(var e in a)t(a[e])&&delete a[e]},r}),define("../cardkit/view/picker",["mo/lang","dollar","mo/network","moui/picker"],function(t,e,n,i){function r(t,e){var i=t.jsonUrl||t.url;i?n.ajax({url:i,type:t.method||"post",dataType:t.jsonUrl?"json":"text",success:e}):e(!1)}function o(n,o){n=e(n);var l=n[0][s];if(l&&c[l])return c[l].set(o);l=n[0][s]=++a,o=t.mix({options:".ck-option"},o||{});var u=c[l]=i(n,o);return u.event.bind("change",function(t,e){var i,o=e.data(),s={component:t};t.showLoading(),i=e.isEnabled?{method:o.requestMethod,url:o.enableUrl,jsonUrl:o.enableJsonUrl}:{method:o.requestMethod,url:o.disableUrl,jsonUrl:o.disableJsonUrl},r(i,function(e){t.hideLoading(),e!==!1&&(t.responseData=e,n.trigger("picker:response",s))}),n.trigger("picker:change",s)}),u}var s="_ckPickerUid",a=0,c={};return o.gc=function(t){for(var e in c)t(c[e])&&delete c[e]},o}),define("../cardkit/view/control",["mo/lang","dollar","mo/network","moui/control"],function(t,e,n,i){function r(t,n){t=e(t);var i=t[0][o];if(i&&a[i])return a[i].set(n);i=t[0][o]=++s;var c=a[i]=new r.Control(t,n);return c.event.bind("enable",function(e){t.trigger("control:enable",{component:e})}).bind("disable",function(e){t.trigger("control:disable",{component:e})}),c}var o="_ckControlUid",s=0,a={},c=t.construct(i.Control);return t.mix(c.prototype,{enable:function(){var t=this.data();return this.request({method:t.requestMethod,url:t.enableUrl,jsonUrl:t.enableJsonUrl},function(){this.superClass.enable.call(this)})},disable:function(){var t=this.data();return this.request({method:t.requestMethod,url:t.disableUrl,jsonUrl:t.disableJsonUrl},function(){this.superClass.disable.call(this)})},request:function(t,e){var i=this,r=t.jsonUrl||t.url;return r?(i.showLoading(),n.ajax({url:r,type:t.method||"post",dataType:t.jsonUrl?"json":"text",success:function(t){i.hideLoading(),i.responseData=t,e.call(i)}})):e.call(i),this}}),r.Control=c,r.gc=function(t){for(var e in a)t(a[e])&&delete a[e]},r}),define("momo/scroll",["mo/lang","momo/base"],function(t,e){function n(t,e,i){return new n.Class(t,e,i)}var i=t.construct(e.Class);return t.mix(i.prototype,{EVENTS:["scrolldown","scrollup","scrollstart","scrollend"],DEFAULT_CONFIG:{directThreshold:5,scrollEndGap:5},watchScroll:function(t){this.scrollingNode=t},checkScollDirection:function(t){var e={target:this.node},n=t-this._lastY,i=this._config.directThreshold;0-i>n?(this._scrollDown!==!0&&this.trigger(e,this.event.scrolldown),this._lastY=t,this._scrollDown=!0):n>i&&(this._scrollDown!==!1&&this.trigger(e,this.event.scrollup),this._lastY=t,this._scrollDown=!1)},press:function(t){var e=this,n=this.SUPPORT_TOUCH?t.touches[0]:t;if(e._scrollDown=null,e._lastY=n.clientY,e._scrollY=null,e.scrollingNode){var i=e._scrolling;e._scrolling=!1;var r=e._tm=t.timeStamp;e.once(e.MOVE,function(){e.once("scroll",function(){r===e._tm&&(e._scrollY=e.scrollingNode.scrollTop,i||(e._started=!0,e.trigger({target:e.node},e.event.scrollstart)))},e.scrollingNode)})}},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this.checkScollDirection(e.clientY),this.scrollingNode&&(this._scrollY=this.scrollingNode.scrollTop)},release:function(t){var e=this,n=this.SUPPORT_TOUCH?t.changedTouches[0]:t,i={target:e.node};if(this.checkScollDirection(n.clientY),null!==e._scrollY){var r=e.scrollingNode,o=Math.abs(r.scrollTop-e._scrollY);if(e._scrollY>=0&&e._scrollY<=r.scrollHeight+r.offsetHeight&&o&&e._config.scrollEndGap>o)e._started=!1,e.trigger(i,e.event.scrollend);else{var s=e._tm;e._scrolling=!0,e.once("scroll",function(){s===e._tm&&(e._scrolling=!1,e._started=!1,e.trigger(i,e.event.scrollend))},r)}e._scrollY=null}else e._started&&(e._started=!1,e.trigger(i,e.event.scrollend))}}),n.Class=i,n}),define("momo/drag",["mo/lang","momo/base"],function(t,e){function n(t,e,i){return new n.Class(t,e,i)}var i=t.construct(e.Class);return n.Class=i,n}),define("momo/tap",["mo/lang","momo/base"],function(t,e){function n(t,e,i){return new n.Class(t,e,i)}var i=t.construct(e.Class);return t.mix(i.prototype,{EVENTS:["tap","doubletap","hold"],DEFAULT_CONFIG:{tapRadius:10,doubleTimeout:300,holdThreshold:500},press:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._startTime=t.timeStamp,this._startTarget=e.target,this._startPosX=e.clientX,this._startPosY=e.clientY,this._movePosX=this._movePosY=this._moveTarget=0/0},move:function(t){var e=this.SUPPORT_TOUCH?t.touches[0]:t;this._moveTarget=e.target,this._movePosX=e.clientX,this._movePosY=e.clientY},release:function(t){var e=this,n=t.timeStamp;this._moveTarget&&this._moveTarget!==this._startTarget||Math.abs(e._movePosX-e._startPosX)>e._config.tapRadius||Math.abs(e._movePosY-e._startPosY)>e._config.tapRadius||(n-e._startTime>e._config.holdThreshold?e.trigger(t,e.event.hold):e._lastTap&&n-e._lastTap<e._config.doubleTimeout?(t.preventDefault(),e.trigger(t,e.event.doubletap),e._lastTap=0):(e.trigger(t,e.event.tap),e._lastTap=n))}}),n.Class=i,n}),define("soviet",["mo/lang/es5","mo/lang/mix","mo/lang/type","mo/lang/struct","dollar"],function(t,e,n,i,r){function o(t,n){e.config(this,n||{},m),this.target=r(t),this.events={},this.locks={},this.traceStack||(this.traceStack=[])}function s(t,e,n){var i;return t&&(this.trace&&(this.traceStack.unshift("<"+e.nodeName+"#"+(e.id||"")+">."+(e.className||"").split(/\s+/).join(".")),this.traceStack.length>this.trace&&this.traceStack.pop()),i=t.call(e,n),this.preventDefault&&!i&&n.preventDefault()),i}function a(t,e,n,i){var r=t[e];i?t[e]=n:n&&(r||(r=t[e]=d()),r.push(n))}function c(t,e,n,i){var r=t[e];!n||i?delete t[e]:r&&r.clear(n)}function l(t,e){return t[e]}function u(t){return this.locks[t]=this.matchesSelector?{}:{".":{},"#":{},"&":{}}}function h(t,e,n,i,r){if(void 0===r&&(r=this.autoOverride),e){if(!this.matchesSelector){var o=(/^[\.#]/.exec(e)||["&"])[0];e=e.substr("&"!==o?1:0),t=t[o],"."===o&&(e=e.split(".").join(" "))}}else e="_self_";return i(t,e,n,r)}var d=i.fnQueue,f=n.isFunction,p=r.find.matchesSelector,m={preventDefault:!1,matchesSelector:!1,autoOverride:!1,trace:!1,traceStack:null};o.prototype={on:function(t,e,n){if(f(e)&&(n=e,e=void 0),"object"==typeof e)for(var i in e)this.on(t,i,e[i]);else{var r=this.events[t];r||(this.target.bind(t,this.trigger.bind(this)),this.reset(t),r=this.events[t]),h.call(this,r,e,n,a)}return this},off:function(t,e,n){f(e)&&(n=e,e=void 0);var i=this.events[t];return i&&h.call(this,i,e,n,c),this},matches:function(t,e){var n=this.events[t];return h.call(this,n,e,null,l)},reset:function(t){return t?(this.events[t]=this.matchesSelector?{}:{".":{},"#":{},"&":{}},u.call(this,t)):(this.events={},this.locks={}),this},disable:function(t,e){var n=this.locks;if(t){var i=n[t];i||(i=u.call(this,t)),e?h.call(this,i,e,!0,a,!0):i._disable=!0}else this._global_lock=!0;return this},enable:function(t,e){var n=this.locks;if(t){var i=n[t];i&&(e?h.call(this,i,e,null,c,!0):delete i._disable)}else delete this._global_lock;return this},trigger:function(t){var e,n=this,i=t.target,r=this.locks[t.type]||{},o=this.events[t.type];if(!o||this._global_lock||r._disable)return e;if(this.matchesSelector)Object.keys(o).forEach(function(i){!r[i]&&p(this,i)&&(e=s.call(n,o[i],this,t))},i);else{var a,c,l=(a="#")&&(c=i.id)&&o[a][c]||(a=".")&&(c=i.className)&&o[a][c]||(a="&")&&(c=i.nodeName.toLowerCase())&&o[a][c]||null;if(l){var u=r[a][c];u||(e=s.call(this,l,i,t))}}return o._self_&&(e=s.call(this,o._self_,i,t)),e}};var v=function(t,e){return new v.Soviet(t,e)};return v.Soviet=o,v}),define("../cardkit/app",["dollar","mo/lang","mo/browsers","mo/template","soviet","choreo","momo/base","momo/tap","momo/swipe","momo/drag","momo/scroll","../cardkit/view/control","../cardkit/view/picker","../cardkit/view/stars","../cardkit/view/modalcard","../cardkit/view/actionview","../cardkit/view/growl","../cardkit/view/slidelist","../cardkit/bus","../cardkit/render","../cardkit/supports","cardkit/env","mo/domready"],function(t,e,n,i,r,o,s,a,c,l,u,h,d,f,p,m,v,g,_,b,k,y){function w(){K.openModal(t(this).data())}function C(){var t=h(this);t.isEnabled||(t.enable(),E(t))}function x(){var t=h(this).toggle();E(t)}function T(n){var i=e.mix({confirmText:"确认",cancelText:"取消",multiselect:!1},n.data());i.options=t(i.options||".ck-option",n),m(n,i).open()}function S(t,e){var n=f(this),i=n.calc(t);n[e](i)}function E(t){t.parentId||(t.parentId=++z),K.viewportGarbage[t.parentId]=1}function O(){}function L(e,n){if(p.isOpened)return p.event.once("close",function(){L(e,n)}),K.closeModal(),void 0;var i,r="string"==typeof e;if(!r){for(i=e.target,e="";!i.href;)i=i.parentNode;if(t(i).hasClass("ck-link"))e=(i.href.replace(F.href,"").match(/^#(.+)/)||[])[1];else{if(/(^|\s)ck-\w+/.test(i.className))return;if(i.target)return R(i.href,i),void 0}}var s=e&&t("#"+e);if(!s){if(!i)return;e="ckLoading",s=K.loadingCard,n=i.href}if(K.hideTopbar(),!k.UNIVERSAL_TRANS&&s===K.loadingCard)return n&&K.openURL(n),void 0;K.sessionLocked=!0;var a=K.viewport;if(r||H(a[0].id,e,n),K.disableControl(),!k.UNIVERSAL_TRANS)return K.loadingCard.addClass("moving").show(),setTimeout(function(){K.changeView(s),a.hide(),K.loadingCard.hide().removeClass("moving"),K.enableControl(),K.sessionLocked=!1,K.showTopbar()},400),void 0;o.transform(s[0],"translateX",W.innerWidth+"px"),s.addClass("moving"),K.changeView(s),K.cardMask.css("opacity",0).addClass("moving");var c=o().play();c.actor(K.cardMask[0],{opacity:"1"},350,"ease"),c.actor(s[0],{transform:"translateX(0)"},400,"ease").follow().done(function(){a.hide(),K.cardMask.removeClass("moving"),s.removeClass("moving"),K.enableControl(),K.sessionLocked=!1,n?r?X.forward():(N(),F.href=n):K.showTopbar()})}function A(e){if(m.current)return m.current.close().event.once("close",function(){A(e)}),void 0;K.hideTopbar(),K.sessionLocked=!0;var n=t("#"+e),i=K.viewport;K.disableControl(),o.transform(i[0],"translateX","0px"),i.addClass("moving"),K.changeView(n),K.cardMask.css("opacity","1").addClass("moving");var r=o().play();r.actor(K.cardMask[0],{opacity:"0"},350,"ease"),r.play().actor(i[0],{transform:"translateX("+W.innerWidth+"px)"},400,"ease").follow().done(function(){K.cardMask.removeClass("moving"),i.hide().removeClass("moving"),o.transform(i[0],"translateX","0px"),K.enableControl(),K.sessionLocked=!1,"ckLoading"===e?(X.back(),Y.referrer&&Y.referrer!==F.href||F.reload(!0)):K.showTopbar()})}function H(t,e,n,i){k.UNIVERSAL_TRANS&&X.pushState({prev:t,next:e,link:n,opt:i,i:X.length},Y.title,F.href)}function j(){var t=sessionStorage.ck_footprint;try{t=t&&JSON.parse(t)||[]}catch(e){t=[]}var n=F.href,i=Y.referrer,r=sessionStorage.ck_lasturl,o=t.lastIndexOf(n),s=r===n&&i!==n,a=n===t[0],c=n===t[t.length-1],l=r&&r!==i&&!s;if(!l&&!s||!a){if(i)if(i===n)t.length=0,t.push(n);else if(l||i!==t[t.length-1])if(l&&r===t[0])-1!==o&&(t.length=o-1),t.unshift(n);else{if(i===t[o-1])return!0;if(i===t[t.length-2]&&c&&!l)return;t.length=0,t.push(n)}else-1!==o&&t.splice(0,o+1),t.push(n);else{if(c)return;t.length=0,t.push(n)}sessionStorage.ck_footprint=JSON.stringify(t)}}function N(){var t=sessionStorage.ck_footprint;try{t=t&&JSON.parse(t)||[]}catch(e){t=[]}var n=F.href;t.length=t.indexOf(n)+1,sessionStorage.ck_footprint=JSON.stringify(t)}function M(){if(!k.WINDOW_SCROLL){var t,e=K.viewport[0];1>e.scrollTop?e.scrollTop=1:e.scrollTop>(t=e.scrollHeight-e.offsetHeight-1)&&(e.scrollTop=t)}}function R(t,e){if(e=e||{target:"_self"},p.isOpened)return p.event.once("close",function(){R(t,e)}),K.closeModal(),void 0;if("_self"!==e.target)I(t,e.target);else{if(K.hideTopbar(),k.PREVENT_CACHE)return K.viewport.hide(),K.changeView(K.loadingCard),F.href=t,void 0;K.sessionLocked=!0;var n="ckLoading",i=K.loadingCard,r=K.viewport;K.disableControl(),N(),H(r[0].id,n,t),K.changeView(i),setTimeout(function(){r.hide(),K.enableControl(),K.sessionLocked=!1,F.href=t},10)}}function I(e,n){k.NEW_WIN?W.open(e,n):t('<a href="'+e+'" target="'+n+'"></a>').trigger("click")}function V(t){return K.viewportGarbage[t.parentId]}function P(){}function D(){return!1}var U,q,W=this,X=W.history,F=W.location,Y=W.document,B=Y.body,z=0,Q='<div class="ck-viewmask"></div>',G='<div class="ck-cardmask"></div>';e.mix(s.Class.prototype,{bind:function(e,n,i){return t(i||this.node).bind(e,n),this},unbind:function(e,n,i){return t(i||this.node).unbind(e,n),this},trigger:function(e,n){return t(e.target).trigger(n),this}});var $={a:L,"a *":L,".ck-card .ck-post-link":C,".ck-card .ck-post-button":C,".ck-card .ck-post-button span":function J(){return t(this).hasClass("ck-post-button")?(C.call(this),void 0):J.call(this.parentNode)},".ck-card .ck-switch, .ck-card .ck-switch span":function Z(){return t(this).hasClass("ck-switch")?(x.call(this),void 0):Z.call(this.parentNode)},".ck-segment .ck-option":function(){var t=d(this.parentNode,{ignoreRepeat:!0});t.select(this)},".ck-tagselector .ck-option":function(){var t=d(this.parentNode);t.select(this)},".ck-actions .ck-option":function(){var e=t(this).closest(".ck-actions"),n=d(e,{ignoreStatus:"false"!==e.data("ignoreStatus")&&!0});n.select(this)},".ck-folder header":function(){h(this.parentNode).toggle()},".ck-select, .ck-select span":function(){var e=t(this);return e.hasClass("ck-select")||(e=e.parent()),T(e)},".ck-actions-button, .ck-actions-button span":function(){var e=t(this);return e.hasClass("ck-actions-button")||(e=e.parent()),T(e)},".ck-modal-button":w,".ck-modal-link":w,".ck-growl-button":function(){v(this).open()},".ck-actionview article > .ck-option":function(){m.current.select(this)},".ck-actionview > footer .confirm":function(){m.current.confirm()},".ck-actionview > footer .cancel":function(){m.current.cancel()},".ck-modalview .wrapper > header .confirm":function(){p.confirm()},".ck-modalview .wrapper > header .cancel":function(){p.cancel()},".ck-top-title":function(){this.href&&K.openURL(this.href)},".ck-top-create .btn":w,".ck-top-action .btn":function(){}};_.bind("cardkit:updateSize",function(){if(p.isOpened){var t=p._contentWrapper,e=2*W.innerHeight;p._iframeContent&&p._iframeContent.css({minHeight:e+"px",width:t[0].offsetWidth+"px",height:t[0].offsetHeight-K.headerHeight+"px"}),p._content.css("minHeight",e+"px")}var n=m.current;if(n){var i=W.innerHeight+10,e=n._wrapperContent.children().map(function(t){return t.offsetHeight||0}).reduce(function(t,e){return t+e})+parseFloat(n._wrapperContent.find("article").eq(0).css("bottom"));i>e&&(e=i),n._wrapperContent.css({minHeight:e+"px"}),n._node.css({height:e+"px"})}}),p.event.bind("prepareOpen",function(){K.disableView=!0,k.CARD_SCROLL?t(B).addClass("bg").addClass("modal-view"):W.scrollTo(0,-1)}).bind("cancelOpen",function(){K.disableView=!1,t(B).removeClass("bg").removeClass("modal-view")}).bind("open",function(){k.CARD_SCROLL||t(B).addClass("bg").addClass("modal-view");
var e=p._contentWrapper;U=K.viewport,K.changeView(e,{isModal:!0}),p._iframeContent?p.event.done("frameOnload",function(){var e=t(p._iframeWindow[0].document.body);e.bind("touchstart",M),K.initView(e,{isModal:!0}),setTimeout(function(){K.enableControl()},400)}):p._content.html()?setTimeout(function(){K.enableControl()},400):p.event.done("contentchange",function(){K.initView(e,{isModal:!0}),setTimeout(function(){K.enableControl()},400)})}).bind("prepareClose",function(){K.disableView=!1,t(B).removeClass("modal-view")}).bind("cancelClose",function(){K.disableView=!0,t(B).addClass("modal-view")}).bind("close",function(){K.changeView(U),t(B).removeClass("bg")}).bind("needclose",function(){K.closeModal()}),_.bind("actionView:prepareOpen",function(e){K.disableView=!0;var n=e._wrapper;q=K.viewport,K.changeView(n,{preventRender:!0,isActions:!0}),k.CARD_SCROLL||t(B).addClass("bg")}).bind("actionView:cancelOpen",function(){p.isOpened||(K.disableView=!1),k.CARD_SCROLL||t(B).removeClass("bg"),K.changeView(q,{preventRender:p.isOpened,isModal:p.isOpened})}).bind("actionView:close",function(){p.isOpened||(K.disableView=!1),k.CARD_SCROLL||t(B).removeClass("bg"),K.changeView(q,{preventRender:p.isOpened,isModal:p.isOpened})}).bind("actionView:jump",function(t,e,n){t.event.once("close",function(){K.openURL(e,{target:n})})});var K={init:function(e){var n=this.root=e.root,i=t(Y);if(this.wrapper=t(".ck-wrapper",n),this.header=t(".ck-header",n),this.footer=t(".ck-footer",n),this.raw=t(".ck-raw",n),this.loadingCard=t("#ckLoading").data("rendered","1"),this.defaultCard=t("#ckDefault"),this.scrollMask=t(Q).appendTo(B),y.showScrollMask&&this.scrollMask.css({opacity:"0.2",background:"#f00"}),this.controlMask=t(Q).appendTo(B),y.showControlMask,this.cardMask=t(G).appendTo(B),this.headerHeight=this.header.height(),this.sizeInited=!1,this.viewportGarbage={},this.sessionLocked=!0,this.initWindow(),y.enableConsole&&console.info(k),this.scrollGesture=u(Y),a(Y),k.CARD_SCROLL||t(B).addClass("no-overflowscroll"),k.HIDE_TOPBAR&&t(B).addClass("mobilesafari-bar"),this.initState(),setTimeout(function(){K.hideAddressbar(),K.hideLoadingCard(),K.enableControl()},0),t(W).bind("resize",function(){var t=K.isLandscape();t!==K.landscapeMode&&(K.initWindow(),K.hideAddressbar(),m.current&&!k.UNIVERSAL_TRANS&&(K.viewport[0].innerHTML=K.viewport[0].innerHTML))}),this.loadingCard.bind("touchstart",function(t){t.preventDefault()}),r(Y,{matchesSelector:!0,preventDefault:!0}).on("click",{a:O,"a *":O}).on("tap",$).on("touchend",{".ck-stars":function(t){S.call(this,t,"val")},".ck-stars .slider-selected":function(t){S.call(this.parentNode,t,"val")}}).on("touchmove",{".ck-stars":function(t){S.call(this,t,"pretend")},".ck-stars .slider-selected":function(t){S.call(this.parentNode,t,"pretend")}}),i.bind("scrolldown",function(){c||setTimeout(function(){K.hideAddressbar()},0)}),k.CARD_SCROLL&&k.SAFARI_OVERFLOWSCROLL&&(i.bind("scrollstart",function(){K.scrollMask.show()}).bind("scrollend",function(){K.scrollMask.hide(),M()}),i.bind("touchstart",M)),k.UNIVERSAL_TRANS&&i.bind("scroll",function(){if(p.isOpened){var t=W.scrollY;if(!t&&W.innerHeight>=K.windowFullHeight)return;W.scrollTo(0,-1),B.scrollTop=0,t>40&&(K.viewport[0].scrollTop=K.viewport[0].scrollTop+t-40)}}),k.HIDE_TOPBAR&&k.CARD_SCROLL){var o,s,c,l=v({expires:-1,keepalive:!0,content:"向下拖动显示地址栏"}),h=function(){clearTimeout(s),c&&(c=!1,l.close())};this.header.bind("touchstart",function(t){o=t.touches[0].clientY,s=setTimeout(function(){c=!0,K.viewport[0].scrollTop=0,l.open()},200)}).bind("touchmove",function(t){clearTimeout(s),c&&o>t.touches[0].clientY&&(h(),c=!0,K.windowFullHeight=1/0,K.hideAddressbar())}).bind("touchend",h).bind("touchcancel",h)}},initWindow:function(){this.landscapeMode=this.isLandscape(),this.windowFullHeight=1/0},initState:function(){K.sessionLocked=!1;var e,n,i;if(k.UNIVERSAL_TRANS){t(W).bind("popstate",function(t){if(K.sessionLocked)return W.location.reload(!0),void 0;var e="ckLoading"===K.viewport[0].id;t.state?"_modal_"===t.state.next?p.isOpened||e||!K.viewport?X.back():p.set(t.state.opt).open():p.isOpened?K.closeModal():e?"ckLoading"===t.state.next?X.back():t.state.next&&(K.changeView(t.state.next),K.hideLoadingCard(),K.enableControl()):t.state.prev===K.viewport[0].id?L(t.state.next,t.state.link):t.state.next===K.viewport[0].id?X.back():A(t.state.next):e?X.forward():A("ckLoading")}),e=j();var r=X.state;n=r&&r.next,"_modal_"===n&&(n=r.prev,i=!0)}else k.PREVENT_CACHE&&t(W).bind("popstate",function(){K.hideTopbar(),K.viewport.hide(),K.changeView(K.loadingCard),setTimeout(function(){W.location.reload()},100)});n?(K.changeView(n),"ckLoading"===n?X.back():i&&!p.isOpened&&p.set(X.state.opt).open()):e?(K.changeView(K.loadingCard),X.forward()):K.initNewPage()},initNewPage:function(){K.changeView(K.defaultCard),H(K.loadingCard[0].id,K.defaultCard[0].id)},initView:function(e,n){e.data("rendered")||n.preventRender||(b.initCard(e,this.raw,this.footer,n),n.isModal||n.isActions||e.data("rendered","1"),e.find(".ck-mini-unit").forEach(function(e){var n=t(".ck-inslide",e);if(n[0]){var i=t(".ck-page span",e);g(n).event.bind("change",function(t){i.removeClass("enable"),i.eq(t).addClass("enable")})}})),this.watchScroll(e)},releaseView:function(){h.gc(V),d.gc(V),this.viewportGarbage={},z=0},changeView:function(e,n){n=n||{},"string"==typeof e&&(e=t("#"+e));var i=e===this.loadingCard;this.initView(e,n),this.viewport=e.show(),i||this.updateSize(n),n.isModal||n.isActions||this.updateHeader(),sessionStorage.ck_lasturl=F.href,i||setTimeout(function(){_.fire("readycardchange",[e])},0)},updateSize:function(t){if(t=t||{},k.CARD_SCROLL||t.isActions){this.viewport[0].style.height=(this.sizeInited?W.innerHeight:screen.availHeight+60)+2+"px";var e=this.viewport.find(".ck-footer"),n=e&&e.prev()[0];if(n){var i=screen.availHeight-(n.offsetTop+n.offsetHeight+this.viewport[0].scrollTop);i>0?e.css("paddingTop",i+"px"):e.css("paddingTop","0px")}}_.fire("cardkit:updateSize")},watchScroll:function(t){this.scrollGesture.watchScroll(t[0])},updateHeader:function(){var t=this.header.find(".ck-top-create").empty(),e=this.viewport.find(".ckd-top-create").html();e&&t.append(e)},renderUnit:function(t){b.initUnit(t,this.raw)},hideLoadingCard:function(){this._loadingAnimate||(this._loadingAnimate=o()),this._loadingAnimate.clear().play().actor(K.loadingCard[0],{opacity:0},400,"ease").follow().then(function(){K.loadingCard.hide().css({position:"static",opacity:"",height:W.innerHeight+"px"}),K.showTopbar()})},hideTopbar:function(){this.topbarEnable&&!this.disableView&&(this.topbarEnable=!1,t(B).removeClass("ck-topbar-enabled"))},showTopbar:function(){this.topbarEnable||(this.topbarEnable=!0,t(B).addClass("ck-topbar-enabled"))},hideAddressbar:function(){this.windowFullHeight>W.innerHeight&&(this.loadingCard.find("div")[0].style.visibility="hidden",!k.HIDE_TOPBAR||!k.CARD_SCROLL&&this.sizeInited||(W.scrollTo(0,-1),B.scrollTop=0),this.sizeInited||(this.sizeInited=!0),this.windowFullHeight=W.innerHeight,K.updateSize(),this.loadingCard.find("div")[0].style.visibility="")},isLandscape:function(){return W.innerWidth/W.innerHeight>1.1},enableControl:function(){this.controlMask.hide(),W.ckControl=P},disableControl:function(){this.controlMask.show(),W.ckControl=D},showLoading:function(t){this.disableControl(),this.loadingTips||(this.loadingTips=v({expires:-1,keepalive:!0,corner:"center"})),this.loadingTips.set({content:t||"正在加载..."}).open(),this._loadingStart=+new Date},hideLoading:function(t){t=e.mix({duration:800},t);var n=+new Date-this._loadingStart;t.duration>n?setTimeout(function(){K.hideLoading(t)},t.duration-n):(this.loadingTips&&this.loadingTips.close(),this.enableControl())},openModal:function(t){this.hideAddressbar(),this.disableControl(),p.isOpened||H(K.viewport[0].id,"_modal_",!1,t),p.set(t).open()},closeModal:function(){p.close()},alert:function(t,n){m("ckAlert",e.mix({title:"提示",content:t||"",cancelText:"关闭",multiselect:!1},n)).open()},confirm:function(t,n,i){m("ckAlert",e.mix({title:"提示",content:t||"",confirmText:"确认",cancelText:"取消",multiselect:!0},i)).open().event.once("confirm",n)},openURL:R,delegate:r(Y,{autoOverride:!0,matchesSelector:!0,preventDefault:!0}),event:_,control:h,picker:d,modalCard:p,actionView:m,growl:v};return K}),require.config({baseUrl:"js/mod/",distUrl:"dist/js/mod/",aliases:{cardkit:"../cardkit/"}}),define("mo/easing/functions",[],function(){}),define("mo/mainloop",[],function(){}),define("cardkit/env",[],function(){return{}}),define("cardkit/pageready",["finish","cardkit/bus"],function(t,e){e.once("readycardchange",function(){setTimeout(t,500)})}),require(["dollar","cardkit/app","cardkit/env"],function(t,e,n){function i(){e.init({root:t(".ck-root")})}n.enableConsole?require(["mo/console"],function(e){e.config({output:t("#console")[0]}).enable(),i()}):i()});